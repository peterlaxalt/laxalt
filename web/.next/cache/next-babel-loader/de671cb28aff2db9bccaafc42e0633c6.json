{"ast":null,"code":"import _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport _Object$defineProperties from \"@babel/runtime-corejs2/core-js/object/define-properties\";\nimport _Object$setPrototypeOf from \"@babel/runtime-corejs2/core-js/object/set-prototype-of\";\nimport _Object$create from \"@babel/runtime-corejs2/core-js/object/create\";\nimport _Object$getPrototypeOf from \"@babel/runtime-corejs2/core-js/object/get-prototype-of\";\nimport _Object$getOwnPropertyDescriptor from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor\";\nimport _Object$defineProperty from \"@babel/runtime-corejs2/core-js/object/define-property\";\nimport _Symbol$iterator from \"@babel/runtime-corejs2/core-js/symbol/iterator\";\nimport _Symbol from \"@babel/runtime-corejs2/core-js/symbol\";\nimport _parseFloat from \"@babel/runtime-corejs2/core-js/parse-float\";\nimport _parseInt from \"@babel/runtime-corejs2/core-js/parse-int\";\nimport _Array$isArray from \"@babel/runtime-corejs2/core-js/array/is-array\";\nimport _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\n\n/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\nfunction ___$insertStyle(css) {\n  if (!css) {\n    return;\n  }\n\n  if (false) {\n    return;\n  }\n\n  var style = document.createElement('style');\n  style.setAttribute('type', 'text/css');\n  style.innerHTML = css;\n  document.head.appendChild(style);\n  return css;\n}\n\nfunction colorToString(color, forceCSSHex) {\n  var colorFormat = color.__state.conversionName.toString();\n\n  var r = Math.round(color.r);\n  var g = Math.round(color.g);\n  var b = Math.round(color.b);\n  var a = color.a;\n  var h = Math.round(color.h);\n  var s = color.s.toFixed(1);\n  var v = color.v.toFixed(1);\n\n  if (forceCSSHex || colorFormat === 'THREE_CHAR_HEX' || colorFormat === 'SIX_CHAR_HEX') {\n    var str = color.hex.toString(16);\n\n    while (str.length < 6) {\n      str = '0' + str;\n    }\n\n    return '#' + str;\n  } else if (colorFormat === 'CSS_RGB') {\n    return 'rgb(' + r + ',' + g + ',' + b + ')';\n  } else if (colorFormat === 'CSS_RGBA') {\n    return 'rgba(' + r + ',' + g + ',' + b + ',' + a + ')';\n  } else if (colorFormat === 'HEX') {\n    return '0x' + color.hex.toString(16);\n  } else if (colorFormat === 'RGB_ARRAY') {\n    return '[' + r + ',' + g + ',' + b + ']';\n  } else if (colorFormat === 'RGBA_ARRAY') {\n    return '[' + r + ',' + g + ',' + b + ',' + a + ']';\n  } else if (colorFormat === 'RGB_OBJ') {\n    return '{r:' + r + ',g:' + g + ',b:' + b + '}';\n  } else if (colorFormat === 'RGBA_OBJ') {\n    return '{r:' + r + ',g:' + g + ',b:' + b + ',a:' + a + '}';\n  } else if (colorFormat === 'HSV_OBJ') {\n    return '{h:' + h + ',s:' + s + ',v:' + v + '}';\n  } else if (colorFormat === 'HSVA_OBJ') {\n    return '{h:' + h + ',s:' + s + ',v:' + v + ',a:' + a + '}';\n  }\n\n  return 'unknown format';\n}\n\nvar ARR_EACH = Array.prototype.forEach;\nvar ARR_SLICE = Array.prototype.slice;\nvar Common = {\n  BREAK: {},\n  extend: function extend(target) {\n    this.each(ARR_SLICE.call(arguments, 1), function (obj) {\n      var keys = this.isObject(obj) ? _Object$keys(obj) : [];\n      keys.forEach(function (key) {\n        if (!this.isUndefined(obj[key])) {\n          target[key] = obj[key];\n        }\n      }.bind(this));\n    }, this);\n    return target;\n  },\n  defaults: function defaults(target) {\n    this.each(ARR_SLICE.call(arguments, 1), function (obj) {\n      var keys = this.isObject(obj) ? _Object$keys(obj) : [];\n      keys.forEach(function (key) {\n        if (this.isUndefined(target[key])) {\n          target[key] = obj[key];\n        }\n      }.bind(this));\n    }, this);\n    return target;\n  },\n  compose: function compose() {\n    var toCall = ARR_SLICE.call(arguments);\n    return function () {\n      var args = ARR_SLICE.call(arguments);\n\n      for (var i = toCall.length - 1; i >= 0; i--) {\n        args = [toCall[i].apply(this, args)];\n      }\n\n      return args[0];\n    };\n  },\n  each: function each(obj, itr, scope) {\n    if (!obj) {\n      return;\n    }\n\n    if (ARR_EACH && obj.forEach && obj.forEach === ARR_EACH) {\n      obj.forEach(itr, scope);\n    } else if (obj.length === obj.length + 0) {\n      var key = void 0;\n      var l = void 0;\n\n      for (key = 0, l = obj.length; key < l; key++) {\n        if (key in obj && itr.call(scope, obj[key], key) === this.BREAK) {\n          return;\n        }\n      }\n    } else {\n      for (var _key in obj) {\n        if (itr.call(scope, obj[_key], _key) === this.BREAK) {\n          return;\n        }\n      }\n    }\n  },\n  defer: function defer(fnc) {\n    setTimeout(fnc, 0);\n  },\n  debounce: function debounce(func, threshold, callImmediately) {\n    var timeout = void 0;\n    return function () {\n      var obj = this;\n      var args = arguments;\n\n      function delayed() {\n        timeout = null;\n        if (!callImmediately) func.apply(obj, args);\n      }\n\n      var callNow = callImmediately || !timeout;\n      clearTimeout(timeout);\n      timeout = setTimeout(delayed, threshold);\n\n      if (callNow) {\n        func.apply(obj, args);\n      }\n    };\n  },\n  toArray: function toArray(obj) {\n    if (obj.toArray) return obj.toArray();\n    return ARR_SLICE.call(obj);\n  },\n  isUndefined: function isUndefined(obj) {\n    return obj === undefined;\n  },\n  isNull: function isNull(obj) {\n    return obj === null;\n  },\n  isNaN: function (_isNaN) {\n    function isNaN() {\n      return _isNaN.apply(this, arguments);\n    }\n\n    isNaN.toString = function () {\n      return _isNaN.toString();\n    };\n\n    return isNaN;\n  }(function (obj) {\n    return isNaN(obj);\n  }),\n  isArray: _Array$isArray || function (obj) {\n    return obj.constructor === Array;\n  },\n  isObject: function isObject(obj) {\n    return obj === Object(obj);\n  },\n  isNumber: function isNumber(obj) {\n    return obj === obj + 0;\n  },\n  isString: function isString(obj) {\n    return obj === obj + '';\n  },\n  isBoolean: function isBoolean(obj) {\n    return obj === false || obj === true;\n  },\n  isFunction: function isFunction(obj) {\n    return Object.prototype.toString.call(obj) === '[object Function]';\n  }\n};\nvar INTERPRETATIONS = [{\n  litmus: Common.isString,\n  conversions: {\n    THREE_CHAR_HEX: {\n      read: function read(original) {\n        var test = original.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);\n\n        if (test === null) {\n          return false;\n        }\n\n        return {\n          space: 'HEX',\n          hex: _parseInt('0x' + test[1].toString() + test[1].toString() + test[2].toString() + test[2].toString() + test[3].toString() + test[3].toString(), 0)\n        };\n      },\n      write: colorToString\n    },\n    SIX_CHAR_HEX: {\n      read: function read(original) {\n        var test = original.match(/^#([A-F0-9]{6})$/i);\n\n        if (test === null) {\n          return false;\n        }\n\n        return {\n          space: 'HEX',\n          hex: _parseInt('0x' + test[1].toString(), 0)\n        };\n      },\n      write: colorToString\n    },\n    CSS_RGB: {\n      read: function read(original) {\n        var test = original.match(/^rgb\\(\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*\\)/);\n\n        if (test === null) {\n          return false;\n        }\n\n        return {\n          space: 'RGB',\n          r: _parseFloat(test[1]),\n          g: _parseFloat(test[2]),\n          b: _parseFloat(test[3])\n        };\n      },\n      write: colorToString\n    },\n    CSS_RGBA: {\n      read: function read(original) {\n        var test = original.match(/^rgba\\(\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*\\)/);\n\n        if (test === null) {\n          return false;\n        }\n\n        return {\n          space: 'RGB',\n          r: _parseFloat(test[1]),\n          g: _parseFloat(test[2]),\n          b: _parseFloat(test[3]),\n          a: _parseFloat(test[4])\n        };\n      },\n      write: colorToString\n    }\n  }\n}, {\n  litmus: Common.isNumber,\n  conversions: {\n    HEX: {\n      read: function read(original) {\n        return {\n          space: 'HEX',\n          hex: original,\n          conversionName: 'HEX'\n        };\n      },\n      write: function write(color) {\n        return color.hex;\n      }\n    }\n  }\n}, {\n  litmus: Common.isArray,\n  conversions: {\n    RGB_ARRAY: {\n      read: function read(original) {\n        if (original.length !== 3) {\n          return false;\n        }\n\n        return {\n          space: 'RGB',\n          r: original[0],\n          g: original[1],\n          b: original[2]\n        };\n      },\n      write: function write(color) {\n        return [color.r, color.g, color.b];\n      }\n    },\n    RGBA_ARRAY: {\n      read: function read(original) {\n        if (original.length !== 4) return false;\n        return {\n          space: 'RGB',\n          r: original[0],\n          g: original[1],\n          b: original[2],\n          a: original[3]\n        };\n      },\n      write: function write(color) {\n        return [color.r, color.g, color.b, color.a];\n      }\n    }\n  }\n}, {\n  litmus: Common.isObject,\n  conversions: {\n    RGBA_OBJ: {\n      read: function read(original) {\n        if (Common.isNumber(original.r) && Common.isNumber(original.g) && Common.isNumber(original.b) && Common.isNumber(original.a)) {\n          return {\n            space: 'RGB',\n            r: original.r,\n            g: original.g,\n            b: original.b,\n            a: original.a\n          };\n        }\n\n        return false;\n      },\n      write: function write(color) {\n        return {\n          r: color.r,\n          g: color.g,\n          b: color.b,\n          a: color.a\n        };\n      }\n    },\n    RGB_OBJ: {\n      read: function read(original) {\n        if (Common.isNumber(original.r) && Common.isNumber(original.g) && Common.isNumber(original.b)) {\n          return {\n            space: 'RGB',\n            r: original.r,\n            g: original.g,\n            b: original.b\n          };\n        }\n\n        return false;\n      },\n      write: function write(color) {\n        return {\n          r: color.r,\n          g: color.g,\n          b: color.b\n        };\n      }\n    },\n    HSVA_OBJ: {\n      read: function read(original) {\n        if (Common.isNumber(original.h) && Common.isNumber(original.s) && Common.isNumber(original.v) && Common.isNumber(original.a)) {\n          return {\n            space: 'HSV',\n            h: original.h,\n            s: original.s,\n            v: original.v,\n            a: original.a\n          };\n        }\n\n        return false;\n      },\n      write: function write(color) {\n        return {\n          h: color.h,\n          s: color.s,\n          v: color.v,\n          a: color.a\n        };\n      }\n    },\n    HSV_OBJ: {\n      read: function read(original) {\n        if (Common.isNumber(original.h) && Common.isNumber(original.s) && Common.isNumber(original.v)) {\n          return {\n            space: 'HSV',\n            h: original.h,\n            s: original.s,\n            v: original.v\n          };\n        }\n\n        return false;\n      },\n      write: function write(color) {\n        return {\n          h: color.h,\n          s: color.s,\n          v: color.v\n        };\n      }\n    }\n  }\n}];\nvar result = void 0;\nvar toReturn = void 0;\n\nvar interpret = function interpret() {\n  toReturn = false;\n  var original = arguments.length > 1 ? Common.toArray(arguments) : arguments[0];\n  Common.each(INTERPRETATIONS, function (family) {\n    if (family.litmus(original)) {\n      Common.each(family.conversions, function (conversion, conversionName) {\n        result = conversion.read(original);\n\n        if (toReturn === false && result !== false) {\n          toReturn = result;\n          result.conversionName = conversionName;\n          result.conversion = conversion;\n          return Common.BREAK;\n        }\n      });\n      return Common.BREAK;\n    }\n  });\n  return toReturn;\n};\n\nvar tmpComponent = void 0;\nvar ColorMath = {\n  hsv_to_rgb: function hsv_to_rgb(h, s, v) {\n    var hi = Math.floor(h / 60) % 6;\n    var f = h / 60 - Math.floor(h / 60);\n    var p = v * (1.0 - s);\n    var q = v * (1.0 - f * s);\n    var t = v * (1.0 - (1.0 - f) * s);\n    var c = [[v, t, p], [q, v, p], [p, v, t], [p, q, v], [t, p, v], [v, p, q]][hi];\n    return {\n      r: c[0] * 255,\n      g: c[1] * 255,\n      b: c[2] * 255\n    };\n  },\n  rgb_to_hsv: function rgb_to_hsv(r, g, b) {\n    var min = Math.min(r, g, b);\n    var max = Math.max(r, g, b);\n    var delta = max - min;\n    var h = void 0;\n    var s = void 0;\n\n    if (max !== 0) {\n      s = delta / max;\n    } else {\n      return {\n        h: NaN,\n        s: 0,\n        v: 0\n      };\n    }\n\n    if (r === max) {\n      h = (g - b) / delta;\n    } else if (g === max) {\n      h = 2 + (b - r) / delta;\n    } else {\n      h = 4 + (r - g) / delta;\n    }\n\n    h /= 6;\n\n    if (h < 0) {\n      h += 1;\n    }\n\n    return {\n      h: h * 360,\n      s: s,\n      v: max / 255\n    };\n  },\n  rgb_to_hex: function rgb_to_hex(r, g, b) {\n    var hex = this.hex_with_component(0, 2, r);\n    hex = this.hex_with_component(hex, 1, g);\n    hex = this.hex_with_component(hex, 0, b);\n    return hex;\n  },\n  component_from_hex: function component_from_hex(hex, componentIndex) {\n    return hex >> componentIndex * 8 & 0xFF;\n  },\n  hex_with_component: function hex_with_component(hex, componentIndex, value) {\n    return value << (tmpComponent = componentIndex * 8) | hex & ~(0xFF << tmpComponent);\n  }\n};\n\nvar _typeof = typeof _Symbol === \"function\" && typeof _Symbol$iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof _Symbol === \"function\" && obj.constructor === _Symbol && obj !== _Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\nvar classCallCheck = function classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n\n      _Object$defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar get = function get(object, property, receiver) {\n  if (object === null) object = Function.prototype;\n\n  var desc = _Object$getOwnPropertyDescriptor(object, property);\n\n  if (desc === undefined) {\n    var parent = _Object$getPrototypeOf(object);\n\n    if (parent === null) {\n      return undefined;\n    } else {\n      return get(parent, property, receiver);\n    }\n  } else if (\"value\" in desc) {\n    return desc.value;\n  } else {\n    var getter = desc.get;\n\n    if (getter === undefined) {\n      return undefined;\n    }\n\n    return getter.call(receiver);\n  }\n};\n\nvar inherits = function inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = _Object$create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _Object$setPrototypeOf ? _Object$setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\nvar possibleConstructorReturn = function possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n};\n\nvar Color = function () {\n  function Color() {\n    classCallCheck(this, Color);\n    this.__state = interpret.apply(this, arguments);\n\n    if (this.__state === false) {\n      throw new Error('Failed to interpret color arguments');\n    }\n\n    this.__state.a = this.__state.a || 1;\n  }\n\n  createClass(Color, [{\n    key: 'toString',\n    value: function toString() {\n      return colorToString(this);\n    }\n  }, {\n    key: 'toHexString',\n    value: function toHexString() {\n      return colorToString(this, true);\n    }\n  }, {\n    key: 'toOriginal',\n    value: function toOriginal() {\n      return this.__state.conversion.write(this);\n    }\n  }]);\n  return Color;\n}();\n\nfunction defineRGBComponent(target, component, componentHexIndex) {\n  _Object$defineProperty(target, component, {\n    get: function get$$1() {\n      if (this.__state.space === 'RGB') {\n        return this.__state[component];\n      }\n\n      Color.recalculateRGB(this, component, componentHexIndex);\n      return this.__state[component];\n    },\n    set: function set$$1(v) {\n      if (this.__state.space !== 'RGB') {\n        Color.recalculateRGB(this, component, componentHexIndex);\n        this.__state.space = 'RGB';\n      }\n\n      this.__state[component] = v;\n    }\n  });\n}\n\nfunction defineHSVComponent(target, component) {\n  _Object$defineProperty(target, component, {\n    get: function get$$1() {\n      if (this.__state.space === 'HSV') {\n        return this.__state[component];\n      }\n\n      Color.recalculateHSV(this);\n      return this.__state[component];\n    },\n    set: function set$$1(v) {\n      if (this.__state.space !== 'HSV') {\n        Color.recalculateHSV(this);\n        this.__state.space = 'HSV';\n      }\n\n      this.__state[component] = v;\n    }\n  });\n}\n\nColor.recalculateRGB = function (color, component, componentHexIndex) {\n  if (color.__state.space === 'HEX') {\n    color.__state[component] = ColorMath.component_from_hex(color.__state.hex, componentHexIndex);\n  } else if (color.__state.space === 'HSV') {\n    Common.extend(color.__state, ColorMath.hsv_to_rgb(color.__state.h, color.__state.s, color.__state.v));\n  } else {\n    throw new Error('Corrupted color state');\n  }\n};\n\nColor.recalculateHSV = function (color) {\n  var result = ColorMath.rgb_to_hsv(color.r, color.g, color.b);\n  Common.extend(color.__state, {\n    s: result.s,\n    v: result.v\n  });\n\n  if (!Common.isNaN(result.h)) {\n    color.__state.h = result.h;\n  } else if (Common.isUndefined(color.__state.h)) {\n    color.__state.h = 0;\n  }\n};\n\nColor.COMPONENTS = ['r', 'g', 'b', 'h', 's', 'v', 'hex', 'a'];\ndefineRGBComponent(Color.prototype, 'r', 2);\ndefineRGBComponent(Color.prototype, 'g', 1);\ndefineRGBComponent(Color.prototype, 'b', 0);\ndefineHSVComponent(Color.prototype, 'h');\ndefineHSVComponent(Color.prototype, 's');\ndefineHSVComponent(Color.prototype, 'v');\n\n_Object$defineProperty(Color.prototype, 'a', {\n  get: function get$$1() {\n    return this.__state.a;\n  },\n  set: function set$$1(v) {\n    this.__state.a = v;\n  }\n});\n\n_Object$defineProperty(Color.prototype, 'hex', {\n  get: function get$$1() {\n    if (!this.__state.space !== 'HEX') {\n      this.__state.hex = ColorMath.rgb_to_hex(this.r, this.g, this.b);\n    }\n\n    return this.__state.hex;\n  },\n  set: function set$$1(v) {\n    this.__state.space = 'HEX';\n    this.__state.hex = v;\n  }\n});\n\nvar Controller = function () {\n  function Controller(object, property) {\n    classCallCheck(this, Controller);\n    this.initialValue = object[property];\n    this.domElement = document.createElement('div');\n    this.object = object;\n    this.property = property;\n    this.__onChange = undefined;\n    this.__onFinishChange = undefined;\n  }\n\n  createClass(Controller, [{\n    key: 'onChange',\n    value: function onChange(fnc) {\n      this.__onChange = fnc;\n      return this;\n    }\n  }, {\n    key: 'onFinishChange',\n    value: function onFinishChange(fnc) {\n      this.__onFinishChange = fnc;\n      return this;\n    }\n  }, {\n    key: 'setValue',\n    value: function setValue(newValue) {\n      this.object[this.property] = newValue;\n\n      if (this.__onChange) {\n        this.__onChange.call(this, newValue);\n      }\n\n      this.updateDisplay();\n      return this;\n    }\n  }, {\n    key: 'getValue',\n    value: function getValue() {\n      return this.object[this.property];\n    }\n  }, {\n    key: 'updateDisplay',\n    value: function updateDisplay() {\n      return this;\n    }\n  }, {\n    key: 'isModified',\n    value: function isModified() {\n      return this.initialValue !== this.getValue();\n    }\n  }]);\n  return Controller;\n}();\n\nvar EVENT_MAP = {\n  HTMLEvents: ['change'],\n  MouseEvents: ['click', 'mousemove', 'mousedown', 'mouseup', 'mouseover'],\n  KeyboardEvents: ['keydown']\n};\nvar EVENT_MAP_INV = {};\nCommon.each(EVENT_MAP, function (v, k) {\n  Common.each(v, function (e) {\n    EVENT_MAP_INV[e] = k;\n  });\n});\nvar CSS_VALUE_PIXELS = /(\\d+(\\.\\d+)?)px/;\n\nfunction cssValueToPixels(val) {\n  if (val === '0' || Common.isUndefined(val)) {\n    return 0;\n  }\n\n  var match = val.match(CSS_VALUE_PIXELS);\n\n  if (!Common.isNull(match)) {\n    return _parseFloat(match[1]);\n  }\n\n  return 0;\n}\n\nvar dom = {\n  makeSelectable: function makeSelectable(elem, selectable) {\n    if (elem === undefined || elem.style === undefined) return;\n    elem.onselectstart = selectable ? function () {\n      return false;\n    } : function () {};\n    elem.style.MozUserSelect = selectable ? 'auto' : 'none';\n    elem.style.KhtmlUserSelect = selectable ? 'auto' : 'none';\n    elem.unselectable = selectable ? 'on' : 'off';\n  },\n  makeFullscreen: function makeFullscreen(elem, hor, vert) {\n    var vertical = vert;\n    var horizontal = hor;\n\n    if (Common.isUndefined(horizontal)) {\n      horizontal = true;\n    }\n\n    if (Common.isUndefined(vertical)) {\n      vertical = true;\n    }\n\n    elem.style.position = 'absolute';\n\n    if (horizontal) {\n      elem.style.left = 0;\n      elem.style.right = 0;\n    }\n\n    if (vertical) {\n      elem.style.top = 0;\n      elem.style.bottom = 0;\n    }\n  },\n  fakeEvent: function fakeEvent(elem, eventType, pars, aux) {\n    var params = pars || {};\n    var className = EVENT_MAP_INV[eventType];\n\n    if (!className) {\n      throw new Error('Event type ' + eventType + ' not supported.');\n    }\n\n    var evt = document.createEvent(className);\n\n    switch (className) {\n      case 'MouseEvents':\n        {\n          var clientX = params.x || params.clientX || 0;\n          var clientY = params.y || params.clientY || 0;\n          evt.initMouseEvent(eventType, params.bubbles || false, params.cancelable || true, window, params.clickCount || 1, 0, 0, clientX, clientY, false, false, false, false, 0, null);\n          break;\n        }\n\n      case 'KeyboardEvents':\n        {\n          var init = evt.initKeyboardEvent || evt.initKeyEvent;\n          Common.defaults(params, {\n            cancelable: true,\n            ctrlKey: false,\n            altKey: false,\n            shiftKey: false,\n            metaKey: false,\n            keyCode: undefined,\n            charCode: undefined\n          });\n          init(eventType, params.bubbles || false, params.cancelable, window, params.ctrlKey, params.altKey, params.shiftKey, params.metaKey, params.keyCode, params.charCode);\n          break;\n        }\n\n      default:\n        {\n          evt.initEvent(eventType, params.bubbles || false, params.cancelable || true);\n          break;\n        }\n    }\n\n    Common.defaults(evt, aux);\n    elem.dispatchEvent(evt);\n  },\n  bind: function bind(elem, event, func, newBool) {\n    var bool = newBool || false;\n\n    if (elem.addEventListener) {\n      elem.addEventListener(event, func, bool);\n    } else if (elem.attachEvent) {\n      elem.attachEvent('on' + event, func);\n    }\n\n    return dom;\n  },\n  unbind: function unbind(elem, event, func, newBool) {\n    var bool = newBool || false;\n\n    if (elem.removeEventListener) {\n      elem.removeEventListener(event, func, bool);\n    } else if (elem.detachEvent) {\n      elem.detachEvent('on' + event, func);\n    }\n\n    return dom;\n  },\n  addClass: function addClass(elem, className) {\n    if (elem.className === undefined) {\n      elem.className = className;\n    } else if (elem.className !== className) {\n      var classes = elem.className.split(/ +/);\n\n      if (classes.indexOf(className) === -1) {\n        classes.push(className);\n        elem.className = classes.join(' ').replace(/^\\s+/, '').replace(/\\s+$/, '');\n      }\n    }\n\n    return dom;\n  },\n  removeClass: function removeClass(elem, className) {\n    if (className) {\n      if (elem.className === className) {\n        elem.removeAttribute('class');\n      } else {\n        var classes = elem.className.split(/ +/);\n        var index = classes.indexOf(className);\n\n        if (index !== -1) {\n          classes.splice(index, 1);\n          elem.className = classes.join(' ');\n        }\n      }\n    } else {\n      elem.className = undefined;\n    }\n\n    return dom;\n  },\n  hasClass: function hasClass(elem, className) {\n    return new RegExp('(?:^|\\\\s+)' + className + '(?:\\\\s+|$)').test(elem.className) || false;\n  },\n  getWidth: function getWidth(elem) {\n    var style = getComputedStyle(elem);\n    return cssValueToPixels(style['border-left-width']) + cssValueToPixels(style['border-right-width']) + cssValueToPixels(style['padding-left']) + cssValueToPixels(style['padding-right']) + cssValueToPixels(style.width);\n  },\n  getHeight: function getHeight(elem) {\n    var style = getComputedStyle(elem);\n    return cssValueToPixels(style['border-top-width']) + cssValueToPixels(style['border-bottom-width']) + cssValueToPixels(style['padding-top']) + cssValueToPixels(style['padding-bottom']) + cssValueToPixels(style.height);\n  },\n  getOffset: function getOffset(el) {\n    var elem = el;\n    var offset = {\n      left: 0,\n      top: 0\n    };\n\n    if (elem.offsetParent) {\n      do {\n        offset.left += elem.offsetLeft;\n        offset.top += elem.offsetTop;\n        elem = elem.offsetParent;\n      } while (elem);\n    }\n\n    return offset;\n  },\n  isActive: function isActive(elem) {\n    return elem === document.activeElement && (elem.type || elem.href);\n  }\n};\n\nvar BooleanController = function (_Controller) {\n  inherits(BooleanController, _Controller);\n\n  function BooleanController(object, property) {\n    classCallCheck(this, BooleanController);\n\n    var _this2 = possibleConstructorReturn(this, (BooleanController.__proto__ || _Object$getPrototypeOf(BooleanController)).call(this, object, property));\n\n    var _this = _this2;\n    _this2.__prev = _this2.getValue();\n    _this2.__checkbox = document.createElement('input');\n\n    _this2.__checkbox.setAttribute('type', 'checkbox');\n\n    function onChange() {\n      _this.setValue(!_this.__prev);\n    }\n\n    dom.bind(_this2.__checkbox, 'change', onChange, false);\n\n    _this2.domElement.appendChild(_this2.__checkbox);\n\n    _this2.updateDisplay();\n\n    return _this2;\n  }\n\n  createClass(BooleanController, [{\n    key: 'setValue',\n    value: function setValue(v) {\n      var toReturn = get(BooleanController.prototype.__proto__ || _Object$getPrototypeOf(BooleanController.prototype), 'setValue', this).call(this, v);\n\n      if (this.__onFinishChange) {\n        this.__onFinishChange.call(this, this.getValue());\n      }\n\n      this.__prev = this.getValue();\n      return toReturn;\n    }\n  }, {\n    key: 'updateDisplay',\n    value: function updateDisplay() {\n      if (this.getValue() === true) {\n        this.__checkbox.setAttribute('checked', 'checked');\n\n        this.__checkbox.checked = true;\n        this.__prev = true;\n      } else {\n        this.__checkbox.checked = false;\n        this.__prev = false;\n      }\n\n      return get(BooleanController.prototype.__proto__ || _Object$getPrototypeOf(BooleanController.prototype), 'updateDisplay', this).call(this);\n    }\n  }]);\n  return BooleanController;\n}(Controller);\n\nvar OptionController = function (_Controller) {\n  inherits(OptionController, _Controller);\n\n  function OptionController(object, property, opts) {\n    classCallCheck(this, OptionController);\n\n    var _this2 = possibleConstructorReturn(this, (OptionController.__proto__ || _Object$getPrototypeOf(OptionController)).call(this, object, property));\n\n    var options = opts;\n    var _this = _this2;\n    _this2.__select = document.createElement('select');\n\n    if (Common.isArray(options)) {\n      var map = {};\n      Common.each(options, function (element) {\n        map[element] = element;\n      });\n      options = map;\n    }\n\n    Common.each(options, function (value, key) {\n      var opt = document.createElement('option');\n      opt.innerHTML = key;\n      opt.setAttribute('value', value);\n\n      _this.__select.appendChild(opt);\n    });\n\n    _this2.updateDisplay();\n\n    dom.bind(_this2.__select, 'change', function () {\n      var desiredValue = this.options[this.selectedIndex].value;\n\n      _this.setValue(desiredValue);\n    });\n\n    _this2.domElement.appendChild(_this2.__select);\n\n    return _this2;\n  }\n\n  createClass(OptionController, [{\n    key: 'setValue',\n    value: function setValue(v) {\n      var toReturn = get(OptionController.prototype.__proto__ || _Object$getPrototypeOf(OptionController.prototype), 'setValue', this).call(this, v);\n\n      if (this.__onFinishChange) {\n        this.__onFinishChange.call(this, this.getValue());\n      }\n\n      return toReturn;\n    }\n  }, {\n    key: 'updateDisplay',\n    value: function updateDisplay() {\n      if (dom.isActive(this.__select)) return this;\n      this.__select.value = this.getValue();\n      return get(OptionController.prototype.__proto__ || _Object$getPrototypeOf(OptionController.prototype), 'updateDisplay', this).call(this);\n    }\n  }]);\n  return OptionController;\n}(Controller);\n\nvar StringController = function (_Controller) {\n  inherits(StringController, _Controller);\n\n  function StringController(object, property) {\n    classCallCheck(this, StringController);\n\n    var _this2 = possibleConstructorReturn(this, (StringController.__proto__ || _Object$getPrototypeOf(StringController)).call(this, object, property));\n\n    var _this = _this2;\n\n    function onChange() {\n      _this.setValue(_this.__input.value);\n    }\n\n    function onBlur() {\n      if (_this.__onFinishChange) {\n        _this.__onFinishChange.call(_this, _this.getValue());\n      }\n    }\n\n    _this2.__input = document.createElement('input');\n\n    _this2.__input.setAttribute('type', 'text');\n\n    dom.bind(_this2.__input, 'keyup', onChange);\n    dom.bind(_this2.__input, 'change', onChange);\n    dom.bind(_this2.__input, 'blur', onBlur);\n    dom.bind(_this2.__input, 'keydown', function (e) {\n      if (e.keyCode === 13) {\n        this.blur();\n      }\n    });\n\n    _this2.updateDisplay();\n\n    _this2.domElement.appendChild(_this2.__input);\n\n    return _this2;\n  }\n\n  createClass(StringController, [{\n    key: 'updateDisplay',\n    value: function updateDisplay() {\n      if (!dom.isActive(this.__input)) {\n        this.__input.value = this.getValue();\n      }\n\n      return get(StringController.prototype.__proto__ || _Object$getPrototypeOf(StringController.prototype), 'updateDisplay', this).call(this);\n    }\n  }]);\n  return StringController;\n}(Controller);\n\nfunction numDecimals(x) {\n  var _x = x.toString();\n\n  if (_x.indexOf('.') > -1) {\n    return _x.length - _x.indexOf('.') - 1;\n  }\n\n  return 0;\n}\n\nvar NumberController = function (_Controller) {\n  inherits(NumberController, _Controller);\n\n  function NumberController(object, property, params) {\n    classCallCheck(this, NumberController);\n\n    var _this = possibleConstructorReturn(this, (NumberController.__proto__ || _Object$getPrototypeOf(NumberController)).call(this, object, property));\n\n    var _params = params || {};\n\n    _this.__min = _params.min;\n    _this.__max = _params.max;\n    _this.__step = _params.step;\n\n    if (Common.isUndefined(_this.__step)) {\n      if (_this.initialValue === 0) {\n        _this.__impliedStep = 1;\n      } else {\n        _this.__impliedStep = Math.pow(10, Math.floor(Math.log(Math.abs(_this.initialValue)) / Math.LN10)) / 10;\n      }\n    } else {\n      _this.__impliedStep = _this.__step;\n    }\n\n    _this.__precision = numDecimals(_this.__impliedStep);\n    return _this;\n  }\n\n  createClass(NumberController, [{\n    key: 'setValue',\n    value: function setValue(v) {\n      var _v = v;\n\n      if (this.__min !== undefined && _v < this.__min) {\n        _v = this.__min;\n      } else if (this.__max !== undefined && _v > this.__max) {\n        _v = this.__max;\n      }\n\n      if (this.__step !== undefined && _v % this.__step !== 0) {\n        _v = Math.round(_v / this.__step) * this.__step;\n      }\n\n      return get(NumberController.prototype.__proto__ || _Object$getPrototypeOf(NumberController.prototype), 'setValue', this).call(this, _v);\n    }\n  }, {\n    key: 'min',\n    value: function min(minValue) {\n      this.__min = minValue;\n      return this;\n    }\n  }, {\n    key: 'max',\n    value: function max(maxValue) {\n      this.__max = maxValue;\n      return this;\n    }\n  }, {\n    key: 'step',\n    value: function step(stepValue) {\n      this.__step = stepValue;\n      this.__impliedStep = stepValue;\n      this.__precision = numDecimals(stepValue);\n      return this;\n    }\n  }]);\n  return NumberController;\n}(Controller);\n\nfunction roundToDecimal(value, decimals) {\n  var tenTo = Math.pow(10, decimals);\n  return Math.round(value * tenTo) / tenTo;\n}\n\nvar NumberControllerBox = function (_NumberController) {\n  inherits(NumberControllerBox, _NumberController);\n\n  function NumberControllerBox(object, property, params) {\n    classCallCheck(this, NumberControllerBox);\n\n    var _this2 = possibleConstructorReturn(this, (NumberControllerBox.__proto__ || _Object$getPrototypeOf(NumberControllerBox)).call(this, object, property, params));\n\n    _this2.__truncationSuspended = false;\n    var _this = _this2;\n    var prevY = void 0;\n\n    function onChange() {\n      var attempted = _parseFloat(_this.__input.value);\n\n      if (!Common.isNaN(attempted)) {\n        _this.setValue(attempted);\n      }\n    }\n\n    function onFinish() {\n      if (_this.__onFinishChange) {\n        _this.__onFinishChange.call(_this, _this.getValue());\n      }\n    }\n\n    function onBlur() {\n      onFinish();\n    }\n\n    function onMouseDrag(e) {\n      var diff = prevY - e.clientY;\n\n      _this.setValue(_this.getValue() + diff * _this.__impliedStep);\n\n      prevY = e.clientY;\n    }\n\n    function onMouseUp() {\n      dom.unbind(window, 'mousemove', onMouseDrag);\n      dom.unbind(window, 'mouseup', onMouseUp);\n      onFinish();\n    }\n\n    function onMouseDown(e) {\n      dom.bind(window, 'mousemove', onMouseDrag);\n      dom.bind(window, 'mouseup', onMouseUp);\n      prevY = e.clientY;\n    }\n\n    _this2.__input = document.createElement('input');\n\n    _this2.__input.setAttribute('type', 'text');\n\n    dom.bind(_this2.__input, 'change', onChange);\n    dom.bind(_this2.__input, 'blur', onBlur);\n    dom.bind(_this2.__input, 'mousedown', onMouseDown);\n    dom.bind(_this2.__input, 'keydown', function (e) {\n      if (e.keyCode === 13) {\n        _this.__truncationSuspended = true;\n        this.blur();\n        _this.__truncationSuspended = false;\n        onFinish();\n      }\n    });\n\n    _this2.updateDisplay();\n\n    _this2.domElement.appendChild(_this2.__input);\n\n    return _this2;\n  }\n\n  createClass(NumberControllerBox, [{\n    key: 'updateDisplay',\n    value: function updateDisplay() {\n      this.__input.value = this.__truncationSuspended ? this.getValue() : roundToDecimal(this.getValue(), this.__precision);\n      return get(NumberControllerBox.prototype.__proto__ || _Object$getPrototypeOf(NumberControllerBox.prototype), 'updateDisplay', this).call(this);\n    }\n  }]);\n  return NumberControllerBox;\n}(NumberController);\n\nfunction map(v, i1, i2, o1, o2) {\n  return o1 + (o2 - o1) * ((v - i1) / (i2 - i1));\n}\n\nvar NumberControllerSlider = function (_NumberController) {\n  inherits(NumberControllerSlider, _NumberController);\n\n  function NumberControllerSlider(object, property, min, max, step) {\n    classCallCheck(this, NumberControllerSlider);\n\n    var _this2 = possibleConstructorReturn(this, (NumberControllerSlider.__proto__ || _Object$getPrototypeOf(NumberControllerSlider)).call(this, object, property, {\n      min: min,\n      max: max,\n      step: step\n    }));\n\n    var _this = _this2;\n    _this2.__background = document.createElement('div');\n    _this2.__foreground = document.createElement('div');\n    dom.bind(_this2.__background, 'mousedown', onMouseDown);\n    dom.bind(_this2.__background, 'touchstart', onTouchStart);\n    dom.addClass(_this2.__background, 'slider');\n    dom.addClass(_this2.__foreground, 'slider-fg');\n\n    function onMouseDown(e) {\n      document.activeElement.blur();\n      dom.bind(window, 'mousemove', onMouseDrag);\n      dom.bind(window, 'mouseup', onMouseUp);\n      onMouseDrag(e);\n    }\n\n    function onMouseDrag(e) {\n      e.preventDefault();\n\n      var bgRect = _this.__background.getBoundingClientRect();\n\n      _this.setValue(map(e.clientX, bgRect.left, bgRect.right, _this.__min, _this.__max));\n\n      return false;\n    }\n\n    function onMouseUp() {\n      dom.unbind(window, 'mousemove', onMouseDrag);\n      dom.unbind(window, 'mouseup', onMouseUp);\n\n      if (_this.__onFinishChange) {\n        _this.__onFinishChange.call(_this, _this.getValue());\n      }\n    }\n\n    function onTouchStart(e) {\n      if (e.touches.length !== 1) {\n        return;\n      }\n\n      dom.bind(window, 'touchmove', onTouchMove);\n      dom.bind(window, 'touchend', onTouchEnd);\n      onTouchMove(e);\n    }\n\n    function onTouchMove(e) {\n      var clientX = e.touches[0].clientX;\n\n      var bgRect = _this.__background.getBoundingClientRect();\n\n      _this.setValue(map(clientX, bgRect.left, bgRect.right, _this.__min, _this.__max));\n    }\n\n    function onTouchEnd() {\n      dom.unbind(window, 'touchmove', onTouchMove);\n      dom.unbind(window, 'touchend', onTouchEnd);\n\n      if (_this.__onFinishChange) {\n        _this.__onFinishChange.call(_this, _this.getValue());\n      }\n    }\n\n    _this2.updateDisplay();\n\n    _this2.__background.appendChild(_this2.__foreground);\n\n    _this2.domElement.appendChild(_this2.__background);\n\n    return _this2;\n  }\n\n  createClass(NumberControllerSlider, [{\n    key: 'updateDisplay',\n    value: function updateDisplay() {\n      var pct = (this.getValue() - this.__min) / (this.__max - this.__min);\n\n      this.__foreground.style.width = pct * 100 + '%';\n      return get(NumberControllerSlider.prototype.__proto__ || _Object$getPrototypeOf(NumberControllerSlider.prototype), 'updateDisplay', this).call(this);\n    }\n  }]);\n  return NumberControllerSlider;\n}(NumberController);\n\nvar FunctionController = function (_Controller) {\n  inherits(FunctionController, _Controller);\n\n  function FunctionController(object, property, text) {\n    classCallCheck(this, FunctionController);\n\n    var _this2 = possibleConstructorReturn(this, (FunctionController.__proto__ || _Object$getPrototypeOf(FunctionController)).call(this, object, property));\n\n    var _this = _this2;\n    _this2.__button = document.createElement('div');\n    _this2.__button.innerHTML = text === undefined ? 'Fire' : text;\n    dom.bind(_this2.__button, 'click', function (e) {\n      e.preventDefault();\n\n      _this.fire();\n\n      return false;\n    });\n    dom.addClass(_this2.__button, 'button');\n\n    _this2.domElement.appendChild(_this2.__button);\n\n    return _this2;\n  }\n\n  createClass(FunctionController, [{\n    key: 'fire',\n    value: function fire() {\n      if (this.__onChange) {\n        this.__onChange.call(this);\n      }\n\n      this.getValue().call(this.object);\n\n      if (this.__onFinishChange) {\n        this.__onFinishChange.call(this, this.getValue());\n      }\n    }\n  }]);\n  return FunctionController;\n}(Controller);\n\nvar ColorController = function (_Controller) {\n  inherits(ColorController, _Controller);\n\n  function ColorController(object, property) {\n    classCallCheck(this, ColorController);\n\n    var _this2 = possibleConstructorReturn(this, (ColorController.__proto__ || _Object$getPrototypeOf(ColorController)).call(this, object, property));\n\n    _this2.__color = new Color(_this2.getValue());\n    _this2.__temp = new Color(0);\n    var _this = _this2;\n    _this2.domElement = document.createElement('div');\n    dom.makeSelectable(_this2.domElement, false);\n    _this2.__selector = document.createElement('div');\n    _this2.__selector.className = 'selector';\n    _this2.__saturation_field = document.createElement('div');\n    _this2.__saturation_field.className = 'saturation-field';\n    _this2.__field_knob = document.createElement('div');\n    _this2.__field_knob.className = 'field-knob';\n    _this2.__field_knob_border = '2px solid ';\n    _this2.__hue_knob = document.createElement('div');\n    _this2.__hue_knob.className = 'hue-knob';\n    _this2.__hue_field = document.createElement('div');\n    _this2.__hue_field.className = 'hue-field';\n    _this2.__input = document.createElement('input');\n    _this2.__input.type = 'text';\n    _this2.__input_textShadow = '0 1px 1px ';\n    dom.bind(_this2.__input, 'keydown', function (e) {\n      if (e.keyCode === 13) {\n        onBlur.call(this);\n      }\n    });\n    dom.bind(_this2.__input, 'blur', onBlur);\n    dom.bind(_this2.__selector, 'mousedown', function () {\n      dom.addClass(this, 'drag').bind(window, 'mouseup', function () {\n        dom.removeClass(_this.__selector, 'drag');\n      });\n    });\n    dom.bind(_this2.__selector, 'touchstart', function () {\n      dom.addClass(this, 'drag').bind(window, 'touchend', function () {\n        dom.removeClass(_this.__selector, 'drag');\n      });\n    });\n    var valueField = document.createElement('div');\n    Common.extend(_this2.__selector.style, {\n      width: '122px',\n      height: '102px',\n      padding: '3px',\n      backgroundColor: '#222',\n      boxShadow: '0px 1px 3px rgba(0,0,0,0.3)'\n    });\n    Common.extend(_this2.__field_knob.style, {\n      position: 'absolute',\n      width: '12px',\n      height: '12px',\n      border: _this2.__field_knob_border + (_this2.__color.v < 0.5 ? '#fff' : '#000'),\n      boxShadow: '0px 1px 3px rgba(0,0,0,0.5)',\n      borderRadius: '12px',\n      zIndex: 1\n    });\n    Common.extend(_this2.__hue_knob.style, {\n      position: 'absolute',\n      width: '15px',\n      height: '2px',\n      borderRight: '4px solid #fff',\n      zIndex: 1\n    });\n    Common.extend(_this2.__saturation_field.style, {\n      width: '100px',\n      height: '100px',\n      border: '1px solid #555',\n      marginRight: '3px',\n      display: 'inline-block',\n      cursor: 'pointer'\n    });\n    Common.extend(valueField.style, {\n      width: '100%',\n      height: '100%',\n      background: 'none'\n    });\n    linearGradient(valueField, 'top', 'rgba(0,0,0,0)', '#000');\n    Common.extend(_this2.__hue_field.style, {\n      width: '15px',\n      height: '100px',\n      border: '1px solid #555',\n      cursor: 'ns-resize',\n      position: 'absolute',\n      top: '3px',\n      right: '3px'\n    });\n    hueGradient(_this2.__hue_field);\n    Common.extend(_this2.__input.style, {\n      outline: 'none',\n      textAlign: 'center',\n      color: '#fff',\n      border: 0,\n      fontWeight: 'bold',\n      textShadow: _this2.__input_textShadow + 'rgba(0,0,0,0.7)'\n    });\n    dom.bind(_this2.__saturation_field, 'mousedown', fieldDown);\n    dom.bind(_this2.__saturation_field, 'touchstart', fieldDown);\n    dom.bind(_this2.__field_knob, 'mousedown', fieldDown);\n    dom.bind(_this2.__field_knob, 'touchstart', fieldDown);\n    dom.bind(_this2.__hue_field, 'mousedown', fieldDownH);\n    dom.bind(_this2.__hue_field, 'touchstart', fieldDownH);\n\n    function fieldDown(e) {\n      setSV(e);\n      dom.bind(window, 'mousemove', setSV);\n      dom.bind(window, 'touchmove', setSV);\n      dom.bind(window, 'mouseup', fieldUpSV);\n      dom.bind(window, 'touchend', fieldUpSV);\n    }\n\n    function fieldDownH(e) {\n      setH(e);\n      dom.bind(window, 'mousemove', setH);\n      dom.bind(window, 'touchmove', setH);\n      dom.bind(window, 'mouseup', fieldUpH);\n      dom.bind(window, 'touchend', fieldUpH);\n    }\n\n    function fieldUpSV() {\n      dom.unbind(window, 'mousemove', setSV);\n      dom.unbind(window, 'touchmove', setSV);\n      dom.unbind(window, 'mouseup', fieldUpSV);\n      dom.unbind(window, 'touchend', fieldUpSV);\n      onFinish();\n    }\n\n    function fieldUpH() {\n      dom.unbind(window, 'mousemove', setH);\n      dom.unbind(window, 'touchmove', setH);\n      dom.unbind(window, 'mouseup', fieldUpH);\n      dom.unbind(window, 'touchend', fieldUpH);\n      onFinish();\n    }\n\n    function onBlur() {\n      var i = interpret(this.value);\n\n      if (i !== false) {\n        _this.__color.__state = i;\n\n        _this.setValue(_this.__color.toOriginal());\n      } else {\n        this.value = _this.__color.toString();\n      }\n    }\n\n    function onFinish() {\n      if (_this.__onFinishChange) {\n        _this.__onFinishChange.call(_this, _this.__color.toOriginal());\n      }\n    }\n\n    _this2.__saturation_field.appendChild(valueField);\n\n    _this2.__selector.appendChild(_this2.__field_knob);\n\n    _this2.__selector.appendChild(_this2.__saturation_field);\n\n    _this2.__selector.appendChild(_this2.__hue_field);\n\n    _this2.__hue_field.appendChild(_this2.__hue_knob);\n\n    _this2.domElement.appendChild(_this2.__input);\n\n    _this2.domElement.appendChild(_this2.__selector);\n\n    _this2.updateDisplay();\n\n    function setSV(e) {\n      if (e.type.indexOf('touch') === -1) {\n        e.preventDefault();\n      }\n\n      var fieldRect = _this.__saturation_field.getBoundingClientRect();\n\n      var _ref = e.touches && e.touches[0] || e,\n          clientX = _ref.clientX,\n          clientY = _ref.clientY;\n\n      var s = (clientX - fieldRect.left) / (fieldRect.right - fieldRect.left);\n      var v = 1 - (clientY - fieldRect.top) / (fieldRect.bottom - fieldRect.top);\n\n      if (v > 1) {\n        v = 1;\n      } else if (v < 0) {\n        v = 0;\n      }\n\n      if (s > 1) {\n        s = 1;\n      } else if (s < 0) {\n        s = 0;\n      }\n\n      _this.__color.v = v;\n      _this.__color.s = s;\n\n      _this.setValue(_this.__color.toOriginal());\n\n      return false;\n    }\n\n    function setH(e) {\n      if (e.type.indexOf('touch') === -1) {\n        e.preventDefault();\n      }\n\n      var fieldRect = _this.__hue_field.getBoundingClientRect();\n\n      var _ref2 = e.touches && e.touches[0] || e,\n          clientY = _ref2.clientY;\n\n      var h = 1 - (clientY - fieldRect.top) / (fieldRect.bottom - fieldRect.top);\n\n      if (h > 1) {\n        h = 1;\n      } else if (h < 0) {\n        h = 0;\n      }\n\n      _this.__color.h = h * 360;\n\n      _this.setValue(_this.__color.toOriginal());\n\n      return false;\n    }\n\n    return _this2;\n  }\n\n  createClass(ColorController, [{\n    key: 'updateDisplay',\n    value: function updateDisplay() {\n      var i = interpret(this.getValue());\n\n      if (i !== false) {\n        var mismatch = false;\n        Common.each(Color.COMPONENTS, function (component) {\n          if (!Common.isUndefined(i[component]) && !Common.isUndefined(this.__color.__state[component]) && i[component] !== this.__color.__state[component]) {\n            mismatch = true;\n            return {};\n          }\n        }, this);\n\n        if (mismatch) {\n          Common.extend(this.__color.__state, i);\n        }\n      }\n\n      Common.extend(this.__temp.__state, this.__color.__state);\n      this.__temp.a = 1;\n      var flip = this.__color.v < 0.5 || this.__color.s > 0.5 ? 255 : 0;\n\n      var _flip = 255 - flip;\n\n      Common.extend(this.__field_knob.style, {\n        marginLeft: 100 * this.__color.s - 7 + 'px',\n        marginTop: 100 * (1 - this.__color.v) - 7 + 'px',\n        backgroundColor: this.__temp.toHexString(),\n        border: this.__field_knob_border + 'rgb(' + flip + ',' + flip + ',' + flip + ')'\n      });\n      this.__hue_knob.style.marginTop = (1 - this.__color.h / 360) * 100 + 'px';\n      this.__temp.s = 1;\n      this.__temp.v = 1;\n      linearGradient(this.__saturation_field, 'left', '#fff', this.__temp.toHexString());\n      this.__input.value = this.__color.toString();\n      Common.extend(this.__input.style, {\n        backgroundColor: this.__color.toHexString(),\n        color: 'rgb(' + flip + ',' + flip + ',' + flip + ')',\n        textShadow: this.__input_textShadow + 'rgba(' + _flip + ',' + _flip + ',' + _flip + ',.7)'\n      });\n    }\n  }]);\n  return ColorController;\n}(Controller);\n\nvar vendors = ['-moz-', '-o-', '-webkit-', '-ms-', ''];\n\nfunction linearGradient(elem, x, a, b) {\n  elem.style.background = '';\n  Common.each(vendors, function (vendor) {\n    elem.style.cssText += 'background: ' + vendor + 'linear-gradient(' + x + ', ' + a + ' 0%, ' + b + ' 100%); ';\n  });\n}\n\nfunction hueGradient(elem) {\n  elem.style.background = '';\n  elem.style.cssText += 'background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);';\n  elem.style.cssText += 'background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);';\n  elem.style.cssText += 'background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);';\n  elem.style.cssText += 'background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);';\n  elem.style.cssText += 'background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);';\n}\n\nvar css = {\n  load: function load(url, indoc) {\n    var doc = indoc || document;\n    var link = doc.createElement('link');\n    link.type = 'text/css';\n    link.rel = 'stylesheet';\n    link.href = url;\n    doc.getElementsByTagName('head')[0].appendChild(link);\n  },\n  inject: function inject(cssContent, indoc) {\n    var doc = indoc || document;\n    var injected = document.createElement('style');\n    injected.type = 'text/css';\n    injected.innerHTML = cssContent;\n    var head = doc.getElementsByTagName('head')[0];\n\n    try {\n      head.appendChild(injected);\n    } catch (e) {}\n  }\n};\nvar saveDialogContents = \"<div id=\\\"dg-save\\\" class=\\\"dg dialogue\\\">\\n\\n  Here's the new load parameter for your <code>GUI</code>'s constructor:\\n\\n  <textarea id=\\\"dg-new-constructor\\\"></textarea>\\n\\n  <div id=\\\"dg-save-locally\\\">\\n\\n    <input id=\\\"dg-local-storage\\\" type=\\\"checkbox\\\"/> Automatically save\\n    values to <code>localStorage</code> on exit.\\n\\n    <div id=\\\"dg-local-explain\\\">The values saved to <code>localStorage</code> will\\n      override those passed to <code>dat.GUI</code>'s constructor. This makes it\\n      easier to work incrementally, but <code>localStorage</code> is fragile,\\n      and your friends may not see the same values you do.\\n\\n    </div>\\n\\n  </div>\\n\\n</div>\";\n\nvar ControllerFactory = function ControllerFactory(object, property) {\n  var initialValue = object[property];\n\n  if (Common.isArray(arguments[2]) || Common.isObject(arguments[2])) {\n    return new OptionController(object, property, arguments[2]);\n  }\n\n  if (Common.isNumber(initialValue)) {\n    if (Common.isNumber(arguments[2]) && Common.isNumber(arguments[3])) {\n      if (Common.isNumber(arguments[4])) {\n        return new NumberControllerSlider(object, property, arguments[2], arguments[3], arguments[4]);\n      }\n\n      return new NumberControllerSlider(object, property, arguments[2], arguments[3]);\n    }\n\n    if (Common.isNumber(arguments[4])) {\n      return new NumberControllerBox(object, property, {\n        min: arguments[2],\n        max: arguments[3],\n        step: arguments[4]\n      });\n    }\n\n    return new NumberControllerBox(object, property, {\n      min: arguments[2],\n      max: arguments[3]\n    });\n  }\n\n  if (Common.isString(initialValue)) {\n    return new StringController(object, property);\n  }\n\n  if (Common.isFunction(initialValue)) {\n    return new FunctionController(object, property, '');\n  }\n\n  if (Common.isBoolean(initialValue)) {\n    return new BooleanController(object, property);\n  }\n\n  return null;\n};\n\nfunction requestAnimationFrame(callback) {\n  setTimeout(callback, 1000 / 60);\n}\n\nvar requestAnimationFrame$1 = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || requestAnimationFrame;\n\nvar CenteredDiv = function () {\n  function CenteredDiv() {\n    classCallCheck(this, CenteredDiv);\n    this.backgroundElement = document.createElement('div');\n    Common.extend(this.backgroundElement.style, {\n      backgroundColor: 'rgba(0,0,0,0.8)',\n      top: 0,\n      left: 0,\n      display: 'none',\n      zIndex: '1000',\n      opacity: 0,\n      WebkitTransition: 'opacity 0.2s linear',\n      transition: 'opacity 0.2s linear'\n    });\n    dom.makeFullscreen(this.backgroundElement);\n    this.backgroundElement.style.position = 'fixed';\n    this.domElement = document.createElement('div');\n    Common.extend(this.domElement.style, {\n      position: 'fixed',\n      display: 'none',\n      zIndex: '1001',\n      opacity: 0,\n      WebkitTransition: '-webkit-transform 0.2s ease-out, opacity 0.2s linear',\n      transition: 'transform 0.2s ease-out, opacity 0.2s linear'\n    });\n    document.body.appendChild(this.backgroundElement);\n    document.body.appendChild(this.domElement);\n\n    var _this = this;\n\n    dom.bind(this.backgroundElement, 'click', function () {\n      _this.hide();\n    });\n  }\n\n  createClass(CenteredDiv, [{\n    key: 'show',\n    value: function show() {\n      var _this = this;\n\n      this.backgroundElement.style.display = 'block';\n      this.domElement.style.display = 'block';\n      this.domElement.style.opacity = 0;\n      this.domElement.style.webkitTransform = 'scale(1.1)';\n      this.layout();\n      Common.defer(function () {\n        _this.backgroundElement.style.opacity = 1;\n        _this.domElement.style.opacity = 1;\n        _this.domElement.style.webkitTransform = 'scale(1)';\n      });\n    }\n  }, {\n    key: 'hide',\n    value: function hide() {\n      var _this = this;\n\n      var hide = function hide() {\n        _this.domElement.style.display = 'none';\n        _this.backgroundElement.style.display = 'none';\n        dom.unbind(_this.domElement, 'webkitTransitionEnd', hide);\n        dom.unbind(_this.domElement, 'transitionend', hide);\n        dom.unbind(_this.domElement, 'oTransitionEnd', hide);\n      };\n\n      dom.bind(this.domElement, 'webkitTransitionEnd', hide);\n      dom.bind(this.domElement, 'transitionend', hide);\n      dom.bind(this.domElement, 'oTransitionEnd', hide);\n      this.backgroundElement.style.opacity = 0;\n      this.domElement.style.opacity = 0;\n      this.domElement.style.webkitTransform = 'scale(1.1)';\n    }\n  }, {\n    key: 'layout',\n    value: function layout() {\n      this.domElement.style.left = window.innerWidth / 2 - dom.getWidth(this.domElement) / 2 + 'px';\n      this.domElement.style.top = window.innerHeight / 2 - dom.getHeight(this.domElement) / 2 + 'px';\n    }\n  }]);\n  return CenteredDiv;\n}();\n\nvar styleSheet = ___$insertStyle(\".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\\n\");\n\ncss.inject(styleSheet);\nvar CSS_NAMESPACE = 'dg';\nvar HIDE_KEY_CODE = 72;\nvar CLOSE_BUTTON_HEIGHT = 20;\nvar DEFAULT_DEFAULT_PRESET_NAME = 'Default';\n\nvar SUPPORTS_LOCAL_STORAGE = function () {\n  try {\n    return !!window.localStorage;\n  } catch (e) {\n    return false;\n  }\n}();\n\nvar SAVE_DIALOGUE = void 0;\nvar autoPlaceVirgin = true;\nvar autoPlaceContainer = void 0;\nvar hide = false;\nvar hideableGuis = [];\n\nvar GUI = function GUI(pars) {\n  var _this = this;\n\n  var params = pars || {};\n  this.domElement = document.createElement('div');\n  this.__ul = document.createElement('ul');\n  this.domElement.appendChild(this.__ul);\n  dom.addClass(this.domElement, CSS_NAMESPACE);\n  this.__folders = {};\n  this.__controllers = [];\n  this.__rememberedObjects = [];\n  this.__rememberedObjectIndecesToControllers = [];\n  this.__listening = [];\n  params = Common.defaults(params, {\n    closeOnTop: false,\n    autoPlace: true,\n    width: GUI.DEFAULT_WIDTH\n  });\n  params = Common.defaults(params, {\n    resizable: params.autoPlace,\n    hideable: params.autoPlace\n  });\n\n  if (!Common.isUndefined(params.load)) {\n    if (params.preset) {\n      params.load.preset = params.preset;\n    }\n  } else {\n    params.load = {\n      preset: DEFAULT_DEFAULT_PRESET_NAME\n    };\n  }\n\n  if (Common.isUndefined(params.parent) && params.hideable) {\n    hideableGuis.push(this);\n  }\n\n  params.resizable = Common.isUndefined(params.parent) && params.resizable;\n\n  if (params.autoPlace && Common.isUndefined(params.scrollable)) {\n    params.scrollable = true;\n  }\n\n  var useLocalStorage = SUPPORTS_LOCAL_STORAGE && localStorage.getItem(getLocalStorageHash(this, 'isLocal')) === 'true';\n  var saveToLocalStorage = void 0;\n  var titleRow = void 0;\n\n  _Object$defineProperties(this, {\n    parent: {\n      get: function get$$1() {\n        return params.parent;\n      }\n    },\n    scrollable: {\n      get: function get$$1() {\n        return params.scrollable;\n      }\n    },\n    autoPlace: {\n      get: function get$$1() {\n        return params.autoPlace;\n      }\n    },\n    closeOnTop: {\n      get: function get$$1() {\n        return params.closeOnTop;\n      }\n    },\n    preset: {\n      get: function get$$1() {\n        if (_this.parent) {\n          return _this.getRoot().preset;\n        }\n\n        return params.load.preset;\n      },\n      set: function set$$1(v) {\n        if (_this.parent) {\n          _this.getRoot().preset = v;\n        } else {\n          params.load.preset = v;\n        }\n\n        setPresetSelectIndex(this);\n\n        _this.revert();\n      }\n    },\n    width: {\n      get: function get$$1() {\n        return params.width;\n      },\n      set: function set$$1(v) {\n        params.width = v;\n        setWidth(_this, v);\n      }\n    },\n    name: {\n      get: function get$$1() {\n        return params.name;\n      },\n      set: function set$$1(v) {\n        params.name = v;\n\n        if (titleRow) {\n          titleRow.innerHTML = params.name;\n        }\n      }\n    },\n    closed: {\n      get: function get$$1() {\n        return params.closed;\n      },\n      set: function set$$1(v) {\n        params.closed = v;\n\n        if (params.closed) {\n          dom.addClass(_this.__ul, GUI.CLASS_CLOSED);\n        } else {\n          dom.removeClass(_this.__ul, GUI.CLASS_CLOSED);\n        }\n\n        this.onResize();\n\n        if (_this.__closeButton) {\n          _this.__closeButton.innerHTML = v ? GUI.TEXT_OPEN : GUI.TEXT_CLOSED;\n        }\n      }\n    },\n    load: {\n      get: function get$$1() {\n        return params.load;\n      }\n    },\n    useLocalStorage: {\n      get: function get$$1() {\n        return useLocalStorage;\n      },\n      set: function set$$1(bool) {\n        if (SUPPORTS_LOCAL_STORAGE) {\n          useLocalStorage = bool;\n\n          if (bool) {\n            dom.bind(window, 'unload', saveToLocalStorage);\n          } else {\n            dom.unbind(window, 'unload', saveToLocalStorage);\n          }\n\n          localStorage.setItem(getLocalStorageHash(_this, 'isLocal'), bool);\n        }\n      }\n    }\n  });\n\n  if (Common.isUndefined(params.parent)) {\n    this.closed = params.closed || false;\n    dom.addClass(this.domElement, GUI.CLASS_MAIN);\n    dom.makeSelectable(this.domElement, false);\n\n    if (SUPPORTS_LOCAL_STORAGE) {\n      if (useLocalStorage) {\n        _this.useLocalStorage = true;\n        var savedGui = localStorage.getItem(getLocalStorageHash(this, 'gui'));\n\n        if (savedGui) {\n          params.load = JSON.parse(savedGui);\n        }\n      }\n    }\n\n    this.__closeButton = document.createElement('div');\n    this.__closeButton.innerHTML = GUI.TEXT_CLOSED;\n    dom.addClass(this.__closeButton, GUI.CLASS_CLOSE_BUTTON);\n\n    if (params.closeOnTop) {\n      dom.addClass(this.__closeButton, GUI.CLASS_CLOSE_TOP);\n      this.domElement.insertBefore(this.__closeButton, this.domElement.childNodes[0]);\n    } else {\n      dom.addClass(this.__closeButton, GUI.CLASS_CLOSE_BOTTOM);\n      this.domElement.appendChild(this.__closeButton);\n    }\n\n    dom.bind(this.__closeButton, 'click', function () {\n      _this.closed = !_this.closed;\n    });\n  } else {\n    if (params.closed === undefined) {\n      params.closed = true;\n    }\n\n    var titleRowName = document.createTextNode(params.name);\n    dom.addClass(titleRowName, 'controller-name');\n    titleRow = addRow(_this, titleRowName);\n\n    var onClickTitle = function onClickTitle(e) {\n      e.preventDefault();\n      _this.closed = !_this.closed;\n      return false;\n    };\n\n    dom.addClass(this.__ul, GUI.CLASS_CLOSED);\n    dom.addClass(titleRow, 'title');\n    dom.bind(titleRow, 'click', onClickTitle);\n\n    if (!params.closed) {\n      this.closed = false;\n    }\n  }\n\n  if (params.autoPlace) {\n    if (Common.isUndefined(params.parent)) {\n      if (autoPlaceVirgin) {\n        autoPlaceContainer = document.createElement('div');\n        dom.addClass(autoPlaceContainer, CSS_NAMESPACE);\n        dom.addClass(autoPlaceContainer, GUI.CLASS_AUTO_PLACE_CONTAINER);\n        document.body.appendChild(autoPlaceContainer);\n        autoPlaceVirgin = false;\n      }\n\n      autoPlaceContainer.appendChild(this.domElement);\n      dom.addClass(this.domElement, GUI.CLASS_AUTO_PLACE);\n    }\n\n    if (!this.parent) {\n      setWidth(_this, params.width);\n    }\n  }\n\n  this.__resizeHandler = function () {\n    _this.onResizeDebounced();\n  };\n\n  dom.bind(window, 'resize', this.__resizeHandler);\n  dom.bind(this.__ul, 'webkitTransitionEnd', this.__resizeHandler);\n  dom.bind(this.__ul, 'transitionend', this.__resizeHandler);\n  dom.bind(this.__ul, 'oTransitionEnd', this.__resizeHandler);\n  this.onResize();\n\n  if (params.resizable) {\n    addResizeHandle(this);\n  }\n\n  saveToLocalStorage = function saveToLocalStorage() {\n    if (SUPPORTS_LOCAL_STORAGE && localStorage.getItem(getLocalStorageHash(_this, 'isLocal')) === 'true') {\n      localStorage.setItem(getLocalStorageHash(_this, 'gui'), _JSON$stringify(_this.getSaveObject()));\n    }\n  };\n\n  this.saveToLocalStorageIfPossible = saveToLocalStorage;\n\n  function resetWidth() {\n    var root = _this.getRoot();\n\n    root.width += 1;\n    Common.defer(function () {\n      root.width -= 1;\n    });\n  }\n\n  if (!params.parent) {\n    resetWidth();\n  }\n};\n\nGUI.toggleHide = function () {\n  hide = !hide;\n  Common.each(hideableGuis, function (gui) {\n    gui.domElement.style.display = hide ? 'none' : '';\n  });\n};\n\nGUI.CLASS_AUTO_PLACE = 'a';\nGUI.CLASS_AUTO_PLACE_CONTAINER = 'ac';\nGUI.CLASS_MAIN = 'main';\nGUI.CLASS_CONTROLLER_ROW = 'cr';\nGUI.CLASS_TOO_TALL = 'taller-than-window';\nGUI.CLASS_CLOSED = 'closed';\nGUI.CLASS_CLOSE_BUTTON = 'close-button';\nGUI.CLASS_CLOSE_TOP = 'close-top';\nGUI.CLASS_CLOSE_BOTTOM = 'close-bottom';\nGUI.CLASS_DRAG = 'drag';\nGUI.DEFAULT_WIDTH = 245;\nGUI.TEXT_CLOSED = 'Close Controls';\nGUI.TEXT_OPEN = 'Open Controls';\n\nGUI._keydownHandler = function (e) {\n  if (document.activeElement.type !== 'text' && (e.which === HIDE_KEY_CODE || e.keyCode === HIDE_KEY_CODE)) {\n    GUI.toggleHide();\n  }\n};\n\ndom.bind(window, 'keydown', GUI._keydownHandler, false);\nCommon.extend(GUI.prototype, {\n  add: function add(object, property) {\n    return _add(this, object, property, {\n      factoryArgs: Array.prototype.slice.call(arguments, 2)\n    });\n  },\n  addColor: function addColor(object, property) {\n    return _add(this, object, property, {\n      color: true\n    });\n  },\n  remove: function remove(controller) {\n    this.__ul.removeChild(controller.__li);\n\n    this.__controllers.splice(this.__controllers.indexOf(controller), 1);\n\n    var _this = this;\n\n    Common.defer(function () {\n      _this.onResize();\n    });\n  },\n  destroy: function destroy() {\n    if (this.parent) {\n      throw new Error('Only the root GUI should be removed with .destroy(). ' + 'For subfolders, use gui.removeFolder(folder) instead.');\n    }\n\n    if (this.autoPlace) {\n      autoPlaceContainer.removeChild(this.domElement);\n    }\n\n    var _this = this;\n\n    Common.each(this.__folders, function (subfolder) {\n      _this.removeFolder(subfolder);\n    });\n    dom.unbind(window, 'keydown', GUI._keydownHandler, false);\n    removeListeners(this);\n  },\n  addFolder: function addFolder(name) {\n    if (this.__folders[name] !== undefined) {\n      throw new Error('You already have a folder in this GUI by the' + ' name \"' + name + '\"');\n    }\n\n    var newGuiParams = {\n      name: name,\n      parent: this\n    };\n    newGuiParams.autoPlace = this.autoPlace;\n\n    if (this.load && this.load.folders && this.load.folders[name]) {\n      newGuiParams.closed = this.load.folders[name].closed;\n      newGuiParams.load = this.load.folders[name];\n    }\n\n    var gui = new GUI(newGuiParams);\n    this.__folders[name] = gui;\n    var li = addRow(this, gui.domElement);\n    dom.addClass(li, 'folder');\n    return gui;\n  },\n  removeFolder: function removeFolder(folder) {\n    this.__ul.removeChild(folder.domElement.parentElement);\n\n    delete this.__folders[folder.name];\n\n    if (this.load && this.load.folders && this.load.folders[folder.name]) {\n      delete this.load.folders[folder.name];\n    }\n\n    removeListeners(folder);\n\n    var _this = this;\n\n    Common.each(folder.__folders, function (subfolder) {\n      folder.removeFolder(subfolder);\n    });\n    Common.defer(function () {\n      _this.onResize();\n    });\n  },\n  open: function open() {\n    this.closed = false;\n  },\n  close: function close() {\n    this.closed = true;\n  },\n  hide: function hide() {\n    this.domElement.style.display = 'none';\n  },\n  show: function show() {\n    this.domElement.style.display = '';\n  },\n  onResize: function onResize() {\n    var root = this.getRoot();\n\n    if (root.scrollable) {\n      var top = dom.getOffset(root.__ul).top;\n      var h = 0;\n      Common.each(root.__ul.childNodes, function (node) {\n        if (!(root.autoPlace && node === root.__save_row)) {\n          h += dom.getHeight(node);\n        }\n      });\n\n      if (window.innerHeight - top - CLOSE_BUTTON_HEIGHT < h) {\n        dom.addClass(root.domElement, GUI.CLASS_TOO_TALL);\n        root.__ul.style.height = window.innerHeight - top - CLOSE_BUTTON_HEIGHT + 'px';\n      } else {\n        dom.removeClass(root.domElement, GUI.CLASS_TOO_TALL);\n        root.__ul.style.height = 'auto';\n      }\n    }\n\n    if (root.__resize_handle) {\n      Common.defer(function () {\n        root.__resize_handle.style.height = root.__ul.offsetHeight + 'px';\n      });\n    }\n\n    if (root.__closeButton) {\n      root.__closeButton.style.width = root.width + 'px';\n    }\n  },\n  onResizeDebounced: Common.debounce(function () {\n    this.onResize();\n  }, 50),\n  remember: function remember() {\n    if (Common.isUndefined(SAVE_DIALOGUE)) {\n      SAVE_DIALOGUE = new CenteredDiv();\n      SAVE_DIALOGUE.domElement.innerHTML = saveDialogContents;\n    }\n\n    if (this.parent) {\n      throw new Error('You can only call remember on a top level GUI.');\n    }\n\n    var _this = this;\n\n    Common.each(Array.prototype.slice.call(arguments), function (object) {\n      if (_this.__rememberedObjects.length === 0) {\n        addSaveMenu(_this);\n      }\n\n      if (_this.__rememberedObjects.indexOf(object) === -1) {\n        _this.__rememberedObjects.push(object);\n      }\n    });\n\n    if (this.autoPlace) {\n      setWidth(this, this.width);\n    }\n  },\n  getRoot: function getRoot() {\n    var gui = this;\n\n    while (gui.parent) {\n      gui = gui.parent;\n    }\n\n    return gui;\n  },\n  getSaveObject: function getSaveObject() {\n    var toReturn = this.load;\n    toReturn.closed = this.closed;\n\n    if (this.__rememberedObjects.length > 0) {\n      toReturn.preset = this.preset;\n\n      if (!toReturn.remembered) {\n        toReturn.remembered = {};\n      }\n\n      toReturn.remembered[this.preset] = getCurrentPreset(this);\n    }\n\n    toReturn.folders = {};\n    Common.each(this.__folders, function (element, key) {\n      toReturn.folders[key] = element.getSaveObject();\n    });\n    return toReturn;\n  },\n  save: function save() {\n    if (!this.load.remembered) {\n      this.load.remembered = {};\n    }\n\n    this.load.remembered[this.preset] = getCurrentPreset(this);\n    markPresetModified(this, false);\n    this.saveToLocalStorageIfPossible();\n  },\n  saveAs: function saveAs(presetName) {\n    if (!this.load.remembered) {\n      this.load.remembered = {};\n      this.load.remembered[DEFAULT_DEFAULT_PRESET_NAME] = getCurrentPreset(this, true);\n    }\n\n    this.load.remembered[presetName] = getCurrentPreset(this);\n    this.preset = presetName;\n    addPresetOption(this, presetName, true);\n    this.saveToLocalStorageIfPossible();\n  },\n  revert: function revert(gui) {\n    Common.each(this.__controllers, function (controller) {\n      if (!this.getRoot().load.remembered) {\n        controller.setValue(controller.initialValue);\n      } else {\n        recallSavedValue(gui || this.getRoot(), controller);\n      }\n\n      if (controller.__onFinishChange) {\n        controller.__onFinishChange.call(controller, controller.getValue());\n      }\n    }, this);\n    Common.each(this.__folders, function (folder) {\n      folder.revert(folder);\n    });\n\n    if (!gui) {\n      markPresetModified(this.getRoot(), false);\n    }\n  },\n  listen: function listen(controller) {\n    var init = this.__listening.length === 0;\n\n    this.__listening.push(controller);\n\n    if (init) {\n      updateDisplays(this.__listening);\n    }\n  },\n  updateDisplay: function updateDisplay() {\n    Common.each(this.__controllers, function (controller) {\n      controller.updateDisplay();\n    });\n    Common.each(this.__folders, function (folder) {\n      folder.updateDisplay();\n    });\n  }\n});\n\nfunction addRow(gui, newDom, liBefore) {\n  var li = document.createElement('li');\n\n  if (newDom) {\n    li.appendChild(newDom);\n  }\n\n  if (liBefore) {\n    gui.__ul.insertBefore(li, liBefore);\n  } else {\n    gui.__ul.appendChild(li);\n  }\n\n  gui.onResize();\n  return li;\n}\n\nfunction removeListeners(gui) {\n  dom.unbind(window, 'resize', gui.__resizeHandler);\n\n  if (gui.saveToLocalStorageIfPossible) {\n    dom.unbind(window, 'unload', gui.saveToLocalStorageIfPossible);\n  }\n}\n\nfunction markPresetModified(gui, modified) {\n  var opt = gui.__preset_select[gui.__preset_select.selectedIndex];\n\n  if (modified) {\n    opt.innerHTML = opt.value + '*';\n  } else {\n    opt.innerHTML = opt.value;\n  }\n}\n\nfunction augmentController(gui, li, controller) {\n  controller.__li = li;\n  controller.__gui = gui;\n  Common.extend(controller, {\n    options: function options(_options) {\n      if (arguments.length > 1) {\n        var nextSibling = controller.__li.nextElementSibling;\n        controller.remove();\n        return _add(gui, controller.object, controller.property, {\n          before: nextSibling,\n          factoryArgs: [Common.toArray(arguments)]\n        });\n      }\n\n      if (Common.isArray(_options) || Common.isObject(_options)) {\n        var _nextSibling = controller.__li.nextElementSibling;\n        controller.remove();\n        return _add(gui, controller.object, controller.property, {\n          before: _nextSibling,\n          factoryArgs: [_options]\n        });\n      }\n    },\n    name: function name(_name) {\n      controller.__li.firstElementChild.firstElementChild.innerHTML = _name;\n      return controller;\n    },\n    listen: function listen() {\n      controller.__gui.listen(controller);\n\n      return controller;\n    },\n    remove: function remove() {\n      controller.__gui.remove(controller);\n\n      return controller;\n    }\n  });\n\n  if (controller instanceof NumberControllerSlider) {\n    var box = new NumberControllerBox(controller.object, controller.property, {\n      min: controller.__min,\n      max: controller.__max,\n      step: controller.__step\n    });\n    Common.each(['updateDisplay', 'onChange', 'onFinishChange', 'step', 'min', 'max'], function (method) {\n      var pc = controller[method];\n      var pb = box[method];\n\n      controller[method] = box[method] = function () {\n        var args = Array.prototype.slice.call(arguments);\n        pb.apply(box, args);\n        return pc.apply(controller, args);\n      };\n    });\n    dom.addClass(li, 'has-slider');\n    controller.domElement.insertBefore(box.domElement, controller.domElement.firstElementChild);\n  } else if (controller instanceof NumberControllerBox) {\n    var r = function r(returned) {\n      if (Common.isNumber(controller.__min) && Common.isNumber(controller.__max)) {\n        var oldName = controller.__li.firstElementChild.firstElementChild.innerHTML;\n        var wasListening = controller.__gui.__listening.indexOf(controller) > -1;\n        controller.remove();\n\n        var newController = _add(gui, controller.object, controller.property, {\n          before: controller.__li.nextElementSibling,\n          factoryArgs: [controller.__min, controller.__max, controller.__step]\n        });\n\n        newController.name(oldName);\n        if (wasListening) newController.listen();\n        return newController;\n      }\n\n      return returned;\n    };\n\n    controller.min = Common.compose(r, controller.min);\n    controller.max = Common.compose(r, controller.max);\n  } else if (controller instanceof BooleanController) {\n    dom.bind(li, 'click', function () {\n      dom.fakeEvent(controller.__checkbox, 'click');\n    });\n    dom.bind(controller.__checkbox, 'click', function (e) {\n      e.stopPropagation();\n    });\n  } else if (controller instanceof FunctionController) {\n    dom.bind(li, 'click', function () {\n      dom.fakeEvent(controller.__button, 'click');\n    });\n    dom.bind(li, 'mouseover', function () {\n      dom.addClass(controller.__button, 'hover');\n    });\n    dom.bind(li, 'mouseout', function () {\n      dom.removeClass(controller.__button, 'hover');\n    });\n  } else if (controller instanceof ColorController) {\n    dom.addClass(li, 'color');\n    controller.updateDisplay = Common.compose(function (val) {\n      li.style.borderLeftColor = controller.__color.toString();\n      return val;\n    }, controller.updateDisplay);\n    controller.updateDisplay();\n  }\n\n  controller.setValue = Common.compose(function (val) {\n    if (gui.getRoot().__preset_select && controller.isModified()) {\n      markPresetModified(gui.getRoot(), true);\n    }\n\n    return val;\n  }, controller.setValue);\n}\n\nfunction recallSavedValue(gui, controller) {\n  var root = gui.getRoot();\n\n  var matchedIndex = root.__rememberedObjects.indexOf(controller.object);\n\n  if (matchedIndex !== -1) {\n    var controllerMap = root.__rememberedObjectIndecesToControllers[matchedIndex];\n\n    if (controllerMap === undefined) {\n      controllerMap = {};\n      root.__rememberedObjectIndecesToControllers[matchedIndex] = controllerMap;\n    }\n\n    controllerMap[controller.property] = controller;\n\n    if (root.load && root.load.remembered) {\n      var presetMap = root.load.remembered;\n      var preset = void 0;\n\n      if (presetMap[gui.preset]) {\n        preset = presetMap[gui.preset];\n      } else if (presetMap[DEFAULT_DEFAULT_PRESET_NAME]) {\n        preset = presetMap[DEFAULT_DEFAULT_PRESET_NAME];\n      } else {\n        return;\n      }\n\n      if (preset[matchedIndex] && preset[matchedIndex][controller.property] !== undefined) {\n        var value = preset[matchedIndex][controller.property];\n        controller.initialValue = value;\n        controller.setValue(value);\n      }\n    }\n  }\n}\n\nfunction _add(gui, object, property, params) {\n  if (object[property] === undefined) {\n    throw new Error('Object \"' + object + '\" has no property \"' + property + '\"');\n  }\n\n  var controller = void 0;\n\n  if (params.color) {\n    controller = new ColorController(object, property);\n  } else {\n    var factoryArgs = [object, property].concat(params.factoryArgs);\n    controller = ControllerFactory.apply(gui, factoryArgs);\n  }\n\n  if (params.before instanceof Controller) {\n    params.before = params.before.__li;\n  }\n\n  recallSavedValue(gui, controller);\n  dom.addClass(controller.domElement, 'c');\n  var name = document.createElement('span');\n  dom.addClass(name, 'property-name');\n  name.innerHTML = controller.property;\n  var container = document.createElement('div');\n  container.appendChild(name);\n  container.appendChild(controller.domElement);\n  var li = addRow(gui, container, params.before);\n  dom.addClass(li, GUI.CLASS_CONTROLLER_ROW);\n\n  if (controller instanceof ColorController) {\n    dom.addClass(li, 'color');\n  } else {\n    dom.addClass(li, _typeof(controller.getValue()));\n  }\n\n  augmentController(gui, li, controller);\n\n  gui.__controllers.push(controller);\n\n  return controller;\n}\n\nfunction getLocalStorageHash(gui, key) {\n  return document.location.href + '.' + key;\n}\n\nfunction addPresetOption(gui, name, setSelected) {\n  var opt = document.createElement('option');\n  opt.innerHTML = name;\n  opt.value = name;\n\n  gui.__preset_select.appendChild(opt);\n\n  if (setSelected) {\n    gui.__preset_select.selectedIndex = gui.__preset_select.length - 1;\n  }\n}\n\nfunction showHideExplain(gui, explain) {\n  explain.style.display = gui.useLocalStorage ? 'block' : 'none';\n}\n\nfunction addSaveMenu(gui) {\n  var div = gui.__save_row = document.createElement('li');\n  dom.addClass(gui.domElement, 'has-save');\n\n  gui.__ul.insertBefore(div, gui.__ul.firstChild);\n\n  dom.addClass(div, 'save-row');\n  var gears = document.createElement('span');\n  gears.innerHTML = '&nbsp;';\n  dom.addClass(gears, 'button gears');\n  var button = document.createElement('span');\n  button.innerHTML = 'Save';\n  dom.addClass(button, 'button');\n  dom.addClass(button, 'save');\n  var button2 = document.createElement('span');\n  button2.innerHTML = 'New';\n  dom.addClass(button2, 'button');\n  dom.addClass(button2, 'save-as');\n  var button3 = document.createElement('span');\n  button3.innerHTML = 'Revert';\n  dom.addClass(button3, 'button');\n  dom.addClass(button3, 'revert');\n  var select = gui.__preset_select = document.createElement('select');\n\n  if (gui.load && gui.load.remembered) {\n    Common.each(gui.load.remembered, function (value, key) {\n      addPresetOption(gui, key, key === gui.preset);\n    });\n  } else {\n    addPresetOption(gui, DEFAULT_DEFAULT_PRESET_NAME, false);\n  }\n\n  dom.bind(select, 'change', function () {\n    for (var index = 0; index < gui.__preset_select.length; index++) {\n      gui.__preset_select[index].innerHTML = gui.__preset_select[index].value;\n    }\n\n    gui.preset = this.value;\n  });\n  div.appendChild(select);\n  div.appendChild(gears);\n  div.appendChild(button);\n  div.appendChild(button2);\n  div.appendChild(button3);\n\n  if (SUPPORTS_LOCAL_STORAGE) {\n    var explain = document.getElementById('dg-local-explain');\n    var localStorageCheckBox = document.getElementById('dg-local-storage');\n    var saveLocally = document.getElementById('dg-save-locally');\n    saveLocally.style.display = 'block';\n\n    if (localStorage.getItem(getLocalStorageHash(gui, 'isLocal')) === 'true') {\n      localStorageCheckBox.setAttribute('checked', 'checked');\n    }\n\n    showHideExplain(gui, explain);\n    dom.bind(localStorageCheckBox, 'change', function () {\n      gui.useLocalStorage = !gui.useLocalStorage;\n      showHideExplain(gui, explain);\n    });\n  }\n\n  var newConstructorTextArea = document.getElementById('dg-new-constructor');\n  dom.bind(newConstructorTextArea, 'keydown', function (e) {\n    if (e.metaKey && (e.which === 67 || e.keyCode === 67)) {\n      SAVE_DIALOGUE.hide();\n    }\n  });\n  dom.bind(gears, 'click', function () {\n    newConstructorTextArea.innerHTML = _JSON$stringify(gui.getSaveObject(), undefined, 2);\n    SAVE_DIALOGUE.show();\n    newConstructorTextArea.focus();\n    newConstructorTextArea.select();\n  });\n  dom.bind(button, 'click', function () {\n    gui.save();\n  });\n  dom.bind(button2, 'click', function () {\n    var presetName = prompt('Enter a new preset name.');\n\n    if (presetName) {\n      gui.saveAs(presetName);\n    }\n  });\n  dom.bind(button3, 'click', function () {\n    gui.revert();\n  });\n}\n\nfunction addResizeHandle(gui) {\n  var pmouseX = void 0;\n  gui.__resize_handle = document.createElement('div');\n  Common.extend(gui.__resize_handle.style, {\n    width: '6px',\n    marginLeft: '-3px',\n    height: '200px',\n    cursor: 'ew-resize',\n    position: 'absolute'\n  });\n\n  function drag(e) {\n    e.preventDefault();\n    gui.width += pmouseX - e.clientX;\n    gui.onResize();\n    pmouseX = e.clientX;\n    return false;\n  }\n\n  function dragStop() {\n    dom.removeClass(gui.__closeButton, GUI.CLASS_DRAG);\n    dom.unbind(window, 'mousemove', drag);\n    dom.unbind(window, 'mouseup', dragStop);\n  }\n\n  function dragStart(e) {\n    e.preventDefault();\n    pmouseX = e.clientX;\n    dom.addClass(gui.__closeButton, GUI.CLASS_DRAG);\n    dom.bind(window, 'mousemove', drag);\n    dom.bind(window, 'mouseup', dragStop);\n    return false;\n  }\n\n  dom.bind(gui.__resize_handle, 'mousedown', dragStart);\n  dom.bind(gui.__closeButton, 'mousedown', dragStart);\n  gui.domElement.insertBefore(gui.__resize_handle, gui.domElement.firstElementChild);\n}\n\nfunction setWidth(gui, w) {\n  gui.domElement.style.width = w + 'px';\n\n  if (gui.__save_row && gui.autoPlace) {\n    gui.__save_row.style.width = w + 'px';\n  }\n\n  if (gui.__closeButton) {\n    gui.__closeButton.style.width = w + 'px';\n  }\n}\n\nfunction getCurrentPreset(gui, useInitialValues) {\n  var toReturn = {};\n  Common.each(gui.__rememberedObjects, function (val, index) {\n    var savedValues = {};\n    var controllerMap = gui.__rememberedObjectIndecesToControllers[index];\n    Common.each(controllerMap, function (controller, property) {\n      savedValues[property] = useInitialValues ? controller.initialValue : controller.getValue();\n    });\n    toReturn[index] = savedValues;\n  });\n  return toReturn;\n}\n\nfunction setPresetSelectIndex(gui) {\n  for (var index = 0; index < gui.__preset_select.length; index++) {\n    if (gui.__preset_select[index].value === gui.preset) {\n      gui.__preset_select.selectedIndex = index;\n    }\n  }\n}\n\nfunction updateDisplays(controllerArray) {\n  if (controllerArray.length !== 0) {\n    requestAnimationFrame$1.call(window, function () {\n      updateDisplays(controllerArray);\n    });\n  }\n\n  Common.each(controllerArray, function (c) {\n    c.updateDisplay();\n  });\n}\n\nvar color = {\n  Color: Color,\n  math: ColorMath,\n  interpret: interpret\n};\nvar controllers = {\n  Controller: Controller,\n  BooleanController: BooleanController,\n  OptionController: OptionController,\n  StringController: StringController,\n  NumberController: NumberController,\n  NumberControllerBox: NumberControllerBox,\n  NumberControllerSlider: NumberControllerSlider,\n  FunctionController: FunctionController,\n  ColorController: ColorController\n};\nvar dom$1 = {\n  dom: dom\n};\nvar gui = {\n  GUI: GUI\n};\nvar GUI$1 = GUI;\nvar index = {\n  color: color,\n  controllers: controllers,\n  dom: dom$1,\n  gui: gui,\n  GUI: GUI$1\n};\nexport { color, controllers, dom$1 as dom, gui, GUI$1 as GUI };\nexport default index;","map":{"version":3,"sources":["/Users/pflaxalt/Repositories/_pfl/web/sketches/three/jsm/libs/dat.gui.module.js"],"names":["___$insertStyle","css","style","document","createElement","setAttribute","innerHTML","head","appendChild","colorToString","color","forceCSSHex","colorFormat","__state","conversionName","toString","r","Math","round","g","b","a","h","s","toFixed","v","str","hex","length","ARR_EACH","Array","prototype","forEach","ARR_SLICE","slice","Common","BREAK","extend","target","each","call","arguments","obj","keys","isObject","key","isUndefined","bind","defaults","compose","toCall","args","i","apply","itr","scope","l","_key","defer","fnc","setTimeout","debounce","func","threshold","callImmediately","timeout","delayed","callNow","clearTimeout","toArray","undefined","isNull","isNaN","_isNaN","isArray","constructor","Object","isNumber","isString","isBoolean","isFunction","INTERPRETATIONS","litmus","conversions","THREE_CHAR_HEX","read","original","test","match","space","write","SIX_CHAR_HEX","CSS_RGB","CSS_RGBA","HEX","RGB_ARRAY","RGBA_ARRAY","RGBA_OBJ","RGB_OBJ","HSVA_OBJ","HSV_OBJ","result","toReturn","interpret","family","conversion","tmpComponent","ColorMath","hsv_to_rgb","hi","floor","f","p","q","t","c","rgb_to_hsv","min","max","delta","NaN","rgb_to_hex","hex_with_component","component_from_hex","componentIndex","value","_typeof","classCallCheck","instance","Constructor","TypeError","createClass","defineProperties","props","descriptor","enumerable","configurable","writable","protoProps","staticProps","get","object","property","receiver","Function","desc","parent","getter","inherits","subClass","superClass","__proto__","possibleConstructorReturn","self","ReferenceError","Color","Error","toHexString","toOriginal","defineRGBComponent","component","componentHexIndex","get$$1","recalculateRGB","set","set$$1","defineHSVComponent","recalculateHSV","COMPONENTS","Controller","initialValue","domElement","__onChange","__onFinishChange","onChange","onFinishChange","setValue","newValue","updateDisplay","getValue","isModified","EVENT_MAP","HTMLEvents","MouseEvents","KeyboardEvents","EVENT_MAP_INV","k","e","CSS_VALUE_PIXELS","cssValueToPixels","val","dom","makeSelectable","elem","selectable","onselectstart","MozUserSelect","KhtmlUserSelect","unselectable","makeFullscreen","hor","vert","vertical","horizontal","position","left","right","top","bottom","fakeEvent","eventType","pars","aux","params","className","evt","createEvent","clientX","x","clientY","y","initMouseEvent","bubbles","cancelable","window","clickCount","init","initKeyboardEvent","initKeyEvent","ctrlKey","altKey","shiftKey","metaKey","keyCode","charCode","initEvent","dispatchEvent","event","newBool","bool","addEventListener","attachEvent","unbind","removeEventListener","detachEvent","addClass","classes","split","indexOf","push","join","replace","removeClass","removeAttribute","index","splice","hasClass","RegExp","getWidth","getComputedStyle","width","getHeight","height","getOffset","el","offset","offsetParent","offsetLeft","offsetTop","isActive","activeElement","type","href","BooleanController","_Controller","_this2","_this","__prev","__checkbox","checked","OptionController","opts","options","__select","map","element","opt","desiredValue","selectedIndex","StringController","__input","onBlur","blur","numDecimals","_x","NumberController","_params","__min","__max","__step","step","__impliedStep","pow","log","abs","LN10","__precision","_v","minValue","maxValue","stepValue","roundToDecimal","decimals","tenTo","NumberControllerBox","_NumberController","__truncationSuspended","prevY","attempted","onFinish","onMouseDrag","diff","onMouseUp","onMouseDown","i1","i2","o1","o2","NumberControllerSlider","__background","__foreground","onTouchStart","preventDefault","bgRect","getBoundingClientRect","touches","onTouchMove","onTouchEnd","pct","FunctionController","text","__button","fire","ColorController","__color","__temp","__selector","__saturation_field","__field_knob","__field_knob_border","__hue_knob","__hue_field","__input_textShadow","valueField","padding","backgroundColor","boxShadow","border","borderRadius","zIndex","borderRight","marginRight","display","cursor","background","linearGradient","hueGradient","outline","textAlign","fontWeight","textShadow","fieldDown","fieldDownH","setSV","fieldUpSV","setH","fieldUpH","fieldRect","_ref","_ref2","mismatch","flip","_flip","marginLeft","marginTop","vendors","vendor","cssText","load","url","indoc","doc","link","rel","getElementsByTagName","inject","cssContent","injected","saveDialogContents","ControllerFactory","requestAnimationFrame","callback","requestAnimationFrame$1","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","CenteredDiv","backgroundElement","opacity","WebkitTransition","transition","body","hide","show","webkitTransform","layout","innerWidth","innerHeight","styleSheet","CSS_NAMESPACE","HIDE_KEY_CODE","CLOSE_BUTTON_HEIGHT","DEFAULT_DEFAULT_PRESET_NAME","SUPPORTS_LOCAL_STORAGE","localStorage","SAVE_DIALOGUE","autoPlaceVirgin","autoPlaceContainer","hideableGuis","GUI","__ul","__folders","__controllers","__rememberedObjects","__rememberedObjectIndecesToControllers","__listening","closeOnTop","autoPlace","DEFAULT_WIDTH","resizable","hideable","preset","scrollable","useLocalStorage","getItem","getLocalStorageHash","saveToLocalStorage","titleRow","getRoot","setPresetSelectIndex","revert","setWidth","name","closed","CLASS_CLOSED","onResize","__closeButton","TEXT_OPEN","TEXT_CLOSED","setItem","CLASS_MAIN","savedGui","JSON","parse","CLASS_CLOSE_BUTTON","CLASS_CLOSE_TOP","insertBefore","childNodes","CLASS_CLOSE_BOTTOM","titleRowName","createTextNode","addRow","onClickTitle","CLASS_AUTO_PLACE_CONTAINER","CLASS_AUTO_PLACE","__resizeHandler","onResizeDebounced","addResizeHandle","getSaveObject","saveToLocalStorageIfPossible","resetWidth","root","toggleHide","gui","CLASS_CONTROLLER_ROW","CLASS_TOO_TALL","CLASS_DRAG","_keydownHandler","which","add","_add","factoryArgs","addColor","remove","controller","removeChild","__li","destroy","subfolder","removeFolder","removeListeners","addFolder","newGuiParams","folders","li","folder","parentElement","open","close","node","__save_row","__resize_handle","offsetHeight","remember","addSaveMenu","remembered","getCurrentPreset","save","markPresetModified","saveAs","presetName","addPresetOption","recallSavedValue","listen","updateDisplays","newDom","liBefore","modified","__preset_select","augmentController","__gui","_options","nextSibling","nextElementSibling","before","_nextSibling","_name","firstElementChild","box","method","pc","pb","returned","oldName","wasListening","newController","stopPropagation","borderLeftColor","matchedIndex","controllerMap","presetMap","concat","container","location","setSelected","showHideExplain","explain","div","firstChild","gears","button","button2","button3","select","getElementById","localStorageCheckBox","saveLocally","newConstructorTextArea","focus","prompt","pmouseX","drag","dragStop","dragStart","w","useInitialValues","savedValues","controllerArray","math","controllers","dom$1","GUI$1"],"mappings":"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","sourcesContent":["/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nfunction ___$insertStyle( css ) {\n\n\tif ( ! css ) {\n\n\t\treturn;\n\n\t}\n\tif ( typeof window === 'undefined' ) {\n\n\t\treturn;\n\n\t}\n\n\tvar style = document.createElement( 'style' );\n\n\tstyle.setAttribute( 'type', 'text/css' );\n\tstyle.innerHTML = css;\n\tdocument.head.appendChild( style );\n\n\treturn css;\n\n}\n\nfunction colorToString( color, forceCSSHex ) {\n\n\tvar colorFormat = color.__state.conversionName.toString();\n\tvar r = Math.round( color.r );\n\tvar g = Math.round( color.g );\n\tvar b = Math.round( color.b );\n\tvar a = color.a;\n\tvar h = Math.round( color.h );\n\tvar s = color.s.toFixed( 1 );\n\tvar v = color.v.toFixed( 1 );\n\tif ( forceCSSHex || colorFormat === 'THREE_CHAR_HEX' || colorFormat === 'SIX_CHAR_HEX' ) {\n\n\t\tvar str = color.hex.toString( 16 );\n\t\twhile ( str.length < 6 ) {\n\n\t\t\tstr = '0' + str;\n\n\t\t}\n\t\treturn '#' + str;\n\n\t} else if ( colorFormat === 'CSS_RGB' ) {\n\n\t\treturn 'rgb(' + r + ',' + g + ',' + b + ')';\n\n\t} else if ( colorFormat === 'CSS_RGBA' ) {\n\n\t\treturn 'rgba(' + r + ',' + g + ',' + b + ',' + a + ')';\n\n\t} else if ( colorFormat === 'HEX' ) {\n\n\t\treturn '0x' + color.hex.toString( 16 );\n\n\t} else if ( colorFormat === 'RGB_ARRAY' ) {\n\n\t\treturn '[' + r + ',' + g + ',' + b + ']';\n\n\t} else if ( colorFormat === 'RGBA_ARRAY' ) {\n\n\t\treturn '[' + r + ',' + g + ',' + b + ',' + a + ']';\n\n\t} else if ( colorFormat === 'RGB_OBJ' ) {\n\n\t\treturn '{r:' + r + ',g:' + g + ',b:' + b + '}';\n\n\t} else if ( colorFormat === 'RGBA_OBJ' ) {\n\n\t\treturn '{r:' + r + ',g:' + g + ',b:' + b + ',a:' + a + '}';\n\n\t} else if ( colorFormat === 'HSV_OBJ' ) {\n\n\t\treturn '{h:' + h + ',s:' + s + ',v:' + v + '}';\n\n\t} else if ( colorFormat === 'HSVA_OBJ' ) {\n\n\t\treturn '{h:' + h + ',s:' + s + ',v:' + v + ',a:' + a + '}';\n\n\t}\n\treturn 'unknown format';\n\n}\n\nvar ARR_EACH = Array.prototype.forEach;\nvar ARR_SLICE = Array.prototype.slice;\nvar Common = {\n\tBREAK: {},\n\textend: function extend( target ) {\n\n\t\tthis.each( ARR_SLICE.call( arguments, 1 ), function ( obj ) {\n\n\t\t\tvar keys = this.isObject( obj ) ? Object.keys( obj ) : [];\n\t\t\tkeys.forEach( function ( key ) {\n\n\t\t\t\tif ( ! this.isUndefined( obj[ key ] ) ) {\n\n\t\t\t\t\ttarget[ key ] = obj[ key ];\n\n\t\t\t\t}\n\n\t\t\t}.bind( this ) );\n\n\t\t}, this );\n\t\treturn target;\n\n\t},\n\tdefaults: function defaults( target ) {\n\n\t\tthis.each( ARR_SLICE.call( arguments, 1 ), function ( obj ) {\n\n\t\t\tvar keys = this.isObject( obj ) ? Object.keys( obj ) : [];\n\t\t\tkeys.forEach( function ( key ) {\n\n\t\t\t\tif ( this.isUndefined( target[ key ] ) ) {\n\n\t\t\t\t\ttarget[ key ] = obj[ key ];\n\n\t\t\t\t}\n\n\t\t\t}.bind( this ) );\n\n\t\t}, this );\n\t\treturn target;\n\n\t},\n\tcompose: function compose() {\n\n\t\tvar toCall = ARR_SLICE.call( arguments );\n\t\treturn function () {\n\n\t\t\tvar args = ARR_SLICE.call( arguments );\n\t\t\tfor ( var i = toCall.length - 1; i >= 0; i -- ) {\n\n\t\t\t\targs = [ toCall[ i ].apply( this, args ) ];\n\n\t\t\t}\n\t\t\treturn args[ 0 ];\n\n\t\t};\n\n\t},\n\teach: function each( obj, itr, scope ) {\n\n\t\tif ( ! obj ) {\n\n\t\t\treturn;\n\n\t\t}\n\t\tif ( ARR_EACH && obj.forEach && obj.forEach === ARR_EACH ) {\n\n\t\t\tobj.forEach( itr, scope );\n\n\t\t} else if ( obj.length === obj.length + 0 ) {\n\n\t\t\tvar key = void 0;\n\t\t\tvar l = void 0;\n\t\t\tfor ( key = 0, l = obj.length; key < l; key ++ ) {\n\n\t\t\t\tif ( key in obj && itr.call( scope, obj[ key ], key ) === this.BREAK ) {\n\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tfor ( var _key in obj ) {\n\n\t\t\t\tif ( itr.call( scope, obj[ _key ], _key ) === this.BREAK ) {\n\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\tdefer: function defer( fnc ) {\n\n\t\tsetTimeout( fnc, 0 );\n\n\t},\n\tdebounce: function debounce( func, threshold, callImmediately ) {\n\n\t\tvar timeout = void 0;\n\t\treturn function () {\n\n\t\t\tvar obj = this;\n\t\t\tvar args = arguments;\n\t\t\tfunction delayed() {\n\n\t\t\t\ttimeout = null;\n\t\t\t\tif ( ! callImmediately ) func.apply( obj, args );\n\n\t\t\t}\n\t\t\tvar callNow = callImmediately || ! timeout;\n\t\t\tclearTimeout( timeout );\n\t\t\ttimeout = setTimeout( delayed, threshold );\n\t\t\tif ( callNow ) {\n\n\t\t\t\tfunc.apply( obj, args );\n\n\t\t\t}\n\n\t\t};\n\n\t},\n\ttoArray: function toArray( obj ) {\n\n\t\tif ( obj.toArray ) return obj.toArray();\n\t\treturn ARR_SLICE.call( obj );\n\n\t},\n\tisUndefined: function isUndefined( obj ) {\n\n\t\treturn obj === undefined;\n\n\t},\n\tisNull: function isNull( obj ) {\n\n\t\treturn obj === null;\n\n\t},\n\tisNaN: function ( _isNaN ) {\n\n\t\tfunction isNaN() {\n\n\t\t\treturn _isNaN.apply( this, arguments );\n\n\t\t}\n\t\tisNaN.toString = function () {\n\n\t\t\treturn _isNaN.toString();\n\n\t\t};\n\t\treturn isNaN;\n\n\t}( function ( obj ) {\n\n\t\treturn isNaN( obj );\n\n\t} ),\n\tisArray: Array.isArray || function ( obj ) {\n\n\t\treturn obj.constructor === Array;\n\n\t},\n\tisObject: function isObject( obj ) {\n\n\t\treturn obj === Object( obj );\n\n\t},\n\tisNumber: function isNumber( obj ) {\n\n\t\treturn obj === obj + 0;\n\n\t},\n\tisString: function isString( obj ) {\n\n\t\treturn obj === obj + '';\n\n\t},\n\tisBoolean: function isBoolean( obj ) {\n\n\t\treturn obj === false || obj === true;\n\n\t},\n\tisFunction: function isFunction( obj ) {\n\n\t\treturn Object.prototype.toString.call( obj ) === '[object Function]';\n\n\t}\n};\n\nvar INTERPRETATIONS = [\n\t{\n\t\tlitmus: Common.isString,\n\t\tconversions: {\n\t\t\tTHREE_CHAR_HEX: {\n\t\t\t\tread: function read( original ) {\n\n\t\t\t\t\tvar test = original.match( /^#([A-F0-9])([A-F0-9])([A-F0-9])$/i );\n\t\t\t\t\tif ( test === null ) {\n\n\t\t\t\t\t\treturn false;\n\n\t\t\t\t\t}\n\t\t\t\t\treturn {\n\t\t\t\t\t\tspace: 'HEX',\n\t\t\t\t\t\thex: parseInt( '0x' + test[ 1 ].toString() + test[ 1 ].toString() + test[ 2 ].toString() + test[ 2 ].toString() + test[ 3 ].toString() + test[ 3 ].toString(), 0 )\n\t\t\t\t\t};\n\n\t\t\t\t},\n\t\t\t\twrite: colorToString\n\t\t\t},\n\t\t\tSIX_CHAR_HEX: {\n\t\t\t\tread: function read( original ) {\n\n\t\t\t\t\tvar test = original.match( /^#([A-F0-9]{6})$/i );\n\t\t\t\t\tif ( test === null ) {\n\n\t\t\t\t\t\treturn false;\n\n\t\t\t\t\t}\n\t\t\t\t\treturn {\n\t\t\t\t\t\tspace: 'HEX',\n\t\t\t\t\t\thex: parseInt( '0x' + test[ 1 ].toString(), 0 )\n\t\t\t\t\t};\n\n\t\t\t\t},\n\t\t\t\twrite: colorToString\n\t\t\t},\n\t\t\tCSS_RGB: {\n\t\t\t\tread: function read( original ) {\n\n\t\t\t\t\tvar test = original.match( /^rgb\\(\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*\\)/ );\n\t\t\t\t\tif ( test === null ) {\n\n\t\t\t\t\t\treturn false;\n\n\t\t\t\t\t}\n\t\t\t\t\treturn {\n\t\t\t\t\t\tspace: 'RGB',\n\t\t\t\t\t\tr: parseFloat( test[ 1 ] ),\n\t\t\t\t\t\tg: parseFloat( test[ 2 ] ),\n\t\t\t\t\t\tb: parseFloat( test[ 3 ] )\n\t\t\t\t\t};\n\n\t\t\t\t},\n\t\t\t\twrite: colorToString\n\t\t\t},\n\t\t\tCSS_RGBA: {\n\t\t\t\tread: function read( original ) {\n\n\t\t\t\t\tvar test = original.match( /^rgba\\(\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*\\)/ );\n\t\t\t\t\tif ( test === null ) {\n\n\t\t\t\t\t\treturn false;\n\n\t\t\t\t\t}\n\t\t\t\t\treturn {\n\t\t\t\t\t\tspace: 'RGB',\n\t\t\t\t\t\tr: parseFloat( test[ 1 ] ),\n\t\t\t\t\t\tg: parseFloat( test[ 2 ] ),\n\t\t\t\t\t\tb: parseFloat( test[ 3 ] ),\n\t\t\t\t\t\ta: parseFloat( test[ 4 ] )\n\t\t\t\t\t};\n\n\t\t\t\t},\n\t\t\t\twrite: colorToString\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tlitmus: Common.isNumber,\n\t\tconversions: {\n\t\t\tHEX: {\n\t\t\t\tread: function read( original ) {\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\tspace: 'HEX',\n\t\t\t\t\t\thex: original,\n\t\t\t\t\t\tconversionName: 'HEX'\n\t\t\t\t\t};\n\n\t\t\t\t},\n\t\t\t\twrite: function write( color ) {\n\n\t\t\t\t\treturn color.hex;\n\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tlitmus: Common.isArray,\n\t\tconversions: {\n\t\t\tRGB_ARRAY: {\n\t\t\t\tread: function read( original ) {\n\n\t\t\t\t\tif ( original.length !== 3 ) {\n\n\t\t\t\t\t\treturn false;\n\n\t\t\t\t\t}\n\t\t\t\t\treturn {\n\t\t\t\t\t\tspace: 'RGB',\n\t\t\t\t\t\tr: original[ 0 ],\n\t\t\t\t\t\tg: original[ 1 ],\n\t\t\t\t\t\tb: original[ 2 ]\n\t\t\t\t\t};\n\n\t\t\t\t},\n\t\t\t\twrite: function write( color ) {\n\n\t\t\t\t\treturn [ color.r, color.g, color.b ];\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tRGBA_ARRAY: {\n\t\t\t\tread: function read( original ) {\n\n\t\t\t\t\tif ( original.length !== 4 ) return false;\n\t\t\t\t\treturn {\n\t\t\t\t\t\tspace: 'RGB',\n\t\t\t\t\t\tr: original[ 0 ],\n\t\t\t\t\t\tg: original[ 1 ],\n\t\t\t\t\t\tb: original[ 2 ],\n\t\t\t\t\t\ta: original[ 3 ]\n\t\t\t\t\t};\n\n\t\t\t\t},\n\t\t\t\twrite: function write( color ) {\n\n\t\t\t\t\treturn [ color.r, color.g, color.b, color.a ];\n\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tlitmus: Common.isObject,\n\t\tconversions: {\n\t\t\tRGBA_OBJ: {\n\t\t\t\tread: function read( original ) {\n\n\t\t\t\t\tif ( Common.isNumber( original.r ) && Common.isNumber( original.g ) && Common.isNumber( original.b ) && Common.isNumber( original.a ) ) {\n\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tspace: 'RGB',\n\t\t\t\t\t\t\tr: original.r,\n\t\t\t\t\t\t\tg: original.g,\n\t\t\t\t\t\t\tb: original.b,\n\t\t\t\t\t\t\ta: original.a\n\t\t\t\t\t\t};\n\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\n\t\t\t\t},\n\t\t\t\twrite: function write( color ) {\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\tr: color.r,\n\t\t\t\t\t\tg: color.g,\n\t\t\t\t\t\tb: color.b,\n\t\t\t\t\t\ta: color.a\n\t\t\t\t\t};\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tRGB_OBJ: {\n\t\t\t\tread: function read( original ) {\n\n\t\t\t\t\tif ( Common.isNumber( original.r ) && Common.isNumber( original.g ) && Common.isNumber( original.b ) ) {\n\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tspace: 'RGB',\n\t\t\t\t\t\t\tr: original.r,\n\t\t\t\t\t\t\tg: original.g,\n\t\t\t\t\t\t\tb: original.b\n\t\t\t\t\t\t};\n\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\n\t\t\t\t},\n\t\t\t\twrite: function write( color ) {\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\tr: color.r,\n\t\t\t\t\t\tg: color.g,\n\t\t\t\t\t\tb: color.b\n\t\t\t\t\t};\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tHSVA_OBJ: {\n\t\t\t\tread: function read( original ) {\n\n\t\t\t\t\tif ( Common.isNumber( original.h ) && Common.isNumber( original.s ) && Common.isNumber( original.v ) && Common.isNumber( original.a ) ) {\n\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tspace: 'HSV',\n\t\t\t\t\t\t\th: original.h,\n\t\t\t\t\t\t\ts: original.s,\n\t\t\t\t\t\t\tv: original.v,\n\t\t\t\t\t\t\ta: original.a\n\t\t\t\t\t\t};\n\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\n\t\t\t\t},\n\t\t\t\twrite: function write( color ) {\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\th: color.h,\n\t\t\t\t\t\ts: color.s,\n\t\t\t\t\t\tv: color.v,\n\t\t\t\t\t\ta: color.a\n\t\t\t\t\t};\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tHSV_OBJ: {\n\t\t\t\tread: function read( original ) {\n\n\t\t\t\t\tif ( Common.isNumber( original.h ) && Common.isNumber( original.s ) && Common.isNumber( original.v ) ) {\n\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tspace: 'HSV',\n\t\t\t\t\t\t\th: original.h,\n\t\t\t\t\t\t\ts: original.s,\n\t\t\t\t\t\t\tv: original.v\n\t\t\t\t\t\t};\n\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\n\t\t\t\t},\n\t\t\t\twrite: function write( color ) {\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\th: color.h,\n\t\t\t\t\t\ts: color.s,\n\t\t\t\t\t\tv: color.v\n\t\t\t\t\t};\n\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} ];\nvar result = void 0;\nvar toReturn = void 0;\nvar interpret = function interpret() {\n\n\ttoReturn = false;\n\tvar original = arguments.length > 1 ? Common.toArray( arguments ) : arguments[ 0 ];\n\tCommon.each( INTERPRETATIONS, function ( family ) {\n\n\t\tif ( family.litmus( original ) ) {\n\n\t\t\tCommon.each( family.conversions, function ( conversion, conversionName ) {\n\n\t\t\t\tresult = conversion.read( original );\n\t\t\t\tif ( toReturn === false && result !== false ) {\n\n\t\t\t\t\ttoReturn = result;\n\t\t\t\t\tresult.conversionName = conversionName;\n\t\t\t\t\tresult.conversion = conversion;\n\t\t\t\t\treturn Common.BREAK;\n\n\t\t\t\t}\n\n\t\t\t} );\n\t\t\treturn Common.BREAK;\n\n\t\t}\n\n\t} );\n\treturn toReturn;\n\n};\n\nvar tmpComponent = void 0;\nvar ColorMath = {\n\thsv_to_rgb: function hsv_to_rgb( h, s, v ) {\n\n\t\tvar hi = Math.floor( h / 60 ) % 6;\n\t\tvar f = h / 60 - Math.floor( h / 60 );\n\t\tvar p = v * ( 1.0 - s );\n\t\tvar q = v * ( 1.0 - f * s );\n\t\tvar t = v * ( 1.0 - ( 1.0 - f ) * s );\n\t\tvar c = [[ v, t, p ], [ q, v, p ], [ p, v, t ], [ p, q, v ], [ t, p, v ], [ v, p, q ]][ hi ];\n\t\treturn {\n\t\t\tr: c[ 0 ] * 255,\n\t\t\tg: c[ 1 ] * 255,\n\t\t\tb: c[ 2 ] * 255\n\t\t};\n\n\t},\n\trgb_to_hsv: function rgb_to_hsv( r, g, b ) {\n\n\t\tvar min = Math.min( r, g, b );\n\t\tvar max = Math.max( r, g, b );\n\t\tvar delta = max - min;\n\t\tvar h = void 0;\n\t\tvar s = void 0;\n\t\tif ( max !== 0 ) {\n\n\t\t\ts = delta / max;\n\n\t\t} else {\n\n\t\t\treturn {\n\t\t\t\th: NaN,\n\t\t\t\ts: 0,\n\t\t\t\tv: 0\n\t\t\t};\n\n\t\t}\n\t\tif ( r === max ) {\n\n\t\t\th = ( g - b ) / delta;\n\n\t\t} else if ( g === max ) {\n\n\t\t\th = 2 + ( b - r ) / delta;\n\n\t\t} else {\n\n\t\t\th = 4 + ( r - g ) / delta;\n\n\t\t}\n\t\th /= 6;\n\t\tif ( h < 0 ) {\n\n\t\t\th += 1;\n\n\t\t}\n\t\treturn {\n\t\t\th: h * 360,\n\t\t\ts: s,\n\t\t\tv: max / 255\n\t\t};\n\n\t},\n\trgb_to_hex: function rgb_to_hex( r, g, b ) {\n\n\t\tvar hex = this.hex_with_component( 0, 2, r );\n\t\thex = this.hex_with_component( hex, 1, g );\n\t\thex = this.hex_with_component( hex, 0, b );\n\t\treturn hex;\n\n\t},\n\tcomponent_from_hex: function component_from_hex( hex, componentIndex ) {\n\n\t\treturn hex >> componentIndex * 8 & 0xFF;\n\n\t},\n\thex_with_component: function hex_with_component( hex, componentIndex, value ) {\n\n\t\treturn value << ( tmpComponent = componentIndex * 8 ) | hex & ~ ( 0xFF << tmpComponent );\n\n\t}\n};\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function ( obj ) {\n\n\treturn typeof obj;\n\n} : function ( obj ) {\n\n\treturn obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n\n};\n\n\n\n\n\n\n\n\n\n\n\nvar classCallCheck = function ( instance, Constructor ) {\n\n\tif ( ! ( instance instanceof Constructor ) ) {\n\n\t\tthrow new TypeError( \"Cannot call a class as a function\" );\n\n\t}\n\n};\n\nvar createClass = function () {\n\n\tfunction defineProperties( target, props ) {\n\n\t\tfor ( var i = 0; i < props.length; i ++ ) {\n\n\t\t\tvar descriptor = props[ i ];\n\t\t\tdescriptor.enumerable = descriptor.enumerable || false;\n\t\t\tdescriptor.configurable = true;\n\t\t\tif ( \"value\" in descriptor ) descriptor.writable = true;\n\t\t\tObject.defineProperty( target, descriptor.key, descriptor );\n\n\t\t}\n\n\t}\n\n\treturn function ( Constructor, protoProps, staticProps ) {\n\n\t\tif ( protoProps ) defineProperties( Constructor.prototype, protoProps );\n\t\tif ( staticProps ) defineProperties( Constructor, staticProps );\n\t\treturn Constructor;\n\n\t};\n\n}();\n\n\n\n\n\n\n\nvar get = function get( object, property, receiver ) {\n\n\tif ( object === null ) object = Function.prototype;\n\tvar desc = Object.getOwnPropertyDescriptor( object, property );\n\n\tif ( desc === undefined ) {\n\n\t\tvar parent = Object.getPrototypeOf( object );\n\n\t\tif ( parent === null ) {\n\n\t\t\treturn undefined;\n\n\t\t} else {\n\n\t\t\treturn get( parent, property, receiver );\n\n\t\t}\n\n\t} else if ( \"value\" in desc ) {\n\n\t\treturn desc.value;\n\n\t} else {\n\n\t\tvar getter = desc.get;\n\n\t\tif ( getter === undefined ) {\n\n\t\t\treturn undefined;\n\n\t\t}\n\n\t\treturn getter.call( receiver );\n\n\t}\n\n};\n\nvar inherits = function ( subClass, superClass ) {\n\n\tif ( typeof superClass !== \"function\" && superClass !== null ) {\n\n\t\tthrow new TypeError( \"Super expression must either be null or a function, not \" + typeof superClass );\n\n\t}\n\n\tsubClass.prototype = Object.create( superClass && superClass.prototype, {\n\t\tconstructor: {\n\t\t\tvalue: subClass,\n\t\t\tenumerable: false,\n\t\t\twritable: true,\n\t\t\tconfigurable: true\n\t\t}\n\t} );\n\tif ( superClass ) Object.setPrototypeOf ? Object.setPrototypeOf( subClass, superClass ) : subClass.__proto__ = superClass;\n\n};\n\n\n\n\n\n\n\n\n\n\n\nvar possibleConstructorReturn = function ( self, call ) {\n\n\tif ( ! self ) {\n\n\t\tthrow new ReferenceError( \"this hasn't been initialised - super() hasn't been called\" );\n\n\t}\n\n\treturn call && ( typeof call === \"object\" || typeof call === \"function\" ) ? call : self;\n\n};\n\nvar Color = function () {\n\n\tfunction Color() {\n\n\t\tclassCallCheck( this, Color );\n\t\tthis.__state = interpret.apply( this, arguments );\n\t\tif ( this.__state === false ) {\n\n\t\t\tthrow new Error( 'Failed to interpret color arguments' );\n\n\t\t}\n\t\tthis.__state.a = this.__state.a || 1;\n\n\t}\n\tcreateClass( Color, [ {\n\t\tkey: 'toString',\n\t\tvalue: function toString() {\n\n\t\t\treturn colorToString( this );\n\n\t\t}\n\t}, {\n\t\tkey: 'toHexString',\n\t\tvalue: function toHexString() {\n\n\t\t\treturn colorToString( this, true );\n\n\t\t}\n\t}, {\n\t\tkey: 'toOriginal',\n\t\tvalue: function toOriginal() {\n\n\t\t\treturn this.__state.conversion.write( this );\n\n\t\t}\n\t} ] );\n\treturn Color;\n\n}();\nfunction defineRGBComponent( target, component, componentHexIndex ) {\n\n\tObject.defineProperty( target, component, {\n\t\tget: function get$$1() {\n\n\t\t\tif ( this.__state.space === 'RGB' ) {\n\n\t\t\t\treturn this.__state[ component ];\n\n\t\t\t}\n\t\t\tColor.recalculateRGB( this, component, componentHexIndex );\n\t\t\treturn this.__state[ component ];\n\n\t\t},\n\t\tset: function set$$1( v ) {\n\n\t\t\tif ( this.__state.space !== 'RGB' ) {\n\n\t\t\t\tColor.recalculateRGB( this, component, componentHexIndex );\n\t\t\t\tthis.__state.space = 'RGB';\n\n\t\t\t}\n\t\t\tthis.__state[ component ] = v;\n\n\t\t}\n\t} );\n\n}\nfunction defineHSVComponent( target, component ) {\n\n\tObject.defineProperty( target, component, {\n\t\tget: function get$$1() {\n\n\t\t\tif ( this.__state.space === 'HSV' ) {\n\n\t\t\t\treturn this.__state[ component ];\n\n\t\t\t}\n\t\t\tColor.recalculateHSV( this );\n\t\t\treturn this.__state[ component ];\n\n\t\t},\n\t\tset: function set$$1( v ) {\n\n\t\t\tif ( this.__state.space !== 'HSV' ) {\n\n\t\t\t\tColor.recalculateHSV( this );\n\t\t\t\tthis.__state.space = 'HSV';\n\n\t\t\t}\n\t\t\tthis.__state[ component ] = v;\n\n\t\t}\n\t} );\n\n}\nColor.recalculateRGB = function ( color, component, componentHexIndex ) {\n\n\tif ( color.__state.space === 'HEX' ) {\n\n\t\tcolor.__state[ component ] = ColorMath.component_from_hex( color.__state.hex, componentHexIndex );\n\n\t} else if ( color.__state.space === 'HSV' ) {\n\n\t\tCommon.extend( color.__state, ColorMath.hsv_to_rgb( color.__state.h, color.__state.s, color.__state.v ) );\n\n\t} else {\n\n\t\tthrow new Error( 'Corrupted color state' );\n\n\t}\n\n};\nColor.recalculateHSV = function ( color ) {\n\n\tvar result = ColorMath.rgb_to_hsv( color.r, color.g, color.b );\n\tCommon.extend( color.__state, {\n\t\ts: result.s,\n\t\tv: result.v\n\t} );\n\tif ( ! Common.isNaN( result.h ) ) {\n\n\t\tcolor.__state.h = result.h;\n\n\t} else if ( Common.isUndefined( color.__state.h ) ) {\n\n\t\tcolor.__state.h = 0;\n\n\t}\n\n};\nColor.COMPONENTS = [ 'r', 'g', 'b', 'h', 's', 'v', 'hex', 'a' ];\ndefineRGBComponent( Color.prototype, 'r', 2 );\ndefineRGBComponent( Color.prototype, 'g', 1 );\ndefineRGBComponent( Color.prototype, 'b', 0 );\ndefineHSVComponent( Color.prototype, 'h' );\ndefineHSVComponent( Color.prototype, 's' );\ndefineHSVComponent( Color.prototype, 'v' );\nObject.defineProperty( Color.prototype, 'a', {\n\tget: function get$$1() {\n\n\t\treturn this.__state.a;\n\n\t},\n\tset: function set$$1( v ) {\n\n\t\tthis.__state.a = v;\n\n\t}\n} );\nObject.defineProperty( Color.prototype, 'hex', {\n\tget: function get$$1() {\n\n\t\tif ( ! this.__state.space !== 'HEX' ) {\n\n\t\t\tthis.__state.hex = ColorMath.rgb_to_hex( this.r, this.g, this.b );\n\n\t\t}\n\t\treturn this.__state.hex;\n\n\t},\n\tset: function set$$1( v ) {\n\n\t\tthis.__state.space = 'HEX';\n\t\tthis.__state.hex = v;\n\n\t}\n} );\n\nvar Controller = function () {\n\n\tfunction Controller( object, property ) {\n\n\t\tclassCallCheck( this, Controller );\n\t\tthis.initialValue = object[ property ];\n\t\tthis.domElement = document.createElement( 'div' );\n\t\tthis.object = object;\n\t\tthis.property = property;\n\t\tthis.__onChange = undefined;\n\t\tthis.__onFinishChange = undefined;\n\n\t}\n\tcreateClass( Controller, [ {\n\t\tkey: 'onChange',\n\t\tvalue: function onChange( fnc ) {\n\n\t\t\tthis.__onChange = fnc;\n\t\t\treturn this;\n\n\t\t}\n\t}, {\n\t\tkey: 'onFinishChange',\n\t\tvalue: function onFinishChange( fnc ) {\n\n\t\t\tthis.__onFinishChange = fnc;\n\t\t\treturn this;\n\n\t\t}\n\t}, {\n\t\tkey: 'setValue',\n\t\tvalue: function setValue( newValue ) {\n\n\t\t\tthis.object[ this.property ] = newValue;\n\t\t\tif ( this.__onChange ) {\n\n\t\t\t\tthis.__onChange.call( this, newValue );\n\n\t\t\t}\n\t\t\tthis.updateDisplay();\n\t\t\treturn this;\n\n\t\t}\n\t}, {\n\t\tkey: 'getValue',\n\t\tvalue: function getValue() {\n\n\t\t\treturn this.object[ this.property ];\n\n\t\t}\n\t}, {\n\t\tkey: 'updateDisplay',\n\t\tvalue: function updateDisplay() {\n\n\t\t\treturn this;\n\n\t\t}\n\t}, {\n\t\tkey: 'isModified',\n\t\tvalue: function isModified() {\n\n\t\t\treturn this.initialValue !== this.getValue();\n\n\t\t}\n\t} ] );\n\treturn Controller;\n\n}();\n\nvar EVENT_MAP = {\n\tHTMLEvents: [ 'change' ],\n\tMouseEvents: [ 'click', 'mousemove', 'mousedown', 'mouseup', 'mouseover' ],\n\tKeyboardEvents: [ 'keydown' ]\n};\nvar EVENT_MAP_INV = {};\nCommon.each( EVENT_MAP, function ( v, k ) {\n\n\tCommon.each( v, function ( e ) {\n\n\t\tEVENT_MAP_INV[ e ] = k;\n\n\t} );\n\n} );\nvar CSS_VALUE_PIXELS = /(\\d+(\\.\\d+)?)px/;\nfunction cssValueToPixels( val ) {\n\n\tif ( val === '0' || Common.isUndefined( val ) ) {\n\n\t\treturn 0;\n\n\t}\n\tvar match = val.match( CSS_VALUE_PIXELS );\n\tif ( ! Common.isNull( match ) ) {\n\n\t\treturn parseFloat( match[ 1 ] );\n\n\t}\n\treturn 0;\n\n}\nvar dom = {\n\tmakeSelectable: function makeSelectable( elem, selectable ) {\n\n\t\tif ( elem === undefined || elem.style === undefined ) return;\n\t\telem.onselectstart = selectable ? function () {\n\n\t\t\treturn false;\n\n\t\t} : function () {};\n\t\telem.style.MozUserSelect = selectable ? 'auto' : 'none';\n\t\telem.style.KhtmlUserSelect = selectable ? 'auto' : 'none';\n\t\telem.unselectable = selectable ? 'on' : 'off';\n\n\t},\n\tmakeFullscreen: function makeFullscreen( elem, hor, vert ) {\n\n\t\tvar vertical = vert;\n\t\tvar horizontal = hor;\n\t\tif ( Common.isUndefined( horizontal ) ) {\n\n\t\t\thorizontal = true;\n\n\t\t}\n\t\tif ( Common.isUndefined( vertical ) ) {\n\n\t\t\tvertical = true;\n\n\t\t}\n\t\telem.style.position = 'absolute';\n\t\tif ( horizontal ) {\n\n\t\t\telem.style.left = 0;\n\t\t\telem.style.right = 0;\n\n\t\t}\n\t\tif ( vertical ) {\n\n\t\t\telem.style.top = 0;\n\t\t\telem.style.bottom = 0;\n\n\t\t}\n\n\t},\n\tfakeEvent: function fakeEvent( elem, eventType, pars, aux ) {\n\n\t\tvar params = pars || {};\n\t\tvar className = EVENT_MAP_INV[ eventType ];\n\t\tif ( ! className ) {\n\n\t\t\tthrow new Error( 'Event type ' + eventType + ' not supported.' );\n\n\t\t}\n\t\tvar evt = document.createEvent( className );\n\t\tswitch ( className ) {\n\n\t\t\tcase 'MouseEvents':\n\t\t\t{\n\n\t\t\t\tvar clientX = params.x || params.clientX || 0;\n\t\t\t\tvar clientY = params.y || params.clientY || 0;\n\t\t\t\tevt.initMouseEvent( eventType, params.bubbles || false, params.cancelable || true, window, params.clickCount || 1, 0,\n\t\t\t\t\t0,\n\t\t\t\t\tclientX,\n\t\t\t\t\tclientY,\n\t\t\t\t\tfalse, false, false, false, 0, null );\n\t\t\t\tbreak;\n\n\t\t\t}\n\t\t\tcase 'KeyboardEvents':\n\t\t\t{\n\n\t\t\t\tvar init = evt.initKeyboardEvent || evt.initKeyEvent;\n\t\t\t\tCommon.defaults( params, {\n\t\t\t\t\tcancelable: true,\n\t\t\t\t\tctrlKey: false,\n\t\t\t\t\taltKey: false,\n\t\t\t\t\tshiftKey: false,\n\t\t\t\t\tmetaKey: false,\n\t\t\t\t\tkeyCode: undefined,\n\t\t\t\t\tcharCode: undefined\n\t\t\t\t} );\n\t\t\t\tinit( eventType, params.bubbles || false, params.cancelable, window, params.ctrlKey, params.altKey, params.shiftKey, params.metaKey, params.keyCode, params.charCode );\n\t\t\t\tbreak;\n\n\t\t\t}\n\t\t\tdefault:\n\t\t\t{\n\n\t\t\t\tevt.initEvent( eventType, params.bubbles || false, params.cancelable || true );\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\t\tCommon.defaults( evt, aux );\n\t\telem.dispatchEvent( evt );\n\n\t},\n\tbind: function bind( elem, event, func, newBool ) {\n\n\t\tvar bool = newBool || false;\n\t\tif ( elem.addEventListener ) {\n\n\t\t\telem.addEventListener( event, func, bool );\n\n\t\t} else if ( elem.attachEvent ) {\n\n\t\t\telem.attachEvent( 'on' + event, func );\n\n\t\t}\n\t\treturn dom;\n\n\t},\n\tunbind: function unbind( elem, event, func, newBool ) {\n\n\t\tvar bool = newBool || false;\n\t\tif ( elem.removeEventListener ) {\n\n\t\t\telem.removeEventListener( event, func, bool );\n\n\t\t} else if ( elem.detachEvent ) {\n\n\t\t\telem.detachEvent( 'on' + event, func );\n\n\t\t}\n\t\treturn dom;\n\n\t},\n\taddClass: function addClass( elem, className ) {\n\n\t\tif ( elem.className === undefined ) {\n\n\t\t\telem.className = className;\n\n\t\t} else if ( elem.className !== className ) {\n\n\t\t\tvar classes = elem.className.split( / +/ );\n\t\t\tif ( classes.indexOf( className ) === - 1 ) {\n\n\t\t\t\tclasses.push( className );\n\t\t\t\telem.className = classes.join( ' ' ).replace( /^\\s+/, '' ).replace( /\\s+$/, '' );\n\n\t\t\t}\n\n\t\t}\n\t\treturn dom;\n\n\t},\n\tremoveClass: function removeClass( elem, className ) {\n\n\t\tif ( className ) {\n\n\t\t\tif ( elem.className === className ) {\n\n\t\t\t\telem.removeAttribute( 'class' );\n\n\t\t\t} else {\n\n\t\t\t\tvar classes = elem.className.split( / +/ );\n\t\t\t\tvar index = classes.indexOf( className );\n\t\t\t\tif ( index !== - 1 ) {\n\n\t\t\t\t\tclasses.splice( index, 1 );\n\t\t\t\t\telem.className = classes.join( ' ' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\telem.className = undefined;\n\n\t\t}\n\t\treturn dom;\n\n\t},\n\thasClass: function hasClass( elem, className ) {\n\n\t\treturn new RegExp( '(?:^|\\\\s+)' + className + '(?:\\\\s+|$)' ).test( elem.className ) || false;\n\n\t},\n\tgetWidth: function getWidth( elem ) {\n\n\t\tvar style = getComputedStyle( elem );\n\t\treturn cssValueToPixels( style[ 'border-left-width' ] ) + cssValueToPixels( style[ 'border-right-width' ] ) + cssValueToPixels( style[ 'padding-left' ] ) + cssValueToPixels( style[ 'padding-right' ] ) + cssValueToPixels( style.width );\n\n\t},\n\tgetHeight: function getHeight( elem ) {\n\n\t\tvar style = getComputedStyle( elem );\n\t\treturn cssValueToPixels( style[ 'border-top-width' ] ) + cssValueToPixels( style[ 'border-bottom-width' ] ) + cssValueToPixels( style[ 'padding-top' ] ) + cssValueToPixels( style[ 'padding-bottom' ] ) + cssValueToPixels( style.height );\n\n\t},\n\tgetOffset: function getOffset( el ) {\n\n\t\tvar elem = el;\n\t\tvar offset = { left: 0, top: 0 };\n\t\tif ( elem.offsetParent ) {\n\n\t\t\tdo {\n\n\t\t\t\toffset.left += elem.offsetLeft;\n\t\t\t\toffset.top += elem.offsetTop;\n\t\t\t\telem = elem.offsetParent;\n\n\t\t\t} while ( elem );\n\n\t\t}\n\t\treturn offset;\n\n\t},\n\tisActive: function isActive( elem ) {\n\n\t\treturn elem === document.activeElement && ( elem.type || elem.href );\n\n\t}\n};\n\nvar BooleanController = function ( _Controller ) {\n\n\tinherits( BooleanController, _Controller );\n\tfunction BooleanController( object, property ) {\n\n\t\tclassCallCheck( this, BooleanController );\n\t\tvar _this2 = possibleConstructorReturn( this, ( BooleanController.__proto__ || Object.getPrototypeOf( BooleanController ) ).call( this, object, property ) );\n\t\tvar _this = _this2;\n\t\t_this2.__prev = _this2.getValue();\n\t\t_this2.__checkbox = document.createElement( 'input' );\n\t\t_this2.__checkbox.setAttribute( 'type', 'checkbox' );\n\t\tfunction onChange() {\n\n\t\t\t_this.setValue( ! _this.__prev );\n\n\t\t}\n\t\tdom.bind( _this2.__checkbox, 'change', onChange, false );\n\t\t_this2.domElement.appendChild( _this2.__checkbox );\n\t\t_this2.updateDisplay();\n\t\treturn _this2;\n\n\t}\n\tcreateClass( BooleanController, [ {\n\t\tkey: 'setValue',\n\t\tvalue: function setValue( v ) {\n\n\t\t\tvar toReturn = get( BooleanController.prototype.__proto__ || Object.getPrototypeOf( BooleanController.prototype ), 'setValue', this ).call( this, v );\n\t\t\tif ( this.__onFinishChange ) {\n\n\t\t\t\tthis.__onFinishChange.call( this, this.getValue() );\n\n\t\t\t}\n\t\t\tthis.__prev = this.getValue();\n\t\t\treturn toReturn;\n\n\t\t}\n\t}, {\n\t\tkey: 'updateDisplay',\n\t\tvalue: function updateDisplay() {\n\n\t\t\tif ( this.getValue() === true ) {\n\n\t\t\t\tthis.__checkbox.setAttribute( 'checked', 'checked' );\n\t\t\t\tthis.__checkbox.checked = true;\n\t\t\t\tthis.__prev = true;\n\n\t\t\t} else {\n\n\t\t\t\tthis.__checkbox.checked = false;\n\t\t\t\tthis.__prev = false;\n\n\t\t\t}\n\t\t\treturn get( BooleanController.prototype.__proto__ || Object.getPrototypeOf( BooleanController.prototype ), 'updateDisplay', this ).call( this );\n\n\t\t}\n\t} ] );\n\treturn BooleanController;\n\n}( Controller );\n\nvar OptionController = function ( _Controller ) {\n\n\tinherits( OptionController, _Controller );\n\tfunction OptionController( object, property, opts ) {\n\n\t\tclassCallCheck( this, OptionController );\n\t\tvar _this2 = possibleConstructorReturn( this, ( OptionController.__proto__ || Object.getPrototypeOf( OptionController ) ).call( this, object, property ) );\n\t\tvar options = opts;\n\t\tvar _this = _this2;\n\t\t_this2.__select = document.createElement( 'select' );\n\t\tif ( Common.isArray( options ) ) {\n\n\t\t\tvar map = {};\n\t\t\tCommon.each( options, function ( element ) {\n\n\t\t\t\tmap[ element ] = element;\n\n\t\t\t} );\n\t\t\toptions = map;\n\n\t\t}\n\t\tCommon.each( options, function ( value, key ) {\n\n\t\t\tvar opt = document.createElement( 'option' );\n\t\t\topt.innerHTML = key;\n\t\t\topt.setAttribute( 'value', value );\n\t\t\t_this.__select.appendChild( opt );\n\n\t\t} );\n\t\t_this2.updateDisplay();\n\t\tdom.bind( _this2.__select, 'change', function () {\n\n\t\t\tvar desiredValue = this.options[ this.selectedIndex ].value;\n\t\t\t_this.setValue( desiredValue );\n\n\t\t} );\n\t\t_this2.domElement.appendChild( _this2.__select );\n\t\treturn _this2;\n\n\t}\n\tcreateClass( OptionController, [ {\n\t\tkey: 'setValue',\n\t\tvalue: function setValue( v ) {\n\n\t\t\tvar toReturn = get( OptionController.prototype.__proto__ || Object.getPrototypeOf( OptionController.prototype ), 'setValue', this ).call( this, v );\n\t\t\tif ( this.__onFinishChange ) {\n\n\t\t\t\tthis.__onFinishChange.call( this, this.getValue() );\n\n\t\t\t}\n\t\t\treturn toReturn;\n\n\t\t}\n\t}, {\n\t\tkey: 'updateDisplay',\n\t\tvalue: function updateDisplay() {\n\n\t\t\tif ( dom.isActive( this.__select ) ) return this;\n\t\t\tthis.__select.value = this.getValue();\n\t\t\treturn get( OptionController.prototype.__proto__ || Object.getPrototypeOf( OptionController.prototype ), 'updateDisplay', this ).call( this );\n\n\t\t}\n\t} ] );\n\treturn OptionController;\n\n}( Controller );\n\nvar StringController = function ( _Controller ) {\n\n\tinherits( StringController, _Controller );\n\tfunction StringController( object, property ) {\n\n\t\tclassCallCheck( this, StringController );\n\t\tvar _this2 = possibleConstructorReturn( this, ( StringController.__proto__ || Object.getPrototypeOf( StringController ) ).call( this, object, property ) );\n\t\tvar _this = _this2;\n\t\tfunction onChange() {\n\n\t\t\t_this.setValue( _this.__input.value );\n\n\t\t}\n\t\tfunction onBlur() {\n\n\t\t\tif ( _this.__onFinishChange ) {\n\n\t\t\t\t_this.__onFinishChange.call( _this, _this.getValue() );\n\n\t\t\t}\n\n\t\t}\n\t\t_this2.__input = document.createElement( 'input' );\n\t\t_this2.__input.setAttribute( 'type', 'text' );\n\t\tdom.bind( _this2.__input, 'keyup', onChange );\n\t\tdom.bind( _this2.__input, 'change', onChange );\n\t\tdom.bind( _this2.__input, 'blur', onBlur );\n\t\tdom.bind( _this2.__input, 'keydown', function ( e ) {\n\n\t\t\tif ( e.keyCode === 13 ) {\n\n\t\t\t\tthis.blur();\n\n\t\t\t}\n\n\t\t} );\n\t\t_this2.updateDisplay();\n\t\t_this2.domElement.appendChild( _this2.__input );\n\t\treturn _this2;\n\n\t}\n\tcreateClass( StringController, [ {\n\t\tkey: 'updateDisplay',\n\t\tvalue: function updateDisplay() {\n\n\t\t\tif ( ! dom.isActive( this.__input ) ) {\n\n\t\t\t\tthis.__input.value = this.getValue();\n\n\t\t\t}\n\t\t\treturn get( StringController.prototype.__proto__ || Object.getPrototypeOf( StringController.prototype ), 'updateDisplay', this ).call( this );\n\n\t\t}\n\t} ] );\n\treturn StringController;\n\n}( Controller );\n\nfunction numDecimals( x ) {\n\n\tvar _x = x.toString();\n\tif ( _x.indexOf( '.' ) > - 1 ) {\n\n\t\treturn _x.length - _x.indexOf( '.' ) - 1;\n\n\t}\n\treturn 0;\n\n}\nvar NumberController = function ( _Controller ) {\n\n\tinherits( NumberController, _Controller );\n\tfunction NumberController( object, property, params ) {\n\n\t\tclassCallCheck( this, NumberController );\n\t\tvar _this = possibleConstructorReturn( this, ( NumberController.__proto__ || Object.getPrototypeOf( NumberController ) ).call( this, object, property ) );\n\t\tvar _params = params || {};\n\t\t_this.__min = _params.min;\n\t\t_this.__max = _params.max;\n\t\t_this.__step = _params.step;\n\t\tif ( Common.isUndefined( _this.__step ) ) {\n\n\t\t\tif ( _this.initialValue === 0 ) {\n\n\t\t\t\t_this.__impliedStep = 1;\n\n\t\t\t} else {\n\n\t\t\t\t_this.__impliedStep = Math.pow( 10, Math.floor( Math.log( Math.abs( _this.initialValue ) ) / Math.LN10 ) ) / 10;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t_this.__impliedStep = _this.__step;\n\n\t\t}\n\t\t_this.__precision = numDecimals( _this.__impliedStep );\n\t\treturn _this;\n\n\t}\n\tcreateClass( NumberController, [ {\n\t\tkey: 'setValue',\n\t\tvalue: function setValue( v ) {\n\n\t\t\tvar _v = v;\n\t\t\tif ( this.__min !== undefined && _v < this.__min ) {\n\n\t\t\t\t_v = this.__min;\n\n\t\t\t} else if ( this.__max !== undefined && _v > this.__max ) {\n\n\t\t\t\t_v = this.__max;\n\n\t\t\t}\n\t\t\tif ( this.__step !== undefined && _v % this.__step !== 0 ) {\n\n\t\t\t\t_v = Math.round( _v / this.__step ) * this.__step;\n\n\t\t\t}\n\t\t\treturn get( NumberController.prototype.__proto__ || Object.getPrototypeOf( NumberController.prototype ), 'setValue', this ).call( this, _v );\n\n\t\t}\n\t}, {\n\t\tkey: 'min',\n\t\tvalue: function min( minValue ) {\n\n\t\t\tthis.__min = minValue;\n\t\t\treturn this;\n\n\t\t}\n\t}, {\n\t\tkey: 'max',\n\t\tvalue: function max( maxValue ) {\n\n\t\t\tthis.__max = maxValue;\n\t\t\treturn this;\n\n\t\t}\n\t}, {\n\t\tkey: 'step',\n\t\tvalue: function step( stepValue ) {\n\n\t\t\tthis.__step = stepValue;\n\t\t\tthis.__impliedStep = stepValue;\n\t\t\tthis.__precision = numDecimals( stepValue );\n\t\t\treturn this;\n\n\t\t}\n\t} ] );\n\treturn NumberController;\n\n}( Controller );\n\nfunction roundToDecimal( value, decimals ) {\n\n\tvar tenTo = Math.pow( 10, decimals );\n\treturn Math.round( value * tenTo ) / tenTo;\n\n}\nvar NumberControllerBox = function ( _NumberController ) {\n\n\tinherits( NumberControllerBox, _NumberController );\n\tfunction NumberControllerBox( object, property, params ) {\n\n\t\tclassCallCheck( this, NumberControllerBox );\n\t\tvar _this2 = possibleConstructorReturn( this, ( NumberControllerBox.__proto__ || Object.getPrototypeOf( NumberControllerBox ) ).call( this, object, property, params ) );\n\t\t_this2.__truncationSuspended = false;\n\t\tvar _this = _this2;\n\t\tvar prevY = void 0;\n\t\tfunction onChange() {\n\n\t\t\tvar attempted = parseFloat( _this.__input.value );\n\t\t\tif ( ! Common.isNaN( attempted ) ) {\n\n\t\t\t\t_this.setValue( attempted );\n\n\t\t\t}\n\n\t\t}\n\t\tfunction onFinish() {\n\n\t\t\tif ( _this.__onFinishChange ) {\n\n\t\t\t\t_this.__onFinishChange.call( _this, _this.getValue() );\n\n\t\t\t}\n\n\t\t}\n\t\tfunction onBlur() {\n\n\t\t\tonFinish();\n\n\t\t}\n\t\tfunction onMouseDrag( e ) {\n\n\t\t\tvar diff = prevY - e.clientY;\n\t\t\t_this.setValue( _this.getValue() + diff * _this.__impliedStep );\n\t\t\tprevY = e.clientY;\n\n\t\t}\n\t\tfunction onMouseUp() {\n\n\t\t\tdom.unbind( window, 'mousemove', onMouseDrag );\n\t\t\tdom.unbind( window, 'mouseup', onMouseUp );\n\t\t\tonFinish();\n\n\t\t}\n\t\tfunction onMouseDown( e ) {\n\n\t\t\tdom.bind( window, 'mousemove', onMouseDrag );\n\t\t\tdom.bind( window, 'mouseup', onMouseUp );\n\t\t\tprevY = e.clientY;\n\n\t\t}\n\t\t_this2.__input = document.createElement( 'input' );\n\t\t_this2.__input.setAttribute( 'type', 'text' );\n\t\tdom.bind( _this2.__input, 'change', onChange );\n\t\tdom.bind( _this2.__input, 'blur', onBlur );\n\t\tdom.bind( _this2.__input, 'mousedown', onMouseDown );\n\t\tdom.bind( _this2.__input, 'keydown', function ( e ) {\n\n\t\t\tif ( e.keyCode === 13 ) {\n\n\t\t\t\t_this.__truncationSuspended = true;\n\t\t\t\tthis.blur();\n\t\t\t\t_this.__truncationSuspended = false;\n\t\t\t\tonFinish();\n\n\t\t\t}\n\n\t\t} );\n\t\t_this2.updateDisplay();\n\t\t_this2.domElement.appendChild( _this2.__input );\n\t\treturn _this2;\n\n\t}\n\tcreateClass( NumberControllerBox, [ {\n\t\tkey: 'updateDisplay',\n\t\tvalue: function updateDisplay() {\n\n\t\t\tthis.__input.value = this.__truncationSuspended ? this.getValue() : roundToDecimal( this.getValue(), this.__precision );\n\t\t\treturn get( NumberControllerBox.prototype.__proto__ || Object.getPrototypeOf( NumberControllerBox.prototype ), 'updateDisplay', this ).call( this );\n\n\t\t}\n\t} ] );\n\treturn NumberControllerBox;\n\n}( NumberController );\n\nfunction map( v, i1, i2, o1, o2 ) {\n\n\treturn o1 + ( o2 - o1 ) * ( ( v - i1 ) / ( i2 - i1 ) );\n\n}\nvar NumberControllerSlider = function ( _NumberController ) {\n\n\tinherits( NumberControllerSlider, _NumberController );\n\tfunction NumberControllerSlider( object, property, min, max, step ) {\n\n\t\tclassCallCheck( this, NumberControllerSlider );\n\t\tvar _this2 = possibleConstructorReturn( this, ( NumberControllerSlider.__proto__ || Object.getPrototypeOf( NumberControllerSlider ) ).call( this, object, property, { min: min, max: max, step: step } ) );\n\t\tvar _this = _this2;\n\t\t_this2.__background = document.createElement( 'div' );\n\t\t_this2.__foreground = document.createElement( 'div' );\n\t\tdom.bind( _this2.__background, 'mousedown', onMouseDown );\n\t\tdom.bind( _this2.__background, 'touchstart', onTouchStart );\n\t\tdom.addClass( _this2.__background, 'slider' );\n\t\tdom.addClass( _this2.__foreground, 'slider-fg' );\n\t\tfunction onMouseDown( e ) {\n\n\t\t\tdocument.activeElement.blur();\n\t\t\tdom.bind( window, 'mousemove', onMouseDrag );\n\t\t\tdom.bind( window, 'mouseup', onMouseUp );\n\t\t\tonMouseDrag( e );\n\n\t\t}\n\t\tfunction onMouseDrag( e ) {\n\n\t\t\te.preventDefault();\n\t\t\tvar bgRect = _this.__background.getBoundingClientRect();\n\t\t\t_this.setValue( map( e.clientX, bgRect.left, bgRect.right, _this.__min, _this.__max ) );\n\t\t\treturn false;\n\n\t\t}\n\t\tfunction onMouseUp() {\n\n\t\t\tdom.unbind( window, 'mousemove', onMouseDrag );\n\t\t\tdom.unbind( window, 'mouseup', onMouseUp );\n\t\t\tif ( _this.__onFinishChange ) {\n\n\t\t\t\t_this.__onFinishChange.call( _this, _this.getValue() );\n\n\t\t\t}\n\n\t\t}\n\t\tfunction onTouchStart( e ) {\n\n\t\t\tif ( e.touches.length !== 1 ) {\n\n\t\t\t\treturn;\n\n\t\t\t}\n\t\t\tdom.bind( window, 'touchmove', onTouchMove );\n\t\t\tdom.bind( window, 'touchend', onTouchEnd );\n\t\t\tonTouchMove( e );\n\n\t\t}\n\t\tfunction onTouchMove( e ) {\n\n\t\t\tvar clientX = e.touches[ 0 ].clientX;\n\t\t\tvar bgRect = _this.__background.getBoundingClientRect();\n\t\t\t_this.setValue( map( clientX, bgRect.left, bgRect.right, _this.__min, _this.__max ) );\n\n\t\t}\n\t\tfunction onTouchEnd() {\n\n\t\t\tdom.unbind( window, 'touchmove', onTouchMove );\n\t\t\tdom.unbind( window, 'touchend', onTouchEnd );\n\t\t\tif ( _this.__onFinishChange ) {\n\n\t\t\t\t_this.__onFinishChange.call( _this, _this.getValue() );\n\n\t\t\t}\n\n\t\t}\n\t\t_this2.updateDisplay();\n\t\t_this2.__background.appendChild( _this2.__foreground );\n\t\t_this2.domElement.appendChild( _this2.__background );\n\t\treturn _this2;\n\n\t}\n\tcreateClass( NumberControllerSlider, [ {\n\t\tkey: 'updateDisplay',\n\t\tvalue: function updateDisplay() {\n\n\t\t\tvar pct = ( this.getValue() - this.__min ) / ( this.__max - this.__min );\n\t\t\tthis.__foreground.style.width = pct * 100 + '%';\n\t\t\treturn get( NumberControllerSlider.prototype.__proto__ || Object.getPrototypeOf( NumberControllerSlider.prototype ), 'updateDisplay', this ).call( this );\n\n\t\t}\n\t} ] );\n\treturn NumberControllerSlider;\n\n}( NumberController );\n\nvar FunctionController = function ( _Controller ) {\n\n\tinherits( FunctionController, _Controller );\n\tfunction FunctionController( object, property, text ) {\n\n\t\tclassCallCheck( this, FunctionController );\n\t\tvar _this2 = possibleConstructorReturn( this, ( FunctionController.__proto__ || Object.getPrototypeOf( FunctionController ) ).call( this, object, property ) );\n\t\tvar _this = _this2;\n\t\t_this2.__button = document.createElement( 'div' );\n\t\t_this2.__button.innerHTML = text === undefined ? 'Fire' : text;\n\t\tdom.bind( _this2.__button, 'click', function ( e ) {\n\n\t\t\te.preventDefault();\n\t\t\t_this.fire();\n\t\t\treturn false;\n\n\t\t} );\n\t\tdom.addClass( _this2.__button, 'button' );\n\t\t_this2.domElement.appendChild( _this2.__button );\n\t\treturn _this2;\n\n\t}\n\tcreateClass( FunctionController, [ {\n\t\tkey: 'fire',\n\t\tvalue: function fire() {\n\n\t\t\tif ( this.__onChange ) {\n\n\t\t\t\tthis.__onChange.call( this );\n\n\t\t\t}\n\t\t\tthis.getValue().call( this.object );\n\t\t\tif ( this.__onFinishChange ) {\n\n\t\t\t\tthis.__onFinishChange.call( this, this.getValue() );\n\n\t\t\t}\n\n\t\t}\n\t} ] );\n\treturn FunctionController;\n\n}( Controller );\n\nvar ColorController = function ( _Controller ) {\n\n\tinherits( ColorController, _Controller );\n\tfunction ColorController( object, property ) {\n\n\t\tclassCallCheck( this, ColorController );\n\t\tvar _this2 = possibleConstructorReturn( this, ( ColorController.__proto__ || Object.getPrototypeOf( ColorController ) ).call( this, object, property ) );\n\t\t_this2.__color = new Color( _this2.getValue() );\n\t\t_this2.__temp = new Color( 0 );\n\t\tvar _this = _this2;\n\t\t_this2.domElement = document.createElement( 'div' );\n\t\tdom.makeSelectable( _this2.domElement, false );\n\t\t_this2.__selector = document.createElement( 'div' );\n\t\t_this2.__selector.className = 'selector';\n\t\t_this2.__saturation_field = document.createElement( 'div' );\n\t\t_this2.__saturation_field.className = 'saturation-field';\n\t\t_this2.__field_knob = document.createElement( 'div' );\n\t\t_this2.__field_knob.className = 'field-knob';\n\t\t_this2.__field_knob_border = '2px solid ';\n\t\t_this2.__hue_knob = document.createElement( 'div' );\n\t\t_this2.__hue_knob.className = 'hue-knob';\n\t\t_this2.__hue_field = document.createElement( 'div' );\n\t\t_this2.__hue_field.className = 'hue-field';\n\t\t_this2.__input = document.createElement( 'input' );\n\t\t_this2.__input.type = 'text';\n\t\t_this2.__input_textShadow = '0 1px 1px ';\n\t\tdom.bind( _this2.__input, 'keydown', function ( e ) {\n\n\t\t\tif ( e.keyCode === 13 ) {\n\n\t\t\t\tonBlur.call( this );\n\n\t\t\t}\n\n\t\t} );\n\t\tdom.bind( _this2.__input, 'blur', onBlur );\n\t\tdom.bind( _this2.__selector, 'mousedown', function () {\n\n\t\t\tdom.addClass( this, 'drag' ).bind( window, 'mouseup', function () {\n\n\t\t\t\tdom.removeClass( _this.__selector, 'drag' );\n\n\t\t\t} );\n\n\t\t} );\n\t\tdom.bind( _this2.__selector, 'touchstart', function () {\n\n\t\t\tdom.addClass( this, 'drag' ).bind( window, 'touchend', function () {\n\n\t\t\t\tdom.removeClass( _this.__selector, 'drag' );\n\n\t\t\t} );\n\n\t\t} );\n\t\tvar valueField = document.createElement( 'div' );\n\t\tCommon.extend( _this2.__selector.style, {\n\t\t\twidth: '122px',\n\t\t\theight: '102px',\n\t\t\tpadding: '3px',\n\t\t\tbackgroundColor: '#222',\n\t\t\tboxShadow: '0px 1px 3px rgba(0,0,0,0.3)'\n\t\t} );\n\t\tCommon.extend( _this2.__field_knob.style, {\n\t\t\tposition: 'absolute',\n\t\t\twidth: '12px',\n\t\t\theight: '12px',\n\t\t\tborder: _this2.__field_knob_border + ( _this2.__color.v < 0.5 ? '#fff' : '#000' ),\n\t\t\tboxShadow: '0px 1px 3px rgba(0,0,0,0.5)',\n\t\t\tborderRadius: '12px',\n\t\t\tzIndex: 1\n\t\t} );\n\t\tCommon.extend( _this2.__hue_knob.style, {\n\t\t\tposition: 'absolute',\n\t\t\twidth: '15px',\n\t\t\theight: '2px',\n\t\t\tborderRight: '4px solid #fff',\n\t\t\tzIndex: 1\n\t\t} );\n\t\tCommon.extend( _this2.__saturation_field.style, {\n\t\t\twidth: '100px',\n\t\t\theight: '100px',\n\t\t\tborder: '1px solid #555',\n\t\t\tmarginRight: '3px',\n\t\t\tdisplay: 'inline-block',\n\t\t\tcursor: 'pointer'\n\t\t} );\n\t\tCommon.extend( valueField.style, {\n\t\t\twidth: '100%',\n\t\t\theight: '100%',\n\t\t\tbackground: 'none'\n\t\t} );\n\t\tlinearGradient( valueField, 'top', 'rgba(0,0,0,0)', '#000' );\n\t\tCommon.extend( _this2.__hue_field.style, {\n\t\t\twidth: '15px',\n\t\t\theight: '100px',\n\t\t\tborder: '1px solid #555',\n\t\t\tcursor: 'ns-resize',\n\t\t\tposition: 'absolute',\n\t\t\ttop: '3px',\n\t\t\tright: '3px'\n\t\t} );\n\t\thueGradient( _this2.__hue_field );\n\t\tCommon.extend( _this2.__input.style, {\n\t\t\toutline: 'none',\n\t\t\ttextAlign: 'center',\n\t\t\tcolor: '#fff',\n\t\t\tborder: 0,\n\t\t\tfontWeight: 'bold',\n\t\t\ttextShadow: _this2.__input_textShadow + 'rgba(0,0,0,0.7)'\n\t\t} );\n\t\tdom.bind( _this2.__saturation_field, 'mousedown', fieldDown );\n\t\tdom.bind( _this2.__saturation_field, 'touchstart', fieldDown );\n\t\tdom.bind( _this2.__field_knob, 'mousedown', fieldDown );\n\t\tdom.bind( _this2.__field_knob, 'touchstart', fieldDown );\n\t\tdom.bind( _this2.__hue_field, 'mousedown', fieldDownH );\n\t\tdom.bind( _this2.__hue_field, 'touchstart', fieldDownH );\n\t\tfunction fieldDown( e ) {\n\n\t\t\tsetSV( e );\n\t\t\tdom.bind( window, 'mousemove', setSV );\n\t\t\tdom.bind( window, 'touchmove', setSV );\n\t\t\tdom.bind( window, 'mouseup', fieldUpSV );\n\t\t\tdom.bind( window, 'touchend', fieldUpSV );\n\n\t\t}\n\t\tfunction fieldDownH( e ) {\n\n\t\t\tsetH( e );\n\t\t\tdom.bind( window, 'mousemove', setH );\n\t\t\tdom.bind( window, 'touchmove', setH );\n\t\t\tdom.bind( window, 'mouseup', fieldUpH );\n\t\t\tdom.bind( window, 'touchend', fieldUpH );\n\n\t\t}\n\t\tfunction fieldUpSV() {\n\n\t\t\tdom.unbind( window, 'mousemove', setSV );\n\t\t\tdom.unbind( window, 'touchmove', setSV );\n\t\t\tdom.unbind( window, 'mouseup', fieldUpSV );\n\t\t\tdom.unbind( window, 'touchend', fieldUpSV );\n\t\t\tonFinish();\n\n\t\t}\n\t\tfunction fieldUpH() {\n\n\t\t\tdom.unbind( window, 'mousemove', setH );\n\t\t\tdom.unbind( window, 'touchmove', setH );\n\t\t\tdom.unbind( window, 'mouseup', fieldUpH );\n\t\t\tdom.unbind( window, 'touchend', fieldUpH );\n\t\t\tonFinish();\n\n\t\t}\n\t\tfunction onBlur() {\n\n\t\t\tvar i = interpret( this.value );\n\t\t\tif ( i !== false ) {\n\n\t\t\t\t_this.__color.__state = i;\n\t\t\t\t_this.setValue( _this.__color.toOriginal() );\n\n\t\t\t} else {\n\n\t\t\t\tthis.value = _this.__color.toString();\n\n\t\t\t}\n\n\t\t}\n\t\tfunction onFinish() {\n\n\t\t\tif ( _this.__onFinishChange ) {\n\n\t\t\t\t_this.__onFinishChange.call( _this, _this.__color.toOriginal() );\n\n\t\t\t}\n\n\t\t}\n\t\t_this2.__saturation_field.appendChild( valueField );\n\t\t_this2.__selector.appendChild( _this2.__field_knob );\n\t\t_this2.__selector.appendChild( _this2.__saturation_field );\n\t\t_this2.__selector.appendChild( _this2.__hue_field );\n\t\t_this2.__hue_field.appendChild( _this2.__hue_knob );\n\t\t_this2.domElement.appendChild( _this2.__input );\n\t\t_this2.domElement.appendChild( _this2.__selector );\n\t\t_this2.updateDisplay();\n\t\tfunction setSV( e ) {\n\n\t\t\tif ( e.type.indexOf( 'touch' ) === - 1 ) {\n\n\t\t\t\te.preventDefault();\n\n\t\t\t}\n\t\t\tvar fieldRect = _this.__saturation_field.getBoundingClientRect();\n\t\t\tvar _ref = e.touches && e.touches[ 0 ] || e,\n\t\t\t\tclientX = _ref.clientX,\n\t\t\t\tclientY = _ref.clientY;\n\t\t\tvar s = ( clientX - fieldRect.left ) / ( fieldRect.right - fieldRect.left );\n\t\t\tvar v = 1 - ( clientY - fieldRect.top ) / ( fieldRect.bottom - fieldRect.top );\n\t\t\tif ( v > 1 ) {\n\n\t\t\t\tv = 1;\n\n\t\t\t} else if ( v < 0 ) {\n\n\t\t\t\tv = 0;\n\n\t\t\t}\n\t\t\tif ( s > 1 ) {\n\n\t\t\t\ts = 1;\n\n\t\t\t} else if ( s < 0 ) {\n\n\t\t\t\ts = 0;\n\n\t\t\t}\n\t\t\t_this.__color.v = v;\n\t\t\t_this.__color.s = s;\n\t\t\t_this.setValue( _this.__color.toOriginal() );\n\t\t\treturn false;\n\n\t\t}\n\t\tfunction setH( e ) {\n\n\t\t\tif ( e.type.indexOf( 'touch' ) === - 1 ) {\n\n\t\t\t\te.preventDefault();\n\n\t\t\t}\n\t\t\tvar fieldRect = _this.__hue_field.getBoundingClientRect();\n\t\t\tvar _ref2 = e.touches && e.touches[ 0 ] || e,\n\t\t\t\tclientY = _ref2.clientY;\n\t\t\tvar h = 1 - ( clientY - fieldRect.top ) / ( fieldRect.bottom - fieldRect.top );\n\t\t\tif ( h > 1 ) {\n\n\t\t\t\th = 1;\n\n\t\t\t} else if ( h < 0 ) {\n\n\t\t\t\th = 0;\n\n\t\t\t}\n\t\t\t_this.__color.h = h * 360;\n\t\t\t_this.setValue( _this.__color.toOriginal() );\n\t\t\treturn false;\n\n\t\t}\n\t\treturn _this2;\n\n\t}\n\tcreateClass( ColorController, [ {\n\t\tkey: 'updateDisplay',\n\t\tvalue: function updateDisplay() {\n\n\t\t\tvar i = interpret( this.getValue() );\n\t\t\tif ( i !== false ) {\n\n\t\t\t\tvar mismatch = false;\n\t\t\t\tCommon.each( Color.COMPONENTS, function ( component ) {\n\n\t\t\t\t\tif ( ! Common.isUndefined( i[ component ] ) && ! Common.isUndefined( this.__color.__state[ component ] ) && i[ component ] !== this.__color.__state[ component ] ) {\n\n\t\t\t\t\t\tmismatch = true;\n\t\t\t\t\t\treturn {};\n\n\t\t\t\t\t}\n\n\t\t\t\t}, this );\n\t\t\t\tif ( mismatch ) {\n\n\t\t\t\t\tCommon.extend( this.__color.__state, i );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t\tCommon.extend( this.__temp.__state, this.__color.__state );\n\t\t\tthis.__temp.a = 1;\n\t\t\tvar flip = this.__color.v < 0.5 || this.__color.s > 0.5 ? 255 : 0;\n\t\t\tvar _flip = 255 - flip;\n\t\t\tCommon.extend( this.__field_knob.style, {\n\t\t\t\tmarginLeft: 100 * this.__color.s - 7 + 'px',\n\t\t\t\tmarginTop: 100 * ( 1 - this.__color.v ) - 7 + 'px',\n\t\t\t\tbackgroundColor: this.__temp.toHexString(),\n\t\t\t\tborder: this.__field_knob_border + 'rgb(' + flip + ',' + flip + ',' + flip + ')'\n\t\t\t} );\n\t\t\tthis.__hue_knob.style.marginTop = ( 1 - this.__color.h / 360 ) * 100 + 'px';\n\t\t\tthis.__temp.s = 1;\n\t\t\tthis.__temp.v = 1;\n\t\t\tlinearGradient( this.__saturation_field, 'left', '#fff', this.__temp.toHexString() );\n\t\t\tthis.__input.value = this.__color.toString();\n\t\t\tCommon.extend( this.__input.style, {\n\t\t\t\tbackgroundColor: this.__color.toHexString(),\n\t\t\t\tcolor: 'rgb(' + flip + ',' + flip + ',' + flip + ')',\n\t\t\t\ttextShadow: this.__input_textShadow + 'rgba(' + _flip + ',' + _flip + ',' + _flip + ',.7)'\n\t\t\t} );\n\n\t\t}\n\t} ] );\n\treturn ColorController;\n\n}( Controller );\nvar vendors = [ '-moz-', '-o-', '-webkit-', '-ms-', '' ];\nfunction linearGradient( elem, x, a, b ) {\n\n\telem.style.background = '';\n\tCommon.each( vendors, function ( vendor ) {\n\n\t\telem.style.cssText += 'background: ' + vendor + 'linear-gradient(' + x + ', ' + a + ' 0%, ' + b + ' 100%); ';\n\n\t} );\n\n}\nfunction hueGradient( elem ) {\n\n\telem.style.background = '';\n\telem.style.cssText += 'background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);';\n\telem.style.cssText += 'background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);';\n\telem.style.cssText += 'background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);';\n\telem.style.cssText += 'background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);';\n\telem.style.cssText += 'background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);';\n\n}\n\nvar css = {\n\tload: function load( url, indoc ) {\n\n\t\tvar doc = indoc || document;\n\t\tvar link = doc.createElement( 'link' );\n\t\tlink.type = 'text/css';\n\t\tlink.rel = 'stylesheet';\n\t\tlink.href = url;\n\t\tdoc.getElementsByTagName( 'head' )[ 0 ].appendChild( link );\n\n\t},\n\tinject: function inject( cssContent, indoc ) {\n\n\t\tvar doc = indoc || document;\n\t\tvar injected = document.createElement( 'style' );\n\t\tinjected.type = 'text/css';\n\t\tinjected.innerHTML = cssContent;\n\t\tvar head = doc.getElementsByTagName( 'head' )[ 0 ];\n\t\ttry {\n\n\t\t\thead.appendChild( injected );\n\n\t\t} catch ( e ) {\n\t\t}\n\n\t}\n};\n\nvar saveDialogContents = \"<div id=\\\"dg-save\\\" class=\\\"dg dialogue\\\">\\n\\n  Here's the new load parameter for your <code>GUI</code>'s constructor:\\n\\n  <textarea id=\\\"dg-new-constructor\\\"></textarea>\\n\\n  <div id=\\\"dg-save-locally\\\">\\n\\n    <input id=\\\"dg-local-storage\\\" type=\\\"checkbox\\\"/> Automatically save\\n    values to <code>localStorage</code> on exit.\\n\\n    <div id=\\\"dg-local-explain\\\">The values saved to <code>localStorage</code> will\\n      override those passed to <code>dat.GUI</code>'s constructor. This makes it\\n      easier to work incrementally, but <code>localStorage</code> is fragile,\\n      and your friends may not see the same values you do.\\n\\n    </div>\\n\\n  </div>\\n\\n</div>\";\n\nvar ControllerFactory = function ControllerFactory( object, property ) {\n\n\tvar initialValue = object[ property ];\n\tif ( Common.isArray( arguments[ 2 ] ) || Common.isObject( arguments[ 2 ] ) ) {\n\n\t\treturn new OptionController( object, property, arguments[ 2 ] );\n\n\t}\n\tif ( Common.isNumber( initialValue ) ) {\n\n\t\tif ( Common.isNumber( arguments[ 2 ] ) && Common.isNumber( arguments[ 3 ] ) ) {\n\n\t\t\tif ( Common.isNumber( arguments[ 4 ] ) ) {\n\n\t\t\t\treturn new NumberControllerSlider( object, property, arguments[ 2 ], arguments[ 3 ], arguments[ 4 ] );\n\n\t\t\t}\n\t\t\treturn new NumberControllerSlider( object, property, arguments[ 2 ], arguments[ 3 ] );\n\n\t\t}\n\t\tif ( Common.isNumber( arguments[ 4 ] ) ) {\n\n\t\t\treturn new NumberControllerBox( object, property, { min: arguments[ 2 ], max: arguments[ 3 ], step: arguments[ 4 ] } );\n\n\t\t}\n\t\treturn new NumberControllerBox( object, property, { min: arguments[ 2 ], max: arguments[ 3 ] } );\n\n\t}\n\tif ( Common.isString( initialValue ) ) {\n\n\t\treturn new StringController( object, property );\n\n\t}\n\tif ( Common.isFunction( initialValue ) ) {\n\n\t\treturn new FunctionController( object, property, '' );\n\n\t}\n\tif ( Common.isBoolean( initialValue ) ) {\n\n\t\treturn new BooleanController( object, property );\n\n\t}\n\treturn null;\n\n};\n\nfunction requestAnimationFrame( callback ) {\n\n\tsetTimeout( callback, 1000 / 60 );\n\n}\nvar requestAnimationFrame$1 = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || requestAnimationFrame;\n\nvar CenteredDiv = function () {\n\n\tfunction CenteredDiv() {\n\n\t\tclassCallCheck( this, CenteredDiv );\n\t\tthis.backgroundElement = document.createElement( 'div' );\n\t\tCommon.extend( this.backgroundElement.style, {\n\t\t\tbackgroundColor: 'rgba(0,0,0,0.8)',\n\t\t\ttop: 0,\n\t\t\tleft: 0,\n\t\t\tdisplay: 'none',\n\t\t\tzIndex: '1000',\n\t\t\topacity: 0,\n\t\t\tWebkitTransition: 'opacity 0.2s linear',\n\t\t\ttransition: 'opacity 0.2s linear'\n\t\t} );\n\t\tdom.makeFullscreen( this.backgroundElement );\n\t\tthis.backgroundElement.style.position = 'fixed';\n\t\tthis.domElement = document.createElement( 'div' );\n\t\tCommon.extend( this.domElement.style, {\n\t\t\tposition: 'fixed',\n\t\t\tdisplay: 'none',\n\t\t\tzIndex: '1001',\n\t\t\topacity: 0,\n\t\t\tWebkitTransition: '-webkit-transform 0.2s ease-out, opacity 0.2s linear',\n\t\t\ttransition: 'transform 0.2s ease-out, opacity 0.2s linear'\n\t\t} );\n\t\tdocument.body.appendChild( this.backgroundElement );\n\t\tdocument.body.appendChild( this.domElement );\n\t\tvar _this = this;\n\t\tdom.bind( this.backgroundElement, 'click', function () {\n\n\t\t\t_this.hide();\n\n\t\t} );\n\n\t}\n\tcreateClass( CenteredDiv, [ {\n\t\tkey: 'show',\n\t\tvalue: function show() {\n\n\t\t\tvar _this = this;\n\t\t\tthis.backgroundElement.style.display = 'block';\n\t\t\tthis.domElement.style.display = 'block';\n\t\t\tthis.domElement.style.opacity = 0;\n\t\t\tthis.domElement.style.webkitTransform = 'scale(1.1)';\n\t\t\tthis.layout();\n\t\t\tCommon.defer( function () {\n\n\t\t\t\t_this.backgroundElement.style.opacity = 1;\n\t\t\t\t_this.domElement.style.opacity = 1;\n\t\t\t\t_this.domElement.style.webkitTransform = 'scale(1)';\n\n\t\t\t} );\n\n\t\t}\n\t}, {\n\t\tkey: 'hide',\n\t\tvalue: function hide() {\n\n\t\t\tvar _this = this;\n\t\t\tvar hide = function hide() {\n\n\t\t\t\t_this.domElement.style.display = 'none';\n\t\t\t\t_this.backgroundElement.style.display = 'none';\n\t\t\t\tdom.unbind( _this.domElement, 'webkitTransitionEnd', hide );\n\t\t\t\tdom.unbind( _this.domElement, 'transitionend', hide );\n\t\t\t\tdom.unbind( _this.domElement, 'oTransitionEnd', hide );\n\n\t\t\t};\n\t\t\tdom.bind( this.domElement, 'webkitTransitionEnd', hide );\n\t\t\tdom.bind( this.domElement, 'transitionend', hide );\n\t\t\tdom.bind( this.domElement, 'oTransitionEnd', hide );\n\t\t\tthis.backgroundElement.style.opacity = 0;\n\t\t\tthis.domElement.style.opacity = 0;\n\t\t\tthis.domElement.style.webkitTransform = 'scale(1.1)';\n\n\t\t}\n\t}, {\n\t\tkey: 'layout',\n\t\tvalue: function layout() {\n\n\t\t\tthis.domElement.style.left = window.innerWidth / 2 - dom.getWidth( this.domElement ) / 2 + 'px';\n\t\t\tthis.domElement.style.top = window.innerHeight / 2 - dom.getHeight( this.domElement ) / 2 + 'px';\n\n\t\t}\n\t} ] );\n\treturn CenteredDiv;\n\n}();\n\nvar styleSheet = ___$insertStyle( \".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\\n\" );\n\ncss.inject( styleSheet );\nvar CSS_NAMESPACE = 'dg';\nvar HIDE_KEY_CODE = 72;\nvar CLOSE_BUTTON_HEIGHT = 20;\nvar DEFAULT_DEFAULT_PRESET_NAME = 'Default';\nvar SUPPORTS_LOCAL_STORAGE = function () {\n\n\ttry {\n\n\t\treturn !! window.localStorage;\n\n\t} catch ( e ) {\n\n\t\treturn false;\n\n\t}\n\n}();\nvar SAVE_DIALOGUE = void 0;\nvar autoPlaceVirgin = true;\nvar autoPlaceContainer = void 0;\nvar hide = false;\nvar hideableGuis = [];\nvar GUI = function GUI( pars ) {\n\n\tvar _this = this;\n\tvar params = pars || {};\n\tthis.domElement = document.createElement( 'div' );\n\tthis.__ul = document.createElement( 'ul' );\n\tthis.domElement.appendChild( this.__ul );\n\tdom.addClass( this.domElement, CSS_NAMESPACE );\n\tthis.__folders = {};\n\tthis.__controllers = [];\n\tthis.__rememberedObjects = [];\n\tthis.__rememberedObjectIndecesToControllers = [];\n\tthis.__listening = [];\n\tparams = Common.defaults( params, {\n\t\tcloseOnTop: false,\n\t\tautoPlace: true,\n\t\twidth: GUI.DEFAULT_WIDTH\n\t} );\n\tparams = Common.defaults( params, {\n\t\tresizable: params.autoPlace,\n\t\thideable: params.autoPlace\n\t} );\n\tif ( ! Common.isUndefined( params.load ) ) {\n\n\t\tif ( params.preset ) {\n\n\t\t\tparams.load.preset = params.preset;\n\n\t\t}\n\n\t} else {\n\n\t\tparams.load = { preset: DEFAULT_DEFAULT_PRESET_NAME };\n\n\t}\n\tif ( Common.isUndefined( params.parent ) && params.hideable ) {\n\n\t\thideableGuis.push( this );\n\n\t}\n\tparams.resizable = Common.isUndefined( params.parent ) && params.resizable;\n\tif ( params.autoPlace && Common.isUndefined( params.scrollable ) ) {\n\n\t\tparams.scrollable = true;\n\n\t}\n\tvar useLocalStorage = SUPPORTS_LOCAL_STORAGE && localStorage.getItem( getLocalStorageHash( this, 'isLocal' ) ) === 'true';\n\tvar saveToLocalStorage = void 0;\n\tvar titleRow = void 0;\n\tObject.defineProperties( this,\n\t\t{\n\t\t\tparent: {\n\t\t\t\tget: function get$$1() {\n\n\t\t\t\t\treturn params.parent;\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tscrollable: {\n\t\t\t\tget: function get$$1() {\n\n\t\t\t\t\treturn params.scrollable;\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tautoPlace: {\n\t\t\t\tget: function get$$1() {\n\n\t\t\t\t\treturn params.autoPlace;\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tcloseOnTop: {\n\t\t\t\tget: function get$$1() {\n\n\t\t\t\t\treturn params.closeOnTop;\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tpreset: {\n\t\t\t\tget: function get$$1() {\n\n\t\t\t\t\tif ( _this.parent ) {\n\n\t\t\t\t\t\treturn _this.getRoot().preset;\n\n\t\t\t\t\t}\n\t\t\t\t\treturn params.load.preset;\n\n\t\t\t\t},\n\t\t\t\tset: function set$$1( v ) {\n\n\t\t\t\t\tif ( _this.parent ) {\n\n\t\t\t\t\t\t_this.getRoot().preset = v;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tparams.load.preset = v;\n\n\t\t\t\t\t}\n\t\t\t\t\tsetPresetSelectIndex( this );\n\t\t\t\t\t_this.revert();\n\n\t\t\t\t}\n\t\t\t},\n\t\t\twidth: {\n\t\t\t\tget: function get$$1() {\n\n\t\t\t\t\treturn params.width;\n\n\t\t\t\t},\n\t\t\t\tset: function set$$1( v ) {\n\n\t\t\t\t\tparams.width = v;\n\t\t\t\t\tsetWidth( _this, v );\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tname: {\n\t\t\t\tget: function get$$1() {\n\n\t\t\t\t\treturn params.name;\n\n\t\t\t\t},\n\t\t\t\tset: function set$$1( v ) {\n\n\t\t\t\t\tparams.name = v;\n\t\t\t\t\tif ( titleRow ) {\n\n\t\t\t\t\t\ttitleRow.innerHTML = params.name;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tclosed: {\n\t\t\t\tget: function get$$1() {\n\n\t\t\t\t\treturn params.closed;\n\n\t\t\t\t},\n\t\t\t\tset: function set$$1( v ) {\n\n\t\t\t\t\tparams.closed = v;\n\t\t\t\t\tif ( params.closed ) {\n\n\t\t\t\t\t\tdom.addClass( _this.__ul, GUI.CLASS_CLOSED );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tdom.removeClass( _this.__ul, GUI.CLASS_CLOSED );\n\n\t\t\t\t\t}\n\t\t\t\t\tthis.onResize();\n\t\t\t\t\tif ( _this.__closeButton ) {\n\n\t\t\t\t\t\t_this.__closeButton.innerHTML = v ? GUI.TEXT_OPEN : GUI.TEXT_CLOSED;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tload: {\n\t\t\t\tget: function get$$1() {\n\n\t\t\t\t\treturn params.load;\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tuseLocalStorage: {\n\t\t\t\tget: function get$$1() {\n\n\t\t\t\t\treturn useLocalStorage;\n\n\t\t\t\t},\n\t\t\t\tset: function set$$1( bool ) {\n\n\t\t\t\t\tif ( SUPPORTS_LOCAL_STORAGE ) {\n\n\t\t\t\t\t\tuseLocalStorage = bool;\n\t\t\t\t\t\tif ( bool ) {\n\n\t\t\t\t\t\t\tdom.bind( window, 'unload', saveToLocalStorage );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tdom.unbind( window, 'unload', saveToLocalStorage );\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlocalStorage.setItem( getLocalStorageHash( _this, 'isLocal' ), bool );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\tif ( Common.isUndefined( params.parent ) ) {\n\n\t\tthis.closed = params.closed || false;\n\t\tdom.addClass( this.domElement, GUI.CLASS_MAIN );\n\t\tdom.makeSelectable( this.domElement, false );\n\t\tif ( SUPPORTS_LOCAL_STORAGE ) {\n\n\t\t\tif ( useLocalStorage ) {\n\n\t\t\t\t_this.useLocalStorage = true;\n\t\t\t\tvar savedGui = localStorage.getItem( getLocalStorageHash( this, 'gui' ) );\n\t\t\t\tif ( savedGui ) {\n\n\t\t\t\t\tparams.load = JSON.parse( savedGui );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\t\tthis.__closeButton = document.createElement( 'div' );\n\t\tthis.__closeButton.innerHTML = GUI.TEXT_CLOSED;\n\t\tdom.addClass( this.__closeButton, GUI.CLASS_CLOSE_BUTTON );\n\t\tif ( params.closeOnTop ) {\n\n\t\t\tdom.addClass( this.__closeButton, GUI.CLASS_CLOSE_TOP );\n\t\t\tthis.domElement.insertBefore( this.__closeButton, this.domElement.childNodes[ 0 ] );\n\n\t\t} else {\n\n\t\t\tdom.addClass( this.__closeButton, GUI.CLASS_CLOSE_BOTTOM );\n\t\t\tthis.domElement.appendChild( this.__closeButton );\n\n\t\t}\n\t\tdom.bind( this.__closeButton, 'click', function () {\n\n\t\t\t_this.closed = ! _this.closed;\n\n\t\t} );\n\n\t} else {\n\n\t\tif ( params.closed === undefined ) {\n\n\t\t\tparams.closed = true;\n\n\t\t}\n\t\tvar titleRowName = document.createTextNode( params.name );\n\t\tdom.addClass( titleRowName, 'controller-name' );\n\t\ttitleRow = addRow( _this, titleRowName );\n\t\tvar onClickTitle = function onClickTitle( e ) {\n\n\t\t\te.preventDefault();\n\t\t\t_this.closed = ! _this.closed;\n\t\t\treturn false;\n\n\t\t};\n\t\tdom.addClass( this.__ul, GUI.CLASS_CLOSED );\n\t\tdom.addClass( titleRow, 'title' );\n\t\tdom.bind( titleRow, 'click', onClickTitle );\n\t\tif ( ! params.closed ) {\n\n\t\t\tthis.closed = false;\n\n\t\t}\n\n\t}\n\tif ( params.autoPlace ) {\n\n\t\tif ( Common.isUndefined( params.parent ) ) {\n\n\t\t\tif ( autoPlaceVirgin ) {\n\n\t\t\t\tautoPlaceContainer = document.createElement( 'div' );\n\t\t\t\tdom.addClass( autoPlaceContainer, CSS_NAMESPACE );\n\t\t\t\tdom.addClass( autoPlaceContainer, GUI.CLASS_AUTO_PLACE_CONTAINER );\n\t\t\t\tdocument.body.appendChild( autoPlaceContainer );\n\t\t\t\tautoPlaceVirgin = false;\n\n\t\t\t}\n\t\t\tautoPlaceContainer.appendChild( this.domElement );\n\t\t\tdom.addClass( this.domElement, GUI.CLASS_AUTO_PLACE );\n\n\t\t}\n\t\tif ( ! this.parent ) {\n\n\t\t\tsetWidth( _this, params.width );\n\n\t\t}\n\n\t}\n\tthis.__resizeHandler = function () {\n\n\t\t_this.onResizeDebounced();\n\n\t};\n\tdom.bind( window, 'resize', this.__resizeHandler );\n\tdom.bind( this.__ul, 'webkitTransitionEnd', this.__resizeHandler );\n\tdom.bind( this.__ul, 'transitionend', this.__resizeHandler );\n\tdom.bind( this.__ul, 'oTransitionEnd', this.__resizeHandler );\n\tthis.onResize();\n\tif ( params.resizable ) {\n\n\t\taddResizeHandle( this );\n\n\t}\n\tsaveToLocalStorage = function saveToLocalStorage() {\n\n\t\tif ( SUPPORTS_LOCAL_STORAGE && localStorage.getItem( getLocalStorageHash( _this, 'isLocal' ) ) === 'true' ) {\n\n\t\t\tlocalStorage.setItem( getLocalStorageHash( _this, 'gui' ), JSON.stringify( _this.getSaveObject() ) );\n\n\t\t}\n\n\t};\n\tthis.saveToLocalStorageIfPossible = saveToLocalStorage;\n\tfunction resetWidth() {\n\n\t\tvar root = _this.getRoot();\n\t\troot.width += 1;\n\t\tCommon.defer( function () {\n\n\t\t\troot.width -= 1;\n\n\t\t} );\n\n\t}\n\tif ( ! params.parent ) {\n\n\t\tresetWidth();\n\n\t}\n\n};\nGUI.toggleHide = function () {\n\n\thide = ! hide;\n\tCommon.each( hideableGuis, function ( gui ) {\n\n\t\tgui.domElement.style.display = hide ? 'none' : '';\n\n\t} );\n\n};\nGUI.CLASS_AUTO_PLACE = 'a';\nGUI.CLASS_AUTO_PLACE_CONTAINER = 'ac';\nGUI.CLASS_MAIN = 'main';\nGUI.CLASS_CONTROLLER_ROW = 'cr';\nGUI.CLASS_TOO_TALL = 'taller-than-window';\nGUI.CLASS_CLOSED = 'closed';\nGUI.CLASS_CLOSE_BUTTON = 'close-button';\nGUI.CLASS_CLOSE_TOP = 'close-top';\nGUI.CLASS_CLOSE_BOTTOM = 'close-bottom';\nGUI.CLASS_DRAG = 'drag';\nGUI.DEFAULT_WIDTH = 245;\nGUI.TEXT_CLOSED = 'Close Controls';\nGUI.TEXT_OPEN = 'Open Controls';\nGUI._keydownHandler = function ( e ) {\n\n\tif ( document.activeElement.type !== 'text' && ( e.which === HIDE_KEY_CODE || e.keyCode === HIDE_KEY_CODE ) ) {\n\n\t\tGUI.toggleHide();\n\n\t}\n\n};\ndom.bind( window, 'keydown', GUI._keydownHandler, false );\nCommon.extend( GUI.prototype,\n\t{\n\t\tadd: function add( object, property ) {\n\n\t\t\treturn _add( this, object, property, {\n\t\t\t\tfactoryArgs: Array.prototype.slice.call( arguments, 2 )\n\t\t\t} );\n\n\t\t},\n\t\taddColor: function addColor( object, property ) {\n\n\t\t\treturn _add( this, object, property, {\n\t\t\t\tcolor: true\n\t\t\t} );\n\n\t\t},\n\t\tremove: function remove( controller ) {\n\n\t\t\tthis.__ul.removeChild( controller.__li );\n\t\t\tthis.__controllers.splice( this.__controllers.indexOf( controller ), 1 );\n\t\t\tvar _this = this;\n\t\t\tCommon.defer( function () {\n\n\t\t\t\t_this.onResize();\n\n\t\t\t} );\n\n\t\t},\n\t\tdestroy: function destroy() {\n\n\t\t\tif ( this.parent ) {\n\n\t\t\t\tthrow new Error( 'Only the root GUI should be removed with .destroy(). ' + 'For subfolders, use gui.removeFolder(folder) instead.' );\n\n\t\t\t}\n\t\t\tif ( this.autoPlace ) {\n\n\t\t\t\tautoPlaceContainer.removeChild( this.domElement );\n\n\t\t\t}\n\t\t\tvar _this = this;\n\t\t\tCommon.each( this.__folders, function ( subfolder ) {\n\n\t\t\t\t_this.removeFolder( subfolder );\n\n\t\t\t} );\n\t\t\tdom.unbind( window, 'keydown', GUI._keydownHandler, false );\n\t\t\tremoveListeners( this );\n\n\t\t},\n\t\taddFolder: function addFolder( name ) {\n\n\t\t\tif ( this.__folders[ name ] !== undefined ) {\n\n\t\t\t\tthrow new Error( 'You already have a folder in this GUI by the' + ' name \"' + name + '\"' );\n\n\t\t\t}\n\t\t\tvar newGuiParams = { name: name, parent: this };\n\t\t\tnewGuiParams.autoPlace = this.autoPlace;\n\t\t\tif ( this.load &&\n    this.load.folders &&\n    this.load.folders[ name ] ) {\n\n\t\t\t\tnewGuiParams.closed = this.load.folders[ name ].closed;\n\t\t\t\tnewGuiParams.load = this.load.folders[ name ];\n\n\t\t\t}\n\t\t\tvar gui = new GUI( newGuiParams );\n\t\t\tthis.__folders[ name ] = gui;\n\t\t\tvar li = addRow( this, gui.domElement );\n\t\t\tdom.addClass( li, 'folder' );\n\t\t\treturn gui;\n\n\t\t},\n\t\tremoveFolder: function removeFolder( folder ) {\n\n\t\t\tthis.__ul.removeChild( folder.domElement.parentElement );\n\t\t\tdelete this.__folders[ folder.name ];\n\t\t\tif ( this.load &&\n    this.load.folders &&\n    this.load.folders[ folder.name ] ) {\n\n\t\t\t\tdelete this.load.folders[ folder.name ];\n\n\t\t\t}\n\t\t\tremoveListeners( folder );\n\t\t\tvar _this = this;\n\t\t\tCommon.each( folder.__folders, function ( subfolder ) {\n\n\t\t\t\tfolder.removeFolder( subfolder );\n\n\t\t\t} );\n\t\t\tCommon.defer( function () {\n\n\t\t\t\t_this.onResize();\n\n\t\t\t} );\n\n\t\t},\n\t\topen: function open() {\n\n\t\t\tthis.closed = false;\n\n\t\t},\n\t\tclose: function close() {\n\n\t\t\tthis.closed = true;\n\n\t\t},\n\t\thide: function hide() {\n\n\t\t\tthis.domElement.style.display = 'none';\n\n\t\t},\n\t\tshow: function show() {\n\n\t\t\tthis.domElement.style.display = '';\n\n\t\t},\n\t\tonResize: function onResize() {\n\n\t\t\tvar root = this.getRoot();\n\t\t\tif ( root.scrollable ) {\n\n\t\t\t\tvar top = dom.getOffset( root.__ul ).top;\n\t\t\t\tvar h = 0;\n\t\t\t\tCommon.each( root.__ul.childNodes, function ( node ) {\n\n\t\t\t\t\tif ( ! ( root.autoPlace && node === root.__save_row ) ) {\n\n\t\t\t\t\t\th += dom.getHeight( node );\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\t\t\t\tif ( window.innerHeight - top - CLOSE_BUTTON_HEIGHT < h ) {\n\n\t\t\t\t\tdom.addClass( root.domElement, GUI.CLASS_TOO_TALL );\n\t\t\t\t\troot.__ul.style.height = window.innerHeight - top - CLOSE_BUTTON_HEIGHT + 'px';\n\n\t\t\t\t} else {\n\n\t\t\t\t\tdom.removeClass( root.domElement, GUI.CLASS_TOO_TALL );\n\t\t\t\t\troot.__ul.style.height = 'auto';\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t\tif ( root.__resize_handle ) {\n\n\t\t\t\tCommon.defer( function () {\n\n\t\t\t\t\troot.__resize_handle.style.height = root.__ul.offsetHeight + 'px';\n\n\t\t\t\t} );\n\n\t\t\t}\n\t\t\tif ( root.__closeButton ) {\n\n\t\t\t\troot.__closeButton.style.width = root.width + 'px';\n\n\t\t\t}\n\n\t\t},\n\t\tonResizeDebounced: Common.debounce( function () {\n\n\t\t\tthis.onResize();\n\n\t\t}, 50 ),\n\t\tremember: function remember() {\n\n\t\t\tif ( Common.isUndefined( SAVE_DIALOGUE ) ) {\n\n\t\t\t\tSAVE_DIALOGUE = new CenteredDiv();\n\t\t\t\tSAVE_DIALOGUE.domElement.innerHTML = saveDialogContents;\n\n\t\t\t}\n\t\t\tif ( this.parent ) {\n\n\t\t\t\tthrow new Error( 'You can only call remember on a top level GUI.' );\n\n\t\t\t}\n\t\t\tvar _this = this;\n\t\t\tCommon.each( Array.prototype.slice.call( arguments ), function ( object ) {\n\n\t\t\t\tif ( _this.__rememberedObjects.length === 0 ) {\n\n\t\t\t\t\taddSaveMenu( _this );\n\n\t\t\t\t}\n\t\t\t\tif ( _this.__rememberedObjects.indexOf( object ) === - 1 ) {\n\n\t\t\t\t\t_this.__rememberedObjects.push( object );\n\n\t\t\t\t}\n\n\t\t\t} );\n\t\t\tif ( this.autoPlace ) {\n\n\t\t\t\tsetWidth( this, this.width );\n\n\t\t\t}\n\n\t\t},\n\t\tgetRoot: function getRoot() {\n\n\t\t\tvar gui = this;\n\t\t\twhile ( gui.parent ) {\n\n\t\t\t\tgui = gui.parent;\n\n\t\t\t}\n\t\t\treturn gui;\n\n\t\t},\n\t\tgetSaveObject: function getSaveObject() {\n\n\t\t\tvar toReturn = this.load;\n\t\t\ttoReturn.closed = this.closed;\n\t\t\tif ( this.__rememberedObjects.length > 0 ) {\n\n\t\t\t\ttoReturn.preset = this.preset;\n\t\t\t\tif ( ! toReturn.remembered ) {\n\n\t\t\t\t\ttoReturn.remembered = {};\n\n\t\t\t\t}\n\t\t\t\ttoReturn.remembered[ this.preset ] = getCurrentPreset( this );\n\n\t\t\t}\n\t\t\ttoReturn.folders = {};\n\t\t\tCommon.each( this.__folders, function ( element, key ) {\n\n\t\t\t\ttoReturn.folders[ key ] = element.getSaveObject();\n\n\t\t\t} );\n\t\t\treturn toReturn;\n\n\t\t},\n\t\tsave: function save() {\n\n\t\t\tif ( ! this.load.remembered ) {\n\n\t\t\t\tthis.load.remembered = {};\n\n\t\t\t}\n\t\t\tthis.load.remembered[ this.preset ] = getCurrentPreset( this );\n\t\t\tmarkPresetModified( this, false );\n\t\t\tthis.saveToLocalStorageIfPossible();\n\n\t\t},\n\t\tsaveAs: function saveAs( presetName ) {\n\n\t\t\tif ( ! this.load.remembered ) {\n\n\t\t\t\tthis.load.remembered = {};\n\t\t\t\tthis.load.remembered[ DEFAULT_DEFAULT_PRESET_NAME ] = getCurrentPreset( this, true );\n\n\t\t\t}\n\t\t\tthis.load.remembered[ presetName ] = getCurrentPreset( this );\n\t\t\tthis.preset = presetName;\n\t\t\taddPresetOption( this, presetName, true );\n\t\t\tthis.saveToLocalStorageIfPossible();\n\n\t\t},\n\t\trevert: function revert( gui ) {\n\n\t\t\tCommon.each( this.__controllers, function ( controller ) {\n\n\t\t\t\tif ( ! this.getRoot().load.remembered ) {\n\n\t\t\t\t\tcontroller.setValue( controller.initialValue );\n\n\t\t\t\t} else {\n\n\t\t\t\t\trecallSavedValue( gui || this.getRoot(), controller );\n\n\t\t\t\t}\n\t\t\t\tif ( controller.__onFinishChange ) {\n\n\t\t\t\t\tcontroller.__onFinishChange.call( controller, controller.getValue() );\n\n\t\t\t\t}\n\n\t\t\t}, this );\n\t\t\tCommon.each( this.__folders, function ( folder ) {\n\n\t\t\t\tfolder.revert( folder );\n\n\t\t\t} );\n\t\t\tif ( ! gui ) {\n\n\t\t\t\tmarkPresetModified( this.getRoot(), false );\n\n\t\t\t}\n\n\t\t},\n\t\tlisten: function listen( controller ) {\n\n\t\t\tvar init = this.__listening.length === 0;\n\t\t\tthis.__listening.push( controller );\n\t\t\tif ( init ) {\n\n\t\t\t\tupdateDisplays( this.__listening );\n\n\t\t\t}\n\n\t\t},\n\t\tupdateDisplay: function updateDisplay() {\n\n\t\t\tCommon.each( this.__controllers, function ( controller ) {\n\n\t\t\t\tcontroller.updateDisplay();\n\n\t\t\t} );\n\t\t\tCommon.each( this.__folders, function ( folder ) {\n\n\t\t\t\tfolder.updateDisplay();\n\n\t\t\t} );\n\n\t\t}\n\t} );\nfunction addRow( gui, newDom, liBefore ) {\n\n\tvar li = document.createElement( 'li' );\n\tif ( newDom ) {\n\n\t\tli.appendChild( newDom );\n\n\t}\n\tif ( liBefore ) {\n\n\t\tgui.__ul.insertBefore( li, liBefore );\n\n\t} else {\n\n\t\tgui.__ul.appendChild( li );\n\n\t}\n\tgui.onResize();\n\treturn li;\n\n}\nfunction removeListeners( gui ) {\n\n\tdom.unbind( window, 'resize', gui.__resizeHandler );\n\tif ( gui.saveToLocalStorageIfPossible ) {\n\n\t\tdom.unbind( window, 'unload', gui.saveToLocalStorageIfPossible );\n\n\t}\n\n}\nfunction markPresetModified( gui, modified ) {\n\n\tvar opt = gui.__preset_select[ gui.__preset_select.selectedIndex ];\n\tif ( modified ) {\n\n\t\topt.innerHTML = opt.value + '*';\n\n\t} else {\n\n\t\topt.innerHTML = opt.value;\n\n\t}\n\n}\nfunction augmentController( gui, li, controller ) {\n\n\tcontroller.__li = li;\n\tcontroller.__gui = gui;\n\tCommon.extend( controller, {\n\t\toptions: function options( _options ) {\n\n\t\t\tif ( arguments.length > 1 ) {\n\n\t\t\t\tvar nextSibling = controller.__li.nextElementSibling;\n\t\t\t\tcontroller.remove();\n\t\t\t\treturn _add( gui, controller.object, controller.property, {\n\t\t\t\t\tbefore: nextSibling,\n\t\t\t\t\tfactoryArgs: [ Common.toArray( arguments ) ]\n\t\t\t\t} );\n\n\t\t\t}\n\t\t\tif ( Common.isArray( _options ) || Common.isObject( _options ) ) {\n\n\t\t\t\tvar _nextSibling = controller.__li.nextElementSibling;\n\t\t\t\tcontroller.remove();\n\t\t\t\treturn _add( gui, controller.object, controller.property, {\n\t\t\t\t\tbefore: _nextSibling,\n\t\t\t\t\tfactoryArgs: [ _options ]\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t},\n\t\tname: function name( _name ) {\n\n\t\t\tcontroller.__li.firstElementChild.firstElementChild.innerHTML = _name;\n\t\t\treturn controller;\n\n\t\t},\n\t\tlisten: function listen() {\n\n\t\t\tcontroller.__gui.listen( controller );\n\t\t\treturn controller;\n\n\t\t},\n\t\tremove: function remove() {\n\n\t\t\tcontroller.__gui.remove( controller );\n\t\t\treturn controller;\n\n\t\t}\n\t} );\n\tif ( controller instanceof NumberControllerSlider ) {\n\n\t\tvar box = new NumberControllerBox( controller.object, controller.property, { min: controller.__min, max: controller.__max, step: controller.__step } );\n\t\tCommon.each( [ 'updateDisplay', 'onChange', 'onFinishChange', 'step', 'min', 'max' ], function ( method ) {\n\n\t\t\tvar pc = controller[ method ];\n\t\t\tvar pb = box[ method ];\n\t\t\tcontroller[ method ] = box[ method ] = function () {\n\n\t\t\t\tvar args = Array.prototype.slice.call( arguments );\n\t\t\t\tpb.apply( box, args );\n\t\t\t\treturn pc.apply( controller, args );\n\n\t\t\t};\n\n\t\t} );\n\t\tdom.addClass( li, 'has-slider' );\n\t\tcontroller.domElement.insertBefore( box.domElement, controller.domElement.firstElementChild );\n\n\t} else if ( controller instanceof NumberControllerBox ) {\n\n\t\tvar r = function r( returned ) {\n\n\t\t\tif ( Common.isNumber( controller.__min ) && Common.isNumber( controller.__max ) ) {\n\n\t\t\t\tvar oldName = controller.__li.firstElementChild.firstElementChild.innerHTML;\n\t\t\t\tvar wasListening = controller.__gui.__listening.indexOf( controller ) > - 1;\n\t\t\t\tcontroller.remove();\n\t\t\t\tvar newController = _add( gui, controller.object, controller.property, {\n\t\t\t\t\tbefore: controller.__li.nextElementSibling,\n\t\t\t\t\tfactoryArgs: [ controller.__min, controller.__max, controller.__step ]\n\t\t\t\t} );\n\t\t\t\tnewController.name( oldName );\n\t\t\t\tif ( wasListening ) newController.listen();\n\t\t\t\treturn newController;\n\n\t\t\t}\n\t\t\treturn returned;\n\n\t\t};\n\t\tcontroller.min = Common.compose( r, controller.min );\n\t\tcontroller.max = Common.compose( r, controller.max );\n\n\t} else if ( controller instanceof BooleanController ) {\n\n\t\tdom.bind( li, 'click', function () {\n\n\t\t\tdom.fakeEvent( controller.__checkbox, 'click' );\n\n\t\t} );\n\t\tdom.bind( controller.__checkbox, 'click', function ( e ) {\n\n\t\t\te.stopPropagation();\n\n\t\t} );\n\n\t} else if ( controller instanceof FunctionController ) {\n\n\t\tdom.bind( li, 'click', function () {\n\n\t\t\tdom.fakeEvent( controller.__button, 'click' );\n\n\t\t} );\n\t\tdom.bind( li, 'mouseover', function () {\n\n\t\t\tdom.addClass( controller.__button, 'hover' );\n\n\t\t} );\n\t\tdom.bind( li, 'mouseout', function () {\n\n\t\t\tdom.removeClass( controller.__button, 'hover' );\n\n\t\t} );\n\n\t} else if ( controller instanceof ColorController ) {\n\n\t\tdom.addClass( li, 'color' );\n\t\tcontroller.updateDisplay = Common.compose( function ( val ) {\n\n\t\t\tli.style.borderLeftColor = controller.__color.toString();\n\t\t\treturn val;\n\n\t\t}, controller.updateDisplay );\n\t\tcontroller.updateDisplay();\n\n\t}\n\tcontroller.setValue = Common.compose( function ( val ) {\n\n\t\tif ( gui.getRoot().__preset_select && controller.isModified() ) {\n\n\t\t\tmarkPresetModified( gui.getRoot(), true );\n\n\t\t}\n\t\treturn val;\n\n\t}, controller.setValue );\n\n}\nfunction recallSavedValue( gui, controller ) {\n\n\tvar root = gui.getRoot();\n\tvar matchedIndex = root.__rememberedObjects.indexOf( controller.object );\n\tif ( matchedIndex !== - 1 ) {\n\n\t\tvar controllerMap = root.__rememberedObjectIndecesToControllers[ matchedIndex ];\n\t\tif ( controllerMap === undefined ) {\n\n\t\t\tcontrollerMap = {};\n\t\t\troot.__rememberedObjectIndecesToControllers[ matchedIndex ] = controllerMap;\n\n\t\t}\n\t\tcontrollerMap[ controller.property ] = controller;\n\t\tif ( root.load && root.load.remembered ) {\n\n\t\t\tvar presetMap = root.load.remembered;\n\t\t\tvar preset = void 0;\n\t\t\tif ( presetMap[ gui.preset ] ) {\n\n\t\t\t\tpreset = presetMap[ gui.preset ];\n\n\t\t\t} else if ( presetMap[ DEFAULT_DEFAULT_PRESET_NAME ] ) {\n\n\t\t\t\tpreset = presetMap[ DEFAULT_DEFAULT_PRESET_NAME ];\n\n\t\t\t} else {\n\n\t\t\t\treturn;\n\n\t\t\t}\n\t\t\tif ( preset[ matchedIndex ] && preset[ matchedIndex ][ controller.property ] !== undefined ) {\n\n\t\t\t\tvar value = preset[ matchedIndex ][ controller.property ];\n\t\t\t\tcontroller.initialValue = value;\n\t\t\t\tcontroller.setValue( value );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\nfunction _add( gui, object, property, params ) {\n\n\tif ( object[ property ] === undefined ) {\n\n\t\tthrow new Error( 'Object \"' + object + '\" has no property \"' + property + '\"' );\n\n\t}\n\tvar controller = void 0;\n\tif ( params.color ) {\n\n\t\tcontroller = new ColorController( object, property );\n\n\t} else {\n\n\t\tvar factoryArgs = [ object, property ].concat( params.factoryArgs );\n\t\tcontroller = ControllerFactory.apply( gui, factoryArgs );\n\n\t}\n\tif ( params.before instanceof Controller ) {\n\n\t\tparams.before = params.before.__li;\n\n\t}\n\trecallSavedValue( gui, controller );\n\tdom.addClass( controller.domElement, 'c' );\n\tvar name = document.createElement( 'span' );\n\tdom.addClass( name, 'property-name' );\n\tname.innerHTML = controller.property;\n\tvar container = document.createElement( 'div' );\n\tcontainer.appendChild( name );\n\tcontainer.appendChild( controller.domElement );\n\tvar li = addRow( gui, container, params.before );\n\tdom.addClass( li, GUI.CLASS_CONTROLLER_ROW );\n\tif ( controller instanceof ColorController ) {\n\n\t\tdom.addClass( li, 'color' );\n\n\t} else {\n\n\t\tdom.addClass( li, _typeof( controller.getValue() ) );\n\n\t}\n\taugmentController( gui, li, controller );\n\tgui.__controllers.push( controller );\n\treturn controller;\n\n}\nfunction getLocalStorageHash( gui, key ) {\n\n\treturn document.location.href + '.' + key;\n\n}\nfunction addPresetOption( gui, name, setSelected ) {\n\n\tvar opt = document.createElement( 'option' );\n\topt.innerHTML = name;\n\topt.value = name;\n\tgui.__preset_select.appendChild( opt );\n\tif ( setSelected ) {\n\n\t\tgui.__preset_select.selectedIndex = gui.__preset_select.length - 1;\n\n\t}\n\n}\nfunction showHideExplain( gui, explain ) {\n\n\texplain.style.display = gui.useLocalStorage ? 'block' : 'none';\n\n}\nfunction addSaveMenu( gui ) {\n\n\tvar div = gui.__save_row = document.createElement( 'li' );\n\tdom.addClass( gui.domElement, 'has-save' );\n\tgui.__ul.insertBefore( div, gui.__ul.firstChild );\n\tdom.addClass( div, 'save-row' );\n\tvar gears = document.createElement( 'span' );\n\tgears.innerHTML = '&nbsp;';\n\tdom.addClass( gears, 'button gears' );\n\tvar button = document.createElement( 'span' );\n\tbutton.innerHTML = 'Save';\n\tdom.addClass( button, 'button' );\n\tdom.addClass( button, 'save' );\n\tvar button2 = document.createElement( 'span' );\n\tbutton2.innerHTML = 'New';\n\tdom.addClass( button2, 'button' );\n\tdom.addClass( button2, 'save-as' );\n\tvar button3 = document.createElement( 'span' );\n\tbutton3.innerHTML = 'Revert';\n\tdom.addClass( button3, 'button' );\n\tdom.addClass( button3, 'revert' );\n\tvar select = gui.__preset_select = document.createElement( 'select' );\n\tif ( gui.load && gui.load.remembered ) {\n\n\t\tCommon.each( gui.load.remembered, function ( value, key ) {\n\n\t\t\taddPresetOption( gui, key, key === gui.preset );\n\n\t\t} );\n\n\t} else {\n\n\t\taddPresetOption( gui, DEFAULT_DEFAULT_PRESET_NAME, false );\n\n\t}\n\tdom.bind( select, 'change', function () {\n\n\t\tfor ( var index = 0; index < gui.__preset_select.length; index ++ ) {\n\n\t\t\tgui.__preset_select[ index ].innerHTML = gui.__preset_select[ index ].value;\n\n\t\t}\n\t\tgui.preset = this.value;\n\n\t} );\n\tdiv.appendChild( select );\n\tdiv.appendChild( gears );\n\tdiv.appendChild( button );\n\tdiv.appendChild( button2 );\n\tdiv.appendChild( button3 );\n\tif ( SUPPORTS_LOCAL_STORAGE ) {\n\n\t\tvar explain = document.getElementById( 'dg-local-explain' );\n\t\tvar localStorageCheckBox = document.getElementById( 'dg-local-storage' );\n\t\tvar saveLocally = document.getElementById( 'dg-save-locally' );\n\t\tsaveLocally.style.display = 'block';\n\t\tif ( localStorage.getItem( getLocalStorageHash( gui, 'isLocal' ) ) === 'true' ) {\n\n\t\t\tlocalStorageCheckBox.setAttribute( 'checked', 'checked' );\n\n\t\t}\n\t\tshowHideExplain( gui, explain );\n\t\tdom.bind( localStorageCheckBox, 'change', function () {\n\n\t\t\tgui.useLocalStorage = ! gui.useLocalStorage;\n\t\t\tshowHideExplain( gui, explain );\n\n\t\t} );\n\n\t}\n\tvar newConstructorTextArea = document.getElementById( 'dg-new-constructor' );\n\tdom.bind( newConstructorTextArea, 'keydown', function ( e ) {\n\n\t\tif ( e.metaKey && ( e.which === 67 || e.keyCode === 67 ) ) {\n\n\t\t\tSAVE_DIALOGUE.hide();\n\n\t\t}\n\n\t} );\n\tdom.bind( gears, 'click', function () {\n\n\t\tnewConstructorTextArea.innerHTML = JSON.stringify( gui.getSaveObject(), undefined, 2 );\n\t\tSAVE_DIALOGUE.show();\n\t\tnewConstructorTextArea.focus();\n\t\tnewConstructorTextArea.select();\n\n\t} );\n\tdom.bind( button, 'click', function () {\n\n\t\tgui.save();\n\n\t} );\n\tdom.bind( button2, 'click', function () {\n\n\t\tvar presetName = prompt( 'Enter a new preset name.' );\n\t\tif ( presetName ) {\n\n\t\t\tgui.saveAs( presetName );\n\n\t\t}\n\n\t} );\n\tdom.bind( button3, 'click', function () {\n\n\t\tgui.revert();\n\n\t} );\n\n}\nfunction addResizeHandle( gui ) {\n\n\tvar pmouseX = void 0;\n\tgui.__resize_handle = document.createElement( 'div' );\n\tCommon.extend( gui.__resize_handle.style, {\n\t\twidth: '6px',\n\t\tmarginLeft: '-3px',\n\t\theight: '200px',\n\t\tcursor: 'ew-resize',\n\t\tposition: 'absolute'\n\t} );\n\tfunction drag( e ) {\n\n\t\te.preventDefault();\n\t\tgui.width += pmouseX - e.clientX;\n\t\tgui.onResize();\n\t\tpmouseX = e.clientX;\n\t\treturn false;\n\n\t}\n\tfunction dragStop() {\n\n\t\tdom.removeClass( gui.__closeButton, GUI.CLASS_DRAG );\n\t\tdom.unbind( window, 'mousemove', drag );\n\t\tdom.unbind( window, 'mouseup', dragStop );\n\n\t}\n\tfunction dragStart( e ) {\n\n\t\te.preventDefault();\n\t\tpmouseX = e.clientX;\n\t\tdom.addClass( gui.__closeButton, GUI.CLASS_DRAG );\n\t\tdom.bind( window, 'mousemove', drag );\n\t\tdom.bind( window, 'mouseup', dragStop );\n\t\treturn false;\n\n\t}\n\tdom.bind( gui.__resize_handle, 'mousedown', dragStart );\n\tdom.bind( gui.__closeButton, 'mousedown', dragStart );\n\tgui.domElement.insertBefore( gui.__resize_handle, gui.domElement.firstElementChild );\n\n}\nfunction setWidth( gui, w ) {\n\n\tgui.domElement.style.width = w + 'px';\n\tif ( gui.__save_row && gui.autoPlace ) {\n\n\t\tgui.__save_row.style.width = w + 'px';\n\n\t}\n\tif ( gui.__closeButton ) {\n\n\t\tgui.__closeButton.style.width = w + 'px';\n\n\t}\n\n}\nfunction getCurrentPreset( gui, useInitialValues ) {\n\n\tvar toReturn = {};\n\tCommon.each( gui.__rememberedObjects, function ( val, index ) {\n\n\t\tvar savedValues = {};\n\t\tvar controllerMap = gui.__rememberedObjectIndecesToControllers[ index ];\n\t\tCommon.each( controllerMap, function ( controller, property ) {\n\n\t\t\tsavedValues[ property ] = useInitialValues ? controller.initialValue : controller.getValue();\n\n\t\t} );\n\t\ttoReturn[ index ] = savedValues;\n\n\t} );\n\treturn toReturn;\n\n}\nfunction setPresetSelectIndex( gui ) {\n\n\tfor ( var index = 0; index < gui.__preset_select.length; index ++ ) {\n\n\t\tif ( gui.__preset_select[ index ].value === gui.preset ) {\n\n\t\t\tgui.__preset_select.selectedIndex = index;\n\n\t\t}\n\n\t}\n\n}\nfunction updateDisplays( controllerArray ) {\n\n\tif ( controllerArray.length !== 0 ) {\n\n\t\trequestAnimationFrame$1.call( window, function () {\n\n\t\t\tupdateDisplays( controllerArray );\n\n\t\t} );\n\n\t}\n\tCommon.each( controllerArray, function ( c ) {\n\n\t\tc.updateDisplay();\n\n\t} );\n\n}\n\nvar color = {\n\tColor: Color,\n\tmath: ColorMath,\n\tinterpret: interpret\n};\nvar controllers = {\n\tController: Controller,\n\tBooleanController: BooleanController,\n\tOptionController: OptionController,\n\tStringController: StringController,\n\tNumberController: NumberController,\n\tNumberControllerBox: NumberControllerBox,\n\tNumberControllerSlider: NumberControllerSlider,\n\tFunctionController: FunctionController,\n\tColorController: ColorController\n};\nvar dom$1 = { dom: dom };\nvar gui = { GUI: GUI };\nvar GUI$1 = GUI;\nvar index = {\n\tcolor: color,\n\tcontrollers: controllers,\n\tdom: dom$1,\n\tgui: gui,\n\tGUI: GUI$1\n};\n\nexport { color, controllers, dom$1 as dom, gui, GUI$1 as GUI };\nexport default index;\n"]},"metadata":{},"sourceType":"module"}