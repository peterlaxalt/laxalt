{"ast":null,"code":"import _classCallCheck from \"/Users/pflaxalt/Repositories/_pfl/web/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/pflaxalt/Repositories/_pfl/web/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _defineProperty from \"/Users/pflaxalt/Repositories/_pfl/web/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n// Core\nimport * as THREE from \"three\"; // Settings\n\n// Textures\nimport { EffectComposer } from \"./jsm/postprocessing/EffectComposer\";\nimport { RenderPass } from \"./jsm/postprocessing/RenderPass\"; // Textures\n\nimport { WaterTexture } from \"./water-distort/WaterTexture\"; // Begin Component\n// __________________________________________________________________________\n\nexport var ThreeWaterCanvasClass = /*#__PURE__*/function () {\n  // ______________________________\n  // Types\n  // ______________________________\n  // Constructor\n  function ThreeWaterCanvasClass(options) {\n    _classCallCheck(this, ThreeWaterCanvasClass);\n\n    _defineProperty(this, \"waterTexture\", void 0);\n\n    _defineProperty(this, \"renderer\", void 0);\n\n    _defineProperty(this, \"camera\", void 0);\n\n    _defineProperty(this, \"scene\", void 0);\n\n    _defineProperty(this, \"composer\", void 0);\n\n    _defineProperty(this, \"clock\", void 0);\n\n    this.waterTexture = new WaterTexture({\n      debug: true\n    });\n    this.renderer = new THREE.WebGLRenderer({\n      antialias: false\n    });\n    this.renderer.setSize(window.innerWidth, window.innerHeight);\n    this.renderer.setPixelRatio(window.devicePixelRatio);\n    options.canvasContainer.append(this.renderer.domElement);\n    this.camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 10000);\n    this.camera.position.z = 50;\n    this.tick = this.tick.bind(this);\n    this.onMouseMove = this.onMouseMove.bind(this); // Post Processing\n\n    this.composer = new EffectComposer(this.renderer);\n    this.clock = new THREE.Clock();\n    this.init();\n  }\n\n  _createClass(ThreeWaterCanvasClass, [{\n    key: \"initComposer\",\n    value: function initComposer() {\n      var renderPass = new RenderPass(this.scene, this.camera);\n      this.composer.addPass(renderPass);\n    }\n  }, {\n    key: \"addPlane\",\n    value: function addPlane() {\n      var geometry = new THREE.PlaneBufferGeometry(5, 5, 1, 1);\n      var material = new THREE.MeshNormalMaterial();\n      var mesh = new THREE.Mesh(geometry, material);\n      window.addEventListener(\"mousemove\", this.onMouseMove);\n      this.scene.add(mesh);\n    }\n  }, {\n    key: \"init\",\n    value: function init() {\n      this.initComposer();\n      this.addPlane();\n      this.tick();\n    }\n  }, {\n    key: \"onMouseMove\",\n    value: function onMouseMove(ev) {\n      var point = {\n        x: ev.clientX / window.innerWidth,\n        y: ev.clientY / window.innerHeight\n      };\n      this.waterTexture.addPoint(point);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      this.composer.render(this.clock.getDelta());\n    }\n  }, {\n    key: \"tick\",\n    value: function tick() {\n      this.render();\n      this.waterTexture.update();\n      requestAnimationFrame(this.tick);\n    }\n  }]);\n\n  return ThreeWaterCanvasClass;\n}();\nexport var ThreeWaterCanvas = function ThreeWaterCanvas(_ref) {\n  var canvasContainer = _ref.canvasContainer,\n      canvasElement = _ref.canvasElement,\n      canvasTheme = _ref.canvasTheme;\n  var myWaterCanvas = new ThreeWaterCanvasClass({\n    canvasContainer: canvasContainer,\n    canvasElement: canvasElement,\n    canvasTheme: canvasTheme\n  });\n  return myWaterCanvas;\n}; // // ______________________________________________________________________________________________________________\n// export type LXLT_ThreeCanvasDisplay = (\n//   container: HTMLDivElement,\n//   CanvasElement: HTMLCanvasElement,\n//   CanvasTheme: LXLT_ColorTheme\n// ) => void;\n// export const ThreeCanvas: LXLT_ThreeCanvasDisplay = (\n//   container,\n//   CanvasElement,\n//   CanvasTheme\n// ) => {\n//   __DEBUG__ && console.log(\"ðŸ¤™ Three.js Canvas received:\", CanvasElement);\n//   let camera, scene, renderer, mesh, material, sketch;\n//   init();\n//   setupCanvasDrawing();\n//   animate();\n//   function init() {\n//     camera = new THREE.PerspectiveCamera(\n//       50,\n//       window.innerWidth / window.innerHeight,\n//       1,\n//       6000\n//     );\n//     camera.position.z = 500;\n//     sketch = container;\n//     scene = new THREE.Scene();\n//     material = new THREE.MeshBasicMaterial();\n//     mesh = new THREE.Mesh(new THREE.BoxBufferGeometry(350, 350, 350), material);\n//     scene.add(mesh);\n//     renderer = new THREE.WebGLRenderer({ antialias: false, alpha: true });\n//     renderer.setPixelRatio(window.devicePixelRatio);\n//     renderer.setSize(window.innerWidth, window.innerHeight);\n//     sketch.appendChild(renderer.domElement);\n//     scene.background = new THREE.Color(0x000000);\n//     window.addEventListener(\"resize\", onWindowResize, false);\n//   }\n//   function setupCanvasDrawing() {\n//     material.map = new THREE.CanvasTexture(CanvasElement);\n//   }\n//   function onWindowResize() {\n//     camera.aspect = window.innerWidth / window.innerHeight;\n//     camera.updateProjectionMatrix();\n//     renderer.setSize(window.innerWidth, window.innerHeight);\n//   }\n//   function animate() {\n//     requestAnimationFrame(animate);\n//     mesh.rotation.x += 0.01;\n//     mesh.rotation.y += 0.01;\n//     material.map.needsUpdate = true;\n//     renderer.render(scene, camera);\n//   }\n// };\n\n_c = ThreeWaterCanvas;\n\nvar _c;\n\n$RefreshReg$(_c, \"ThreeWaterCanvas\");","map":{"version":3,"sources":["/Users/pflaxalt/Repositories/_pfl/web/sketches/three/three-water-distort.canvas.ts"],"names":["THREE","EffectComposer","RenderPass","WaterTexture","ThreeWaterCanvasClass","options","waterTexture","debug","renderer","WebGLRenderer","antialias","setSize","window","innerWidth","innerHeight","setPixelRatio","devicePixelRatio","canvasContainer","append","domElement","camera","PerspectiveCamera","position","z","tick","bind","onMouseMove","composer","clock","Clock","init","renderPass","scene","addPass","geometry","PlaneBufferGeometry","material","MeshNormalMaterial","mesh","Mesh","addEventListener","add","initComposer","addPlane","ev","point","x","clientX","y","clientY","addPoint","render","getDelta","update","requestAnimationFrame","ThreeWaterCanvas","canvasElement","canvasTheme","myWaterCanvas"],"mappings":"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","sourcesContent":["// Core\nimport * as THREE from \"three\";\n\n// Settings\nimport { __DEBUG__ } from \"../../constants/site/Settings\";\n\n// Types\nimport { LXLT_ColorTheme } from \"../../constants/styles/Color\";\n\n// Textures\nimport { EffectComposer } from \"./jsm/postprocessing/EffectComposer\";\nimport { RenderPass } from \"./jsm/postprocessing/RenderPass\";\n\n// Textures\nimport {\n  LXLT_WaterTexturePoint,\n  WaterTexture,\n} from \"./water-distort/WaterTexture\";\n\n// Begin Component\n// __________________________________________________________________________\n\nexport type LXLT_ThreeWaterCanvas = {\n  canvasContainer: HTMLDivElement;\n  canvasElement: HTMLCanvasElement;\n  canvasTheme: LXLT_ColorTheme;\n};\n\nexport class ThreeWaterCanvasClass {\n  // ______________________________\n  // Types\n  waterTexture: WaterTexture;\n  renderer: THREE.WebGLRenderer;\n  camera: THREE.PerspectiveCamera;\n  scene: THREE.Scene;\n  composer: EffectComposer;\n  clock: THREE.Clock;\n\n  // ______________________________\n  // Constructor\n  constructor(options: LXLT_ThreeWaterCanvas) {\n    this.waterTexture = new WaterTexture({ debug: true });\n\n    this.renderer = new THREE.WebGLRenderer({\n      antialias: false,\n    });\n\n    this.renderer.setSize(window.innerWidth, window.innerHeight);\n    this.renderer.setPixelRatio(window.devicePixelRatio);\n\n    options.canvasContainer.append(this.renderer.domElement);\n\n    this.camera = new THREE.PerspectiveCamera(\n      45,\n      window.innerWidth / window.innerHeight,\n      0.1,\n      10000\n    );\n    this.camera.position.z = 50;\n\n    this.tick = this.tick.bind(this);\n    this.onMouseMove = this.onMouseMove.bind(this);\n\n    // Post Processing\n    this.composer = new EffectComposer(this.renderer);\n    this.clock = new THREE.Clock();\n\n    this.init();\n  }\n\n  initComposer() {\n    const renderPass = new RenderPass(this.scene, this.camera);\n\n    this.composer.addPass(renderPass);\n  }\n\n  addPlane() {\n    let geometry = new THREE.PlaneBufferGeometry(5, 5, 1, 1);\n    let material = new THREE.MeshNormalMaterial();\n    let mesh = new THREE.Mesh(geometry, material);\n\n    window.addEventListener(\"mousemove\", this.onMouseMove);\n    this.scene.add(mesh);\n  }\n\n  init() {\n    this.initComposer();\n    this.addPlane();\n    this.tick();\n  }\n\n  onMouseMove(ev: MouseEvent) {\n    const point: LXLT_WaterTexturePoint = {\n      x: ev.clientX / window.innerWidth,\n      y: ev.clientY / window.innerHeight,\n    };\n    this.waterTexture.addPoint(point);\n  }\n\n  render() {\n    this.composer.render(this.clock.getDelta());\n  }\n\n  tick() {\n    this.render();\n    this.waterTexture.update();\n    requestAnimationFrame(this.tick);\n  }\n}\n\nexport const ThreeWaterCanvas = ({\n  canvasContainer,\n  canvasElement,\n  canvasTheme,\n}): ThreeWaterCanvasClass => {\n  const myWaterCanvas = new ThreeWaterCanvasClass({\n    canvasContainer,\n    canvasElement,\n    canvasTheme,\n  });\n\n  return myWaterCanvas;\n};\n\n// // ______________________________________________________________________________________________________________\n\n// export type LXLT_ThreeCanvasDisplay = (\n//   container: HTMLDivElement,\n//   CanvasElement: HTMLCanvasElement,\n//   CanvasTheme: LXLT_ColorTheme\n// ) => void;\n\n// export const ThreeCanvas: LXLT_ThreeCanvasDisplay = (\n//   container,\n//   CanvasElement,\n//   CanvasTheme\n// ) => {\n//   __DEBUG__ && console.log(\"ðŸ¤™ Three.js Canvas received:\", CanvasElement);\n\n//   let camera, scene, renderer, mesh, material, sketch;\n\n//   init();\n//   setupCanvasDrawing();\n//   animate();\n\n//   function init() {\n//     camera = new THREE.PerspectiveCamera(\n//       50,\n//       window.innerWidth / window.innerHeight,\n//       1,\n//       6000\n//     );\n//     camera.position.z = 500;\n\n//     sketch = container;\n\n//     scene = new THREE.Scene();\n\n//     material = new THREE.MeshBasicMaterial();\n\n//     mesh = new THREE.Mesh(new THREE.BoxBufferGeometry(350, 350, 350), material);\n//     scene.add(mesh);\n\n//     renderer = new THREE.WebGLRenderer({ antialias: false, alpha: true });\n//     renderer.setPixelRatio(window.devicePixelRatio);\n//     renderer.setSize(window.innerWidth, window.innerHeight);\n//     sketch.appendChild(renderer.domElement);\n\n//     scene.background = new THREE.Color(0x000000);\n\n//     window.addEventListener(\"resize\", onWindowResize, false);\n//   }\n\n//   function setupCanvasDrawing() {\n//     material.map = new THREE.CanvasTexture(CanvasElement);\n//   }\n\n//   function onWindowResize() {\n//     camera.aspect = window.innerWidth / window.innerHeight;\n//     camera.updateProjectionMatrix();\n\n//     renderer.setSize(window.innerWidth, window.innerHeight);\n//   }\n\n//   function animate() {\n//     requestAnimationFrame(animate);\n\n//     mesh.rotation.x += 0.01;\n//     mesh.rotation.y += 0.01;\n\n//     material.map.needsUpdate = true;\n\n//     renderer.render(scene, camera);\n//   }\n// };\n"]},"metadata":{},"sourceType":"module"}