{"ast":null,"code":"function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n// ____________________________________________________________________________________\n\n/**\n *\n * @name WaterTexture\n * @see https://tympanus.net/codrops/2019/10/08/creating-a-water-like-distortion-effect-with-three-js/\n *\n */\nexport class WaterTexture {\n  // _________________________________\n  // Types\n  // _________________________________\n  // Constructor\n  constructor(options) {\n    _defineProperty(this, \"size\", void 0);\n\n    _defineProperty(this, \"radius\", void 0);\n\n    _defineProperty(this, \"width\", void 0);\n\n    _defineProperty(this, \"height\", void 0);\n\n    _defineProperty(this, \"canvas\", void 0);\n\n    _defineProperty(this, \"ctx\", void 0);\n\n    _defineProperty(this, \"debug\", void 0);\n\n    _defineProperty(this, \"points\", void 0);\n\n    _defineProperty(this, \"maxAge\", void 0);\n\n    this.size = 64;\n    this.radius = this.size * 0.1;\n    this.width = this.height = this.size;\n    this.size = 64;\n    this.radius = this.size * 0.1;\n    this.points = [];\n    this.maxAge = 64;\n\n    if (options.debug) {\n      this.width = window.innerWidth;\n      this.height = window.innerHeight;\n      this.radius = this.width * 0.05;\n    }\n\n    this.initTexture();\n    if (options.debug) document.body.append(this.canvas);\n  } // _________________________________\n  // Initialize our canvas\n\n\n  initTexture() {\n    this.canvas = document.createElement(\"canvas\");\n    this.canvas.id = \"WaterTexture\";\n    this.canvas.width = this.width;\n    this.canvas.height = this.height;\n    this.ctx = this.canvas.getContext(\"2d\");\n    this.clear();\n  }\n\n  addPoint(point) {\n    this.points.push({\n      x: point.x,\n      y: point.y,\n      age: 0\n    });\n  }\n\n  clear() {\n    this.ctx.fillStyle = \"black\";\n    this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\n  }\n\n  update() {\n    this.clear();\n    this.points.forEach(point => {\n      point.age += 1;\n\n      if (point.age > this.maxAge) {\n        this.points.splice(i, 1);\n      }\n    });\n    this.points.forEach(point => {\n      this.drawPoint(point);\n    });\n  }\n\n}","map":{"version":3,"sources":["/Users/pflaxalt/Repositories/_pfl/web/sketches/three/water-distort/WaterTexture.ts"],"names":["WaterTexture","constructor","options","size","radius","width","height","points","maxAge","debug","window","innerWidth","innerHeight","initTexture","document","body","append","canvas","createElement","id","ctx","getContext","clear","addPoint","point","push","x","y","age","fillStyle","fillRect","update","forEach","splice","i","drawPoint"],"mappings":";;AAAA;;AAMA;AACA;AACA;AACA;AACA;AACA;AAEA,OAAO,MAAMA,YAAN,CAAmB;AACxB;AACA;AAeA;AACA;AACAC,EAAAA,WAAW,CAACC,OAAD,EAAoC;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAC7C,SAAKC,IAAL,GAAY,EAAZ;AACA,SAAKC,MAAL,GAAc,KAAKD,IAAL,GAAY,GAA1B;AACA,SAAKE,KAAL,GAAa,KAAKC,MAAL,GAAc,KAAKH,IAAhC;AAEA,SAAKA,IAAL,GAAY,EAAZ;AACA,SAAKC,MAAL,GAAc,KAAKD,IAAL,GAAY,GAA1B;AAEA,SAAKI,MAAL,GAAc,EAAd;AACA,SAAKC,MAAL,GAAc,EAAd;;AAEA,QAAIN,OAAO,CAACO,KAAZ,EAAmB;AACjB,WAAKJ,KAAL,GAAaK,MAAM,CAACC,UAApB;AACA,WAAKL,MAAL,GAAcI,MAAM,CAACE,WAArB;AACA,WAAKR,MAAL,GAAc,KAAKC,KAAL,GAAa,IAA3B;AACD;;AAED,SAAKQ,WAAL;AACA,QAAIX,OAAO,CAACO,KAAZ,EAAmBK,QAAQ,CAACC,IAAT,CAAcC,MAAd,CAAqB,KAAKC,MAA1B;AACpB,GAtCuB,CAuCxB;AACA;;;AACAJ,EAAAA,WAAW,GAAG;AACZ,SAAKI,MAAL,GAAcH,QAAQ,CAACI,aAAT,CAAuB,QAAvB,CAAd;AACA,SAAKD,MAAL,CAAYE,EAAZ,GAAiB,cAAjB;AACA,SAAKF,MAAL,CAAYZ,KAAZ,GAAoB,KAAKA,KAAzB;AACA,SAAKY,MAAL,CAAYX,MAAZ,GAAqB,KAAKA,MAA1B;AACA,SAAKc,GAAL,GAAW,KAAKH,MAAL,CAAYI,UAAZ,CAAuB,IAAvB,CAAX;AACA,SAAKC,KAAL;AACD;;AAEDC,EAAAA,QAAQ,CAACC,KAAD,EAAQ;AACd,SAAKjB,MAAL,CAAYkB,IAAZ,CAAiB;AAAEC,MAAAA,CAAC,EAAEF,KAAK,CAACE,CAAX;AAAcC,MAAAA,CAAC,EAAEH,KAAK,CAACG,CAAvB;AAA0BC,MAAAA,GAAG,EAAE;AAA/B,KAAjB;AACD;;AAEDN,EAAAA,KAAK,GAAG;AACN,SAAKF,GAAL,CAASS,SAAT,GAAqB,OAArB;AACA,SAAKT,GAAL,CAASU,QAAT,CAAkB,CAAlB,EAAqB,CAArB,EAAwB,KAAKb,MAAL,CAAYZ,KAApC,EAA2C,KAAKY,MAAL,CAAYX,MAAvD;AACD;;AAEDyB,EAAAA,MAAM,GAAG;AACP,SAAKT,KAAL;AACA,SAAKf,MAAL,CAAYyB,OAAZ,CAAqBR,KAAD,IAAW;AAC7BA,MAAAA,KAAK,CAACI,GAAN,IAAa,CAAb;;AACA,UAAIJ,KAAK,CAACI,GAAN,GAAY,KAAKpB,MAArB,EAA6B;AAC3B,aAAKD,MAAL,CAAY0B,MAAZ,CAAmBC,CAAnB,EAAsB,CAAtB;AACD;AACF,KALD;AAMA,SAAK3B,MAAL,CAAYyB,OAAZ,CAAqBR,KAAD,IAAW;AAC7B,WAAKW,SAAL,CAAeX,KAAf;AACD,KAFD;AAGD;;AAtEuB","sourcesContent":["// ____________________________________________________________________________________\n\nexport type LXLT_WaterTextureOptions = {\n  debug?: boolean;\n};\n\n/**\n *\n * @name WaterTexture\n * @see https://tympanus.net/codrops/2019/10/08/creating-a-water-like-distortion-effect-with-three-js/\n *\n */\n\nexport class WaterTexture {\n  // _________________________________\n  // Types\n  size: number;\n  radius: number;\n  width: number;\n  height: number;\n  canvas: HTMLCanvasElement;\n  ctx: CanvasRenderingContext2D;\n  debug?: boolean;\n  points: {\n    x: number;\n    y: number;\n    age: number;\n  }[];\n  maxAge: number;\n\n  // _________________________________\n  // Constructor\n  constructor(options: LXLT_WaterTextureOptions) {\n    this.size = 64;\n    this.radius = this.size * 0.1;\n    this.width = this.height = this.size;\n\n    this.size = 64;\n    this.radius = this.size * 0.1;\n\n    this.points = [];\n    this.maxAge = 64;\n\n    if (options.debug) {\n      this.width = window.innerWidth;\n      this.height = window.innerHeight;\n      this.radius = this.width * 0.05;\n    }\n\n    this.initTexture();\n    if (options.debug) document.body.append(this.canvas);\n  }\n  // _________________________________\n  // Initialize our canvas\n  initTexture() {\n    this.canvas = document.createElement(\"canvas\");\n    this.canvas.id = \"WaterTexture\";\n    this.canvas.width = this.width;\n    this.canvas.height = this.height;\n    this.ctx = this.canvas.getContext(\"2d\");\n    this.clear();\n  }\n\n  addPoint(point) {\n    this.points.push({ x: point.x, y: point.y, age: 0 });\n  }\n\n  clear() {\n    this.ctx.fillStyle = \"black\";\n    this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\n  }\n\n  update() {\n    this.clear();\n    this.points.forEach((point) => {\n      point.age += 1;\n      if (point.age > this.maxAge) {\n        this.points.splice(i, 1);\n      }\n    });\n    this.points.forEach((point) => {\n      this.drawPoint(point);\n    });\n  }\n}\n"]},"metadata":{},"sourceType":"module"}