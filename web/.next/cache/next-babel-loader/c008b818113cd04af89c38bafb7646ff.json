{"ast":null,"code":"import _defineProperty from \"/Users/pflaxalt/Repositories/_pfl/web/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _extends from \"/Users/pflaxalt/Repositories/_pfl/web/node_modules/@babel/runtime/helpers/esm/extends\";\nimport _classCallCheck from \"/Users/pflaxalt/Repositories/_pfl/web/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/pflaxalt/Repositories/_pfl/web/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/Users/pflaxalt/Repositories/_pfl/web/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/Users/pflaxalt/Repositories/_pfl/web/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/Users/pflaxalt/Repositories/_pfl/web/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/pflaxalt/Repositories/_pfl/web/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\n\nvar _jsxFileName = \"/Users/pflaxalt/Repositories/_pfl/web/components/_interactive/DharmaCounter/DharmaCounter.tsx\",\n    _this5 = this;\n\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\n// Core\nimport React from \"react\";\nimport { Theme } from \"../../../constants/Theme\";\nimport { DharmaTypeClassName, DharmaTypeStyle } from \"../../_svg/DharmaType/styles.scss\"; // Begin Types\n// __________________________________________________________________________________________\n\n// Begin Component\n// __________________________________________________________________________________________\n\n/**\n * @name DharmaCounter\n * @author Peter Laxalt\n *\n */\nexport var DharmaCounter = /*#__PURE__*/function (_React$PureComponent) {\n  _inherits(DharmaCounter, _React$PureComponent);\n\n  var _super = _createSuper(DharmaCounter);\n\n  function DharmaCounter(props) {\n    var _this;\n\n    _classCallCheck(this, DharmaCounter);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      text: \"\",\n      characters: [],\n      viewBoxHeight: 0,\n      viewBoxWidth: 0,\n      characterWidth: 0,\n      offsetCount: 3,\n      characterVerticalTranslation: 0,\n      characterHorizontalScale: 0,\n      characterVerticalScale: 0,\n      isInitialized: false\n    };\n    _this.incrementLetterCount = _this.incrementLetterCount.bind(_assertThisInitialized(_this));\n    _this.decrementLetterCount = _this.decrementLetterCount.bind(_assertThisInitialized(_this));\n    _this.resetLetterCount = _this.resetLetterCount.bind(_assertThisInitialized(_this));\n    _this.updateLetterCount = _this.updateLetterCount.bind(_assertThisInitialized(_this));\n    _this.letterCountTimer = _this.letterCountTimer.bind(_assertThisInitialized(_this));\n    _this.offsetCountTimer = _this.offsetCountTimer.bind(_assertThisInitialized(_this));\n    _this.incrementOffsetCount = _this.incrementOffsetCount.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(DharmaCounter, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.props.text) {\n        // ____________________________________________\n        // Get text / create array\n        var text = this.props.text;\n        var splitCharacterArray = text.split(\"\");\n        var characterArray = splitCharacterArray.map(function (character, idx) {\n          return {\n            letter: character,\n            count: 1,\n            idx: idx,\n            copies: Math.random() <= 0.5\n          };\n        }); // ____________________________________________\n        // USE THESE TO TWEAK YOUR CHARACTERS TO FIT\n\n        var viewBoxHeight = 100;\n        var viewBoxWidth = 100;\n        var characterCount = splitCharacterArray.length;\n        var characterWidth = viewBoxWidth / characterCount; // let characterVerticalTranslation = 0.963; // Multiplied by the viewBoxHeight\n\n        var characterVerticalTranslation = 0.993; // Multiplied by the viewBoxHeight\n\n        var characterHorizontalScale = 0.75; // Multiplied by the characterWidth\n\n        var characterVerticalScale = 1.38; // Multiplied by the characterWidth\n\n        this.setState({\n          text: text,\n          characters: characterArray,\n          viewBoxHeight: viewBoxHeight,\n          viewBoxWidth: viewBoxWidth,\n          characterWidth: characterWidth,\n          characterHorizontalScale: characterHorizontalScale,\n          characterVerticalScale: characterVerticalScale,\n          characterVerticalTranslation: characterVerticalTranslation,\n          isInitialized: true\n        });\n        this.letterCountTimer();\n        this.offsetCountTimer();\n      }\n    }\n  }, {\n    key: \"incrementLetterCount\",\n    value: function incrementLetterCount(id) {\n      this.setState({\n        characters: this.state.characters.map(function (character, idx) {\n          return {\n            letter: character.letter,\n            count: id == character.idx ? character.count + 1 : character.count,\n            idx: idx,\n            copies: Math.random() <= 0.5\n          };\n        })\n      });\n      return;\n    }\n  }, {\n    key: \"decrementLetterCount\",\n    value: function decrementLetterCount(id) {\n      this.setState({\n        characters: this.state.characters.map(function (character, idx) {\n          return {\n            letter: character.letter,\n            count: id == character.idx ? character.count - 1 : character.count,\n            idx: idx,\n            copies: Math.random() <= 0.5\n          };\n        })\n      });\n      return;\n    }\n  }, {\n    key: \"resetLetterCount\",\n    value: function resetLetterCount(id) {\n      this.setState({\n        characters: this.state.characters.map(function (character, idx) {\n          return {\n            letter: character.letter,\n            count: id == character.idx ? 1 : character.count,\n            idx: idx,\n            copies: Math.random() <= 0.5\n          };\n        })\n      });\n      return;\n    }\n  }, {\n    key: \"updateLetterCount\",\n    value: function updateLetterCount(id) {\n      if (this.state.characters && this.state.characters.length > 0) {\n        var matchedCharacter = this.state.characters.filter(function (character) {\n          return character.idx == id;\n        })[0];\n        var maxCount = 4;\n\n        if (matchedCharacter) {\n          if (matchedCharacter.count === maxCount) {\n            this.resetLetterCount(id);\n          } else {\n            this.incrementLetterCount(id);\n          }\n        } else {\n          return;\n        }\n      } else {\n        return;\n      }\n\n      return;\n    }\n  }, {\n    key: \"letterCountTimer\",\n    value: function letterCountTimer() {\n      var _this2 = this;\n\n      function generateRandomInteger(min, max) {\n        return Math.floor(min + Math.random() * (max + 1 - min));\n      }\n\n      window.setInterval(function () {\n        return _this2.updateLetterCount(generateRandomInteger(0, _this2.state.characters.length));\n      }, 3000);\n    }\n  }, {\n    key: \"incrementOffsetCount\",\n    value: function incrementOffsetCount() {\n      this.setState({\n        offsetCount: this.state.offsetCount < 15 ? this.state.offsetCount + 1 : 2\n      });\n      return;\n    }\n  }, {\n    key: \"offsetCountTimer\",\n    value: function offsetCountTimer() {\n      var _this3 = this;\n\n      window.setInterval(function () {\n        return _this3.incrementOffsetCount();\n      }, 5000);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var offsetCount = this.state.offsetCount;\n      var offsetArr = Array.from(Array(offsetCount).keys());\n      return __jsx(React.Fragment, null, __jsx(DharmaCounterDisplay, _extends({\n        updateLetterCount: this.updateLetterCount\n      }, this.state, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 9\n        }\n      })), offsetArr.map(function (n, idx) {\n        return __jsx(DharmaCounterDisplay, _extends({\n          outlined: true,\n          offset: n,\n          key: idx,\n          updateLetterCount: _this4.updateLetterCount\n        }, _this4.state, {\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 258,\n            columnNumber: 13\n          }\n        }));\n      }));\n    }\n  }]);\n\n  return DharmaCounter;\n}(React.PureComponent);\n\nvar DharmaCounterDisplay = function DharmaCounterDisplay(props) {\n  var _ref;\n\n  var viewBoxHeight = props.viewBoxHeight,\n      viewBoxWidth = props.viewBoxWidth,\n      characters = props.characters,\n      characterWidth = props.characterWidth,\n      characterHorizontalScale = props.characterHorizontalScale,\n      characterVerticalScale = props.characterVerticalScale,\n      characterVerticalTranslation = props.characterVerticalTranslation,\n      updateLetterCount = props.updateLetterCount,\n      offset = props.offset,\n      outlined = props.outlined,\n      addClass = props.addClass;\n  return __jsx(DharmaTypeStyle, {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 \".concat(viewBoxWidth, \" \").concat(viewBoxHeight),\n    preserveAspectRatio: \"none\",\n    className: \"\".concat(DharmaTypeClassName, \" \").concat(DharmaTypeClassName, \"--counter \").concat(offset ? \"\".concat(DharmaTypeClassName, \"--offset\") : \"\", \" \").concat(addClass),\n    style: (_ref = {}, _defineProperty(_ref, \"--\".concat(DharmaTypeClassName, \"-font-size\"), \"\".concat(viewBoxHeight, \"px\")), _defineProperty(_ref, \"--\".concat(DharmaTypeClassName, \"-offset\"), \"\".concat(offset ? offset : 0)), _ref),\n    __self: _this5,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 5\n    }\n  }, __jsx(\"g\", {\n    __self: _this5,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 306,\n      columnNumber: 7\n    }\n  }, characters.map(function (_char, idx) {\n    var countArray = Array.from(Array(_char.count).keys());\n    return countArray.map(function (duplicate, idxx) {\n      var _ref2;\n\n      var adjustedDuplicate = _char.count > 1 ? _char.count : duplicate + 1;\n      var canCopy = Math.random() <= 0.5;\n      var adjustedVerticalTranslation = viewBoxHeight / adjustedDuplicate * (idxx + 1) * characterVerticalTranslation;\n      var adjustedVerticalScale = characterVerticalScale / adjustedDuplicate;\n      return __jsx(\"g\", {\n        className: \"\".concat(DharmaTypeClassName, \"__character-wrapper\"),\n        \"data-char-id\": idx,\n        \"data-char-count\": duplicate,\n        key: idxx,\n        onClick: function onClick() {\n          return updateLetterCount(idx);\n        },\n        style: {\n          display: outlined && _char.copies && canCopy ? \"none\" : \"inherit\"\n        },\n        __self: _this5,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 324,\n          columnNumber: 15\n        }\n      }, __jsx(\"filter\", {\n        id: \"displacementFilter__\".concat(idx, \"__\").concat(idxx).concat(outlined ? \"__outlined\" : \"\"),\n        __self: _this5,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 17\n        }\n      }, !outlined && __jsx(React.Fragment, null, __jsx(\"feTurbulence\", {\n        type: \"turbulence\" // baseFrequency={0.6 * (idxx * 0.05)}\n        // numOctaves={1 * (idxx + 20)}\n        ,\n        baseFrequency: 0,\n        numOctaves: 0,\n        result: \"turbulence\",\n        __self: _this5,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 341,\n          columnNumber: 23\n        }\n      }), __jsx(\"feDisplacementMap\", {\n        in2: \"turbulence\",\n        \"in\": \"SourceGraphic\" // scale={3 - idxx * 0.5}\n        ,\n        scale: 0,\n        xChannelSelector: \"R\",\n        yChannelSelector: \"G\",\n        __self: _this5,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 23\n        }\n      })), outlined && __jsx(React.Fragment, null, __jsx(\"feFlood\", {\n        \"flood-color\": Theme.Color.varBackground,\n        \"flood-opacity\": \"1\",\n        result: \"PINK\",\n        __self: _this5,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 363,\n          columnNumber: 23\n        }\n      }), __jsx(\"feMorphology\", {\n        \"in\": \"SourceAlpha\",\n        result: \"DILATED\",\n        operator: \"dilate\",\n        radius: \".1\",\n        __self: _this5,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 368,\n          columnNumber: 23\n        }\n      }), __jsx(\"feComposite\", {\n        \"in\": \"PINK\",\n        in2: \"DILATED\",\n        operator: \"in\",\n        result: \"OUTLINE\",\n        __self: _this5,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 374,\n          columnNumber: 23\n        }\n      }), __jsx(\"feMerge\", {\n        __self: _this5,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 381,\n          columnNumber: 23\n        }\n      }, __jsx(\"feMergeNode\", {\n        \"in\": \"OUTLINE\",\n        __self: _this5,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 382,\n          columnNumber: 25\n        }\n      }), __jsx(\"feMergeNode\", {\n        \"in\": \"SourceGraphic\",\n        __self: _this5,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 383,\n          columnNumber: 25\n        }\n      })))), __jsx(\"text\", {\n        className: \"\".concat(DharmaTypeClassName, \"__character\"),\n        transform: \"translate(\".concat(characterWidth * idx, \" \").concat(adjustedVerticalTranslation, \") scale(\").concat(characterHorizontalScale, \", \").concat(adjustedVerticalScale, \")\"),\n        style: (_ref2 = {}, _defineProperty(_ref2, \"--\".concat(DharmaTypeClassName, \"-key\"), idx), _defineProperty(_ref2, \"filter\", \"url(#displacementFilter__\".concat(idx, \"__\").concat(idxx).concat(outlined ? \"__outlined\" : \"\", \")\")), _ref2),\n        __self: _this5,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 389,\n          columnNumber: 17\n        }\n      }, __jsx(\"tspan\", {\n        className: \"\".concat(DharmaTypeClassName, \"__letter\"),\n        __self: _this5,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 401,\n          columnNumber: 19\n        }\n      }, _char.letter)));\n    });\n  })));\n};\n\n_c = DharmaCounterDisplay;\n\nvar _c;\n\n$RefreshReg$(_c, \"DharmaCounterDisplay\");","map":{"version":3,"sources":["/Users/pflaxalt/Repositories/_pfl/web/components/_interactive/DharmaCounter/DharmaCounter.tsx"],"names":["React","Theme","DharmaTypeClassName","DharmaTypeStyle","DharmaCounter","props","state","text","characters","viewBoxHeight","viewBoxWidth","characterWidth","offsetCount","characterVerticalTranslation","characterHorizontalScale","characterVerticalScale","isInitialized","incrementLetterCount","bind","decrementLetterCount","resetLetterCount","updateLetterCount","letterCountTimer","offsetCountTimer","incrementOffsetCount","splitCharacterArray","split","characterArray","map","character","idx","letter","count","copies","Math","random","characterCount","length","setState","id","matchedCharacter","filter","maxCount","generateRandomInteger","min","max","floor","window","setInterval","offsetArr","Array","from","keys","n","PureComponent","DharmaCounterDisplay","offset","outlined","addClass","char","countArray","duplicate","idxx","adjustedDuplicate","canCopy","adjustedVerticalTranslation","adjustedVerticalScale","display","Color","varBackground"],"mappings":"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","sourcesContent":["// Core\nimport React from \"react\";\nimport { Theme } from \"../../../constants/Theme\";\nimport {\n  DharmaTypeClassName,\n  DharmaTypeStyle,\n} from \"../../_svg/DharmaType/styles.scss\";\n\n// Begin Types\n// __________________________________________________________________________________________\n\ntype LXLT_DharmaCounter = {\n  text: string;\n};\n\ntype LXLT_DharmaCounterState = {\n  text: string;\n  characters: LXLT_DharmaChar[];\n\n  viewBoxHeight: number;\n  viewBoxWidth: number;\n\n  characterVerticalTranslation: number;\n  characterHorizontalScale: number;\n  characterVerticalScale: number;\n\n  characterWidth: number;\n\n  isInitialized: boolean;\n\n  offsetCount: number;\n};\n\ntype LXLT_DharmaChar = {\n  letter: string;\n  count: number;\n  idx: number;\n  copies: boolean;\n};\n\ntype LXLT_DharmaCounterDisplay = LXLT_DharmaCounterState & {\n  updateLetterCount: (id: number) => void;\n\n  outlined?: boolean;\n  offset?: number;\n  addClass?: string;\n};\n\n// Begin Component\n// __________________________________________________________________________________________\n\n/**\n * @name DharmaCounter\n * @author Peter Laxalt\n *\n */\nexport class DharmaCounter extends React.PureComponent<\n  LXLT_DharmaCounter,\n  LXLT_DharmaCounterState\n> {\n  constructor(props: LXLT_DharmaCounter) {\n    super(props);\n\n    this.state = {\n      text: \"\",\n      characters: [],\n\n      viewBoxHeight: 0,\n      viewBoxWidth: 0,\n      characterWidth: 0,\n\n      offsetCount: 3,\n\n      characterVerticalTranslation: 0,\n      characterHorizontalScale: 0,\n      characterVerticalScale: 0,\n\n      isInitialized: false,\n    };\n\n    this.incrementLetterCount = this.incrementLetterCount.bind(this);\n    this.decrementLetterCount = this.decrementLetterCount.bind(this);\n    this.resetLetterCount = this.resetLetterCount.bind(this);\n    this.updateLetterCount = this.updateLetterCount.bind(this);\n\n    this.letterCountTimer = this.letterCountTimer.bind(this);\n\n    this.offsetCountTimer = this.offsetCountTimer.bind(this);\n    this.incrementOffsetCount = this.incrementOffsetCount.bind(this);\n  }\n\n  componentDidMount() {\n    if (this.props.text) {\n      // ____________________________________________\n      // Get text / create array\n      let { text } = this.props;\n\n      let splitCharacterArray = text.split(\"\");\n      let characterArray: LXLT_DharmaChar[] = splitCharacterArray.map(\n        (character: string, idx: number) => {\n          return {\n            letter: character,\n            count: 1,\n            idx: idx,\n            copies: Math.random() <= 0.5,\n          };\n        }\n      );\n\n      // ____________________________________________\n      // USE THESE TO TWEAK YOUR CHARACTERS TO FIT\n      let viewBoxHeight = 100;\n      let viewBoxWidth = 100;\n\n      let characterCount = splitCharacterArray.length;\n      let characterWidth = viewBoxWidth / characterCount;\n\n      // let characterVerticalTranslation = 0.963; // Multiplied by the viewBoxHeight\n      let characterVerticalTranslation = 0.993; // Multiplied by the viewBoxHeight\n      let characterHorizontalScale = 0.75; // Multiplied by the characterWidth\n      let characterVerticalScale = 1.38; // Multiplied by the characterWidth\n\n      this.setState({\n        text: text,\n        characters: characterArray,\n\n        viewBoxHeight: viewBoxHeight,\n        viewBoxWidth: viewBoxWidth,\n\n        characterWidth: characterWidth,\n\n        characterHorizontalScale: characterHorizontalScale,\n        characterVerticalScale: characterVerticalScale,\n        characterVerticalTranslation: characterVerticalTranslation,\n\n        isInitialized: true,\n      });\n\n      this.letterCountTimer();\n      this.offsetCountTimer();\n    }\n  }\n\n  incrementLetterCount(id: number) {\n    this.setState({\n      characters: this.state.characters.map(\n        (character: LXLT_DharmaChar, idx: number) => {\n          return {\n            letter: character.letter,\n            count: id == character.idx ? character.count + 1 : character.count,\n            idx: idx,\n            copies: Math.random() <= 0.5,\n          };\n        }\n      ),\n    });\n\n    return;\n  }\n\n  decrementLetterCount(id: number) {\n    this.setState({\n      characters: this.state.characters.map(\n        (character: LXLT_DharmaChar, idx: number) => {\n          return {\n            letter: character.letter,\n            count: id == character.idx ? character.count - 1 : character.count,\n            idx: idx,\n            copies: Math.random() <= 0.5,\n          };\n        }\n      ),\n    });\n\n    return;\n  }\n\n  resetLetterCount(id: number) {\n    this.setState({\n      characters: this.state.characters.map(\n        (character: LXLT_DharmaChar, idx: number) => {\n          return {\n            letter: character.letter,\n            count: id == character.idx ? 1 : character.count,\n            idx: idx,\n            copies: Math.random() <= 0.5,\n          };\n        }\n      ),\n    });\n\n    return;\n  }\n\n  updateLetterCount(id: number) {\n    if (this.state.characters && this.state.characters.length > 0) {\n      let matchedCharacter: LXLT_DharmaChar = this.state.characters.filter(\n        (character: LXLT_DharmaChar) => character.idx == id\n      )[0];\n\n      let maxCount = 4;\n\n      if (matchedCharacter) {\n        if (matchedCharacter.count === maxCount) {\n          this.resetLetterCount(id);\n        } else {\n          this.incrementLetterCount(id);\n        }\n      } else {\n        return;\n      }\n    } else {\n      return;\n    }\n\n    return;\n  }\n\n  letterCountTimer() {\n    function generateRandomInteger(min, max) {\n      return Math.floor(min + Math.random() * (max + 1 - min));\n    }\n\n    window.setInterval(\n      () =>\n        this.updateLetterCount(\n          generateRandomInteger(0, this.state.characters.length)\n        ),\n      3000\n    );\n  }\n\n  incrementOffsetCount() {\n    this.setState({\n      offsetCount: this.state.offsetCount < 15 ? this.state.offsetCount + 1 : 2,\n    });\n\n    return;\n  }\n\n  offsetCountTimer() {\n    window.setInterval(() => this.incrementOffsetCount(), 5000);\n  }\n\n  render() {\n    let offsetCount = this.state.offsetCount;\n    var offsetArr = Array.from(Array(offsetCount).keys());\n\n    return (\n      <>\n        <DharmaCounterDisplay\n          updateLetterCount={this.updateLetterCount}\n          {...this.state}\n        />\n\n        {offsetArr.map((n: number, idx: number) => {\n          return (\n            <DharmaCounterDisplay\n              outlined={true}\n              offset={n}\n              key={idx}\n              updateLetterCount={this.updateLetterCount}\n              {...this.state}\n            />\n          );\n        })}\n      </>\n    );\n  }\n}\n\nconst DharmaCounterDisplay: React.FunctionComponent<LXLT_DharmaCounterDisplay> = (\n  props\n) => {\n  let {\n    viewBoxHeight,\n    viewBoxWidth,\n    characters,\n    characterWidth,\n\n    characterHorizontalScale,\n    characterVerticalScale,\n    characterVerticalTranslation,\n\n    updateLetterCount,\n\n    offset,\n    outlined,\n\n    addClass,\n  } = props;\n\n  return (\n    <DharmaTypeStyle\n      xmlns=\"http://www.w3.org/2000/svg\"\n      viewBox={`0 0 ${viewBoxWidth} ${viewBoxHeight}`}\n      preserveAspectRatio=\"none\"\n      className={`${DharmaTypeClassName} ${DharmaTypeClassName}--counter ${\n        offset ? `${DharmaTypeClassName}--offset` : \"\"\n      } ${addClass}`}\n      style={{\n        [`--${DharmaTypeClassName}-font-size` as any]: `${viewBoxHeight}px`,\n        [`--${DharmaTypeClassName}-offset` as any]: `${offset ? offset : 0}`,\n      }}\n    >\n      <g>\n        {characters.map((char: LXLT_DharmaChar, idx: number) => {\n          let countArray = Array.from(Array(char.count).keys());\n\n          return countArray.map((duplicate: number, idxx: number) => {\n            let adjustedDuplicate = char.count > 1 ? char.count : duplicate + 1;\n\n            let canCopy = Math.random() <= 0.5;\n\n            let adjustedVerticalTranslation =\n              (viewBoxHeight / adjustedDuplicate) *\n              (idxx + 1) *\n              characterVerticalTranslation;\n\n            let adjustedVerticalScale =\n              characterVerticalScale / adjustedDuplicate;\n\n            return (\n              <g\n                className={`${DharmaTypeClassName}__character-wrapper`}\n                data-char-id={idx}\n                data-char-count={duplicate}\n                key={idxx}\n                onClick={() => updateLetterCount(idx)}\n                style={{\n                  display: outlined && char.copies && canCopy ? \"none\" : \"inherit\",\n                }}\n              >\n                <filter\n                  id={`displacementFilter__${idx}__${idxx}${\n                    outlined ? \"__outlined\" : \"\"\n                  }`}\n                >\n                  {!outlined && (\n                    <>\n                      <feTurbulence\n                        type=\"turbulence\"\n                        // baseFrequency={0.6 * (idxx * 0.05)}\n                        // numOctaves={1 * (idxx + 20)}\n                        baseFrequency={0}\n                        numOctaves={0}\n                        result=\"turbulence\"\n                      />\n                      <feDisplacementMap\n                        in2=\"turbulence\"\n                        in=\"SourceGraphic\"\n                        // scale={3 - idxx * 0.5}\n                        scale={0}\n                        xChannelSelector=\"R\"\n                        yChannelSelector=\"G\"\n                      />\n                    </>\n                  )}\n\n                  {/* Outline  */}\n                  {outlined && (\n                    <>\n                      <feFlood\n                        flood-color={Theme.Color.varBackground}\n                        flood-opacity=\"1\"\n                        result=\"PINK\"\n                      />\n                      <feMorphology\n                        in=\"SourceAlpha\"\n                        result=\"DILATED\"\n                        operator=\"dilate\"\n                        radius=\".1\"\n                      />\n                      <feComposite\n                        in=\"PINK\"\n                        in2=\"DILATED\"\n                        operator=\"in\"\n                        result=\"OUTLINE\"\n                      />\n\n                      <feMerge>\n                        <feMergeNode in=\"OUTLINE\" />\n                        <feMergeNode in=\"SourceGraphic\" />\n                      </feMerge>\n                    </>\n                  )}\n                </filter>\n\n                <text\n                  className={`${DharmaTypeClassName}__character`}\n                  transform={`translate(${\n                    characterWidth * idx\n                  } ${adjustedVerticalTranslation}) scale(${characterHorizontalScale}, ${adjustedVerticalScale})`}\n                  style={{\n                    [`--${DharmaTypeClassName}-key` as any]: idx,\n                    filter: `url(#displacementFilter__${idx}__${idxx}${\n                      outlined ? \"__outlined\" : \"\"\n                    })`,\n                  }}\n                >\n                  <tspan className={`${DharmaTypeClassName}__letter`}>\n                    {char.letter}\n                  </tspan>\n                </text>\n              </g>\n            );\n          });\n        })}\n      </g>\n    </DharmaTypeStyle>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}