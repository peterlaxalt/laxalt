{"ast":null,"code":"import * as THREE from \"three\";\nimport { __DEBUG__ } from \"../../constants/site/Settings\";\nexport var ThreeCanvas = function ThreeCanvas(container, CanvasElement, CanvasTheme) {\n  __DEBUG__ && console.log(\"ðŸ¤™ Three.js Canvas received:\", CanvasElement);\n  var camera, scene, renderer, mesh, material, sketch; // const drawStartPos = new THREE.Vector2();\n\n  init();\n  setupCanvasDrawing();\n  animate();\n\n  function init() {\n    camera = new THREE.PerspectiveCamera(50, window.innerWidth / window.innerHeight, 1, 2000);\n    camera.position.z = 500;\n    sketch = container;\n    scene = new THREE.Scene();\n    material = new THREE.MeshBasicMaterial();\n    mesh = new THREE.Mesh(new THREE.BoxBufferGeometry(200, 200, 200), material);\n    scene.add(mesh);\n    renderer = new THREE.WebGLRenderer({\n      antialias: true\n    });\n    renderer.setPixelRatio(window.devicePixelRatio);\n    renderer.setSize(window.innerWidth, window.innerHeight);\n    sketch.appendChild(renderer.domElement);\n    window.addEventListener(\"resize\", onWindowResize, false);\n  } // Sets up the drawing canvas and adds it as the material map\n\n\n  function setupCanvasDrawing() {\n    // get canvas and context\n    var drawingCanvas = CanvasElement; // const drawingContext = drawingCanvas.getContext(\"2d\");\n    // // draw white background\n    // drawingContext.fillStyle = \"#FFFFFF\";\n    // drawingContext.fillRect(0, 0, 128, 128);\n    // set canvas as material.map (this could be done to any map, bump, displacement etc.)\n\n    material.map = new THREE.CanvasTexture(drawingCanvas);\n    draw();\n  }\n\n  function draw() {\n    material.map.needsUpdate = true;\n  }\n\n  function onWindowResize() {\n    camera.aspect = window.innerWidth / window.innerHeight;\n    camera.updateProjectionMatrix();\n    renderer.setSize(window.innerWidth, window.innerHeight);\n  }\n\n  function animate() {\n    requestAnimationFrame(animate);\n    mesh.rotation.x += 0.01;\n    mesh.rotation.y += 0.01;\n    material.map.needsUpdate = true;\n    renderer.render(scene, camera);\n  }\n};\n_c = ThreeCanvas;\n\nvar _c;\n\n$RefreshReg$(_c, \"ThreeCanvas\");","map":{"version":3,"sources":["/Users/pflaxalt/Repositories/_pfl/web/sketches/three/with-canvas-as-texture.ts"],"names":["THREE","__DEBUG__","ThreeCanvas","container","CanvasElement","CanvasTheme","console","log","camera","scene","renderer","mesh","material","sketch","init","setupCanvasDrawing","animate","PerspectiveCamera","window","innerWidth","innerHeight","position","z","Scene","MeshBasicMaterial","Mesh","BoxBufferGeometry","add","WebGLRenderer","antialias","setPixelRatio","devicePixelRatio","setSize","appendChild","domElement","addEventListener","onWindowResize","drawingCanvas","map","CanvasTexture","draw","needsUpdate","aspect","updateProjectionMatrix","requestAnimationFrame","rotation","x","y","render"],"mappings":"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","sourcesContent":["import * as THREE from \"three\";\nimport { __DEBUG__ } from \"../../constants/site/Settings\";\nimport { LXLT_ColorTheme } from \"../../constants/styles/Color\";\n\n// Begin Component\n// __________________________________________________________________________\n\nexport type LXLT_ThreeCanvasDisplay = (\n  container: HTMLDivElement,\n  CanvasElement: HTMLCanvasElement,\n  CanvasTheme: LXLT_ColorTheme\n) => void;\n\nexport const ThreeCanvas: LXLT_ThreeCanvasDisplay = (\n  container,\n  CanvasElement,\n  CanvasTheme\n) => {\n  __DEBUG__ && console.log(\"ðŸ¤™ Three.js Canvas received:\", CanvasElement);\n\n  let camera, scene, renderer, mesh, material, sketch;\n  // const drawStartPos = new THREE.Vector2();\n\n  init();\n  setupCanvasDrawing();\n  animate();\n\n  function init() {\n    camera = new THREE.PerspectiveCamera(\n      50,\n      window.innerWidth / window.innerHeight,\n      1,\n      2000\n    );\n    camera.position.z = 500;\n\n    sketch = container;\n\n    scene = new THREE.Scene();\n\n    material = new THREE.MeshBasicMaterial();\n\n    mesh = new THREE.Mesh(new THREE.BoxBufferGeometry(200, 200, 200), material);\n    scene.add(mesh);\n\n    renderer = new THREE.WebGLRenderer({ antialias: true });\n    renderer.setPixelRatio(window.devicePixelRatio);\n    renderer.setSize(window.innerWidth, window.innerHeight);\n    sketch.appendChild(renderer.domElement);\n\n    window.addEventListener(\"resize\", onWindowResize, false);\n  }\n\n  // Sets up the drawing canvas and adds it as the material map\n\n  function setupCanvasDrawing() {\n    // get canvas and context\n\n    const drawingCanvas = CanvasElement;\n    // const drawingContext = drawingCanvas.getContext(\"2d\");\n\n    // // draw white background\n\n    // drawingContext.fillStyle = \"#FFFFFF\";\n    // drawingContext.fillRect(0, 0, 128, 128);\n\n    // set canvas as material.map (this could be done to any map, bump, displacement etc.)\n\n    material.map = new THREE.CanvasTexture(drawingCanvas);\n\n    draw();\n  }\n\n  function draw() {\n    material.map.needsUpdate = true;\n  }\n\n  function onWindowResize() {\n    camera.aspect = window.innerWidth / window.innerHeight;\n    camera.updateProjectionMatrix();\n\n    renderer.setSize(window.innerWidth, window.innerHeight);\n  }\n\n  function animate() {\n    requestAnimationFrame(animate);\n\n    mesh.rotation.x += 0.01;\n    mesh.rotation.y += 0.01;\n\n    material.map.needsUpdate = true;\n\n    renderer.render(scene, camera);\n  }\n};\n"]},"metadata":{},"sourceType":"module"}