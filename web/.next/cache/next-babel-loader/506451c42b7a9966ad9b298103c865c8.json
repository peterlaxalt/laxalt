{"ast":null,"code":"import _classCallCheck from \"/Users/pflaxalt/Repositories/_pfl/web/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/pflaxalt/Repositories/_pfl/web/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/Users/pflaxalt/Repositories/_pfl/web/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/Users/pflaxalt/Repositories/_pfl/web/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/Users/pflaxalt/Repositories/_pfl/web/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/pflaxalt/Repositories/_pfl/web/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"/Users/pflaxalt/Repositories/_pfl/web/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/pflaxalt/Repositories/_pfl/web/components/InteractiveEyeball/InteractiveEyeball.tsx\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\n// Core\nimport React, { Component } from \"react\"; // Constants\n\n// Styles\nimport { InteractiveEyeballClassName, InteractiveEyeballStyle // InteractiveOverlayNavigationClassName,\n} from \"./styles.scss\"; // Begin Types\n// __________________________________________________________________________________________\n\n/**\n *\n * @name InteractiveEyeball\n * @author Peter Laxalt\n *\n */\nexport var InteractiveEyeball = /*#__PURE__*/function (_Component) {\n  _inherits(InteractiveEyeball, _Component);\n\n  var _super = _createSuper(InteractiveEyeball);\n\n  function InteractiveEyeball(props) {\n    var _this;\n\n    _classCallCheck(this, InteractiveEyeball);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"pupilRef\", /*#__PURE__*/React.createRef());\n\n    _this.state = {\n      mouseX: 0,\n      mouseY: 0,\n      scrollX: 0,\n      scrollY: 0,\n      pupilWidth: 0,\n      pupilHeight: 0,\n      pupilOffsetX: 0,\n      pupilOffsetY: 0,\n      rotation: 0\n    };\n    _this.handleMouseMovement = _this.handleMouseMovement.bind(_assertThisInitialized(_this));\n    _this.calculatePupilBoundaries = _this.calculatePupilBoundaries.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n  /**\n   *\n   * @name componentDidMount()\n   *\n   */\n\n\n  _createClass(InteractiveEyeball, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (\"object\" && this.pupilRef) {\n        this.calculatePupilBoundaries();\n        window.addEventListener(\"mousemove\", this.handleMouseMovement);\n      } else {\n        return;\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      if (\"object\") {\n        window.removeEventListener(\"mousemove\", this.handleMouseMovement);\n      }\n    }\n  }, {\n    key: \"calculatePupilBoundaries\",\n    value: function calculatePupilBoundaries() {\n      if (this.pupilRef.current) {\n        var pupilClientRect = this.pupilRef.current.getBoundingClientRect();\n        this.setState({\n          pupilWidth: pupilClientRect.width,\n          pupilHeight: pupilClientRect.height,\n          pupilOffsetX: pupilClientRect.left,\n          pupilOffsetY: pupilClientRect.top\n        });\n      }\n    }\n  }, {\n    key: \"handleMouseMovement\",\n    value: function handleMouseMovement(e) {\n      if (e) {\n        // let radians = Math.atan2(\n        //   e.screenY - (this.state.pupilOffsetY - this.state.pupilHeight / 2),\n        //   e.screenX - (this.state.pupilOffsetX - this.state.pupilWidth / 2)\n        // );\n        var scrollContainer = this.props.scrollContainer && this.props.scrollContainer.current ? this.props.scrollContainer.current : document.querySelector(\"html\");\n        var radians = Math.atan2(e.clientY + scrollContainer.scrollTop - (this.state.pupilOffsetY - this.state.pupilHeight / 2), e.clientX - (this.state.pupilOffsetX - this.state.pupilWidth / 2));\n        var angle = radians * (180 / Math.PI) - 15;\n        this.setState({\n          rotation: angle\n        });\n      } else {\n        return;\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      // console.log(this.state);\n      return /*#__PURE__*/_jsxDEV(InteractiveEyeballStyle, {\n        className: \"\".concat(InteractiveEyeballClassName, \" \").concat(this.props.addClass, \" \").concat(InteractiveEyeballClassName, \"--is-\").concat(this.props.isInverted ? \"inverted\" : \"not-inverted\"),\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"\".concat(InteractiveEyeballClassName, \"__outline\")\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"\".concat(InteractiveEyeballClassName, \"__pupil-wrapper\"),\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            ref: this.pupilRef,\n            className: \"\".concat(InteractiveEyeballClassName, \"__pupil\"),\n            style: {\n              transform: \"rotate(\".concat(this.state.rotation, \"deg)\")\n            },\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"\".concat(InteractiveEyeballClassName, \"__pupil__el\")\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 157,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 7\n      }, this);\n    }\n  }]);\n\n  return InteractiveEyeball;\n}(Component); // End Component\n// ______________________________________________________________________________","map":{"version":3,"sources":["/Users/pflaxalt/Repositories/_pfl/web/components/InteractiveEyeball/InteractiveEyeball.tsx"],"names":["React","Component","InteractiveEyeballClassName","InteractiveEyeballStyle","InteractiveEyeball","props","createRef","state","mouseX","mouseY","scrollX","scrollY","pupilWidth","pupilHeight","pupilOffsetX","pupilOffsetY","rotation","handleMouseMovement","bind","calculatePupilBoundaries","pupilRef","window","addEventListener","removeEventListener","current","pupilClientRect","getBoundingClientRect","setState","width","height","left","top","e","scrollContainer","document","querySelector","radians","Math","atan2","clientY","scrollTop","clientX","angle","PI","addClass","isInverted","transform"],"mappings":";;;;;;;;;;;;;;AAAA;AACA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC,C,CAEA;;AAGA;AACA,SACEC,2BADF,EAEEC,uBAFF,CAGE;AAHF,OAIO,eAJP,C,CAMA;AACA;;AAwBA;AACA;AACA;AACA;AACA;AACA;AACA,WAAaC,kBAAb;AAAA;;AAAA;;AAIE,8BAAYC,KAAZ,EAA4C;AAAA;;AAAA;;AAC1C,8BAAMA,KAAN;;AAD0C,4EAwFjCL,KAAK,CAACM,SAAN,EAxFiC;;AAG1C,UAAKC,KAAL,GAAa;AACXC,MAAAA,MAAM,EAAE,CADG;AAEXC,MAAAA,MAAM,EAAE,CAFG;AAIXC,MAAAA,OAAO,EAAE,CAJE;AAKXC,MAAAA,OAAO,EAAE,CALE;AAOXC,MAAAA,UAAU,EAAE,CAPD;AAQXC,MAAAA,WAAW,EAAE,CARF;AAUXC,MAAAA,YAAY,EAAE,CAVH;AAWXC,MAAAA,YAAY,EAAE,CAXH;AAaXC,MAAAA,QAAQ,EAAE;AAbC,KAAb;AAgBA,UAAKC,mBAAL,GAA2B,MAAKA,mBAAL,CAAyBC,IAAzB,+BAA3B;AAEA,UAAKC,wBAAL,GAAgC,MAAKA,wBAAL,CAA8BD,IAA9B,+BAAhC;AArB0C;AAsB3C;AAED;AACF;AACA;AACA;AACA;;;AAhCA;AAAA;AAAA,wCAiCsB;AAClB,UAAI,YAAiB,KAAKE,QAA1B,EAAoC;AAClC,aAAKD,wBAAL;AAEAE,QAAAA,MAAM,CAACC,gBAAP,CAAwB,WAAxB,EAAqC,KAAKL,mBAA1C;AACD,OAJD,MAIO;AACL;AACD;AACF;AAzCH;AAAA;AAAA,2CA2CyB;AACrB,oBAAmB;AACjBI,QAAAA,MAAM,CAACE,mBAAP,CAA2B,WAA3B,EAAwC,KAAKN,mBAA7C;AACD;AACF;AA/CH;AAAA;AAAA,+CAiD6B;AACzB,UAAI,KAAKG,QAAL,CAAcI,OAAlB,EAA2B;AACzB,YAAIC,eAAe,GAAG,KAAKL,QAAL,CAAcI,OAAd,CAAsBE,qBAAtB,EAAtB;AAEA,aAAKC,QAAL,CAAc;AACZf,UAAAA,UAAU,EAAEa,eAAe,CAACG,KADhB;AAEZf,UAAAA,WAAW,EAAEY,eAAe,CAACI,MAFjB;AAIZf,UAAAA,YAAY,EAAEW,eAAe,CAACK,IAJlB;AAKZf,UAAAA,YAAY,EAAEU,eAAe,CAACM;AALlB,SAAd;AAOD;AACF;AA7DH;AAAA;AAAA,wCA+DsBC,CA/DtB,EA+DqC;AACjC,UAAIA,CAAJ,EAAO;AACL;AACA;AACA;AACA;AAEA,YAAIC,eAAe,GACjB,KAAK5B,KAAL,CAAW4B,eAAX,IAA8B,KAAK5B,KAAL,CAAW4B,eAAX,CAA2BT,OAAzD,GACI,KAAKnB,KAAL,CAAW4B,eAAX,CAA2BT,OAD/B,GAEIU,QAAQ,CAACC,aAAT,CAAuB,MAAvB,CAHN;AAKA,YAAIC,OAAO,GAAGC,IAAI,CAACC,KAAL,CACZN,CAAC,CAACO,OAAF,GACEN,eAAe,CAACO,SADlB,IAEG,KAAKjC,KAAL,CAAWQ,YAAX,GAA0B,KAAKR,KAAL,CAAWM,WAAX,GAAyB,CAFtD,CADY,EAIZmB,CAAC,CAACS,OAAF,IAAa,KAAKlC,KAAL,CAAWO,YAAX,GAA0B,KAAKP,KAAL,CAAWK,UAAX,GAAwB,CAA/D,CAJY,CAAd;AAOA,YAAI8B,KAAK,GAAGN,OAAO,IAAI,MAAMC,IAAI,CAACM,EAAf,CAAP,GAA4B,EAAxC;AAEA,aAAKhB,QAAL,CAAc;AACZX,UAAAA,QAAQ,EAAE0B;AADE,SAAd;AAGD,OAvBD,MAuBO;AACL;AACD;AACF;AA1FH;AAAA;AAAA,6BA8FW;AACP;AAEA,0BACE,QAAC,uBAAD;AACE,QAAA,SAAS,YAAKxC,2BAAL,cACP,KAAKG,KAAL,CAAWuC,QADJ,cAEL1C,2BAFK,kBAGP,KAAKG,KAAL,CAAWwC,UAAX,8BAHO,CADX;AAAA,gCAOE;AAAM,UAAA,SAAS,YAAK3C,2BAAL;AAAf;AAAA;AAAA;AAAA;AAAA,gBAPF,eAQE;AAAM,UAAA,SAAS,YAAKA,2BAAL,oBAAf;AAAA,iCACE;AACE,YAAA,GAAG,EAAE,KAAKkB,QADZ;AAEE,YAAA,SAAS,YAAKlB,2BAAL,YAFX;AAGE,YAAA,KAAK,EAAE;AAAE4C,cAAAA,SAAS,mBAAY,KAAKvC,KAAL,CAAWS,QAAvB;AAAX,aAHT;AAAA,mCAKE;AAAM,cAAA,SAAS,YAAKd,2BAAL;AAAf;AAAA;AAAA;AAAA;AAAA;AALF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBARF;AAAA;AAAA;AAAA;AAAA;AAAA,cADF;AAoBD;AArHH;;AAAA;AAAA,EAAwCD,SAAxC,E,CAwHA;AACA","sourcesContent":["// Core\nimport React, { Component } from \"react\";\n\n// Constants\nimport { __DEBUG__ } from \"../../constants/site/Settings\";\n\n// Styles\nimport {\n  InteractiveEyeballClassName,\n  InteractiveEyeballStyle,\n  // InteractiveOverlayNavigationClassName,\n} from \"./styles.scss\";\n\n// Begin Types\n// __________________________________________________________________________________________\n\nexport type LXLT_InteractiveEyeball_State = {\n  mouseX: number;\n  mouseY: number;\n\n  scrollX: number;\n  scrollY: number;\n\n  pupilWidth: number;\n  pupilHeight: number;\n\n  pupilOffsetX: number;\n  pupilOffsetY: number;\n\n  rotation: number;\n};\n\nexport type LXLT_InteractiveEyeball = {\n  addClass?: string;\n  scrollContainer?: React.RefObject<HTMLElement>;\n  isInverted?: boolean;\n};\n\n/**\n *\n * @name InteractiveEyeball\n * @author Peter Laxalt\n *\n */\nexport class InteractiveEyeball extends Component<\n  LXLT_InteractiveEyeball,\n  LXLT_InteractiveEyeball_State\n> {\n  constructor(props: LXLT_InteractiveEyeball) {\n    super(props);\n\n    this.state = {\n      mouseX: 0,\n      mouseY: 0,\n\n      scrollX: 0,\n      scrollY: 0,\n\n      pupilWidth: 0,\n      pupilHeight: 0,\n\n      pupilOffsetX: 0,\n      pupilOffsetY: 0,\n\n      rotation: 0,\n    };\n\n    this.handleMouseMovement = this.handleMouseMovement.bind(this);\n\n    this.calculatePupilBoundaries = this.calculatePupilBoundaries.bind(this);\n  }\n\n  /**\n   *\n   * @name componentDidMount()\n   *\n   */\n  componentDidMount() {\n    if (typeof window && this.pupilRef) {\n      this.calculatePupilBoundaries();\n\n      window.addEventListener(\"mousemove\", this.handleMouseMovement);\n    } else {\n      return;\n    }\n  }\n\n  componentWillUnmount() {\n    if (typeof window) {\n      window.removeEventListener(\"mousemove\", this.handleMouseMovement);\n    }\n  }\n\n  calculatePupilBoundaries() {\n    if (this.pupilRef.current) {\n      let pupilClientRect = this.pupilRef.current.getBoundingClientRect();\n\n      this.setState({\n        pupilWidth: pupilClientRect.width,\n        pupilHeight: pupilClientRect.height,\n\n        pupilOffsetX: pupilClientRect.left,\n        pupilOffsetY: pupilClientRect.top,\n      });\n    }\n  }\n\n  handleMouseMovement(e: MouseEvent) {\n    if (e) {\n      // let radians = Math.atan2(\n      //   e.screenY - (this.state.pupilOffsetY - this.state.pupilHeight / 2),\n      //   e.screenX - (this.state.pupilOffsetX - this.state.pupilWidth / 2)\n      // );\n\n      let scrollContainer =\n        this.props.scrollContainer && this.props.scrollContainer.current\n          ? this.props.scrollContainer.current\n          : document.querySelector(\"html\");\n\n      let radians = Math.atan2(\n        e.clientY +\n          scrollContainer.scrollTop -\n          (this.state.pupilOffsetY - this.state.pupilHeight / 2),\n        e.clientX - (this.state.pupilOffsetX - this.state.pupilWidth / 2)\n      );\n\n      let angle = radians * (180 / Math.PI) - 15;\n\n      this.setState({\n        rotation: angle,\n      });\n    } else {\n      return;\n    }\n  }\n\n  pupilRef = React.createRef<HTMLSpanElement>();\n\n  render() {\n    // console.log(this.state);\n\n    return (\n      <InteractiveEyeballStyle\n        className={`${InteractiveEyeballClassName} ${\n          this.props.addClass\n        } ${InteractiveEyeballClassName}--is-${\n          this.props.isInverted ? `inverted` : `not-inverted`\n        }`}\n      >\n        <span className={`${InteractiveEyeballClassName}__outline`} />\n        <span className={`${InteractiveEyeballClassName}__pupil-wrapper`}>\n          <span\n            ref={this.pupilRef}\n            className={`${InteractiveEyeballClassName}__pupil`}\n            style={{ transform: `rotate(${this.state.rotation}deg)` }}\n          >\n            <span className={`${InteractiveEyeballClassName}__pupil__el`} />\n          </span>\n        </span>\n      </InteractiveEyeballStyle>\n    );\n  }\n}\n\n// End Component\n// ______________________________________________________________________________\n"]},"metadata":{},"sourceType":"module"}